{
  "version": 3,
  "sources": ["../node_modules/@webqit/use-live/src/index.lite.js", "../node_modules/@webqit/observer/src/main.js", "../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/getType.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/js/wq.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/observer/src/util.js", "../node_modules/@webqit/observer/src/core/Registration.js", "../node_modules/@webqit/observer/src/core/ListenerRegistration.js", "../node_modules/@webqit/observer/src/core/Registry.js", "../node_modules/@webqit/observer/src/core/Descriptor.js", "../node_modules/@webqit/observer/src/core/ListenerRegistry.js", "../node_modules/@webqit/observer/src/core/TrapsRegistration.js", "../node_modules/@webqit/observer/src/core/TrapsRegistry.js", "../node_modules/@webqit/observer/src/actors.js", "../node_modules/@webqit/observer/src/index.js", "../node_modules/@webqit/use-live/src/runtime/LiveProgramHandle.js", "../node_modules/@webqit/use-live/src/util.js", "../node_modules/@webqit/use-live/src/params.js", "../node_modules/@webqit/use-live/src/transformer/Node.js", "../node_modules/@webqit/use-live/src/runtime/hot-module-registry.js", "../node_modules/@webqit/use-live/src/runtime/EventTarget.js", "../node_modules/@webqit/use-live/src/runtime/Signal.js", "../node_modules/@webqit/use-live/src/runtime/Scope.js", "../node_modules/@webqit/use-live/src/runtime/Autorun.js", "../node_modules/@webqit/use-live/src/runtime/AutoIterator.js", "../node_modules/@webqit/use-live/src/runtime/AutoAsyncIterator.js", "../node_modules/@webqit/use-live/src/runtime/Runtime.js", "../node_modules/@webqit/use-live/src/runtime/index.js", "../node_modules/@webqit/use-live/src/AbstractLiveScript.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../node_modules/@webqit/realdom/src/Scheduler.js", "../node_modules/@webqit/realdom/src/realtime/Util.js", "../node_modules/@webqit/realdom/src/realtime/DOMSpec.js", "../node_modules/@webqit/realdom/src/realtime/Realtime.js", "../node_modules/@webqit/realdom/src/realtime/AttrRealtime.js", "../node_modules/@webqit/realdom/src/realtime/DOMRealtime.js", "../node_modules/@webqit/realdom/src/polyfills.js", "../node_modules/@webqit/realdom/src/index.js", "../node_modules/@webqit/util/str/toTitle.js", "../src/util.js", "../src/context-api/_DOMContextRequestEvent.js", "../src/context-api/DOMContextResponse.js", "../src/context-api/DuplicateContextError.js", "../src/context-api/DOMContexts.js", "../src/context-api/DOMContext.js", "../src/namespaced-html/DOMNamingContext.js", "../src/namespaced-html/index.js", "../src/scoped-js/index.js", "../src/data-binding/index.js", "../src/bindings-api/DOMBindingsContext.js", "../src/bindings-api/index.js", "../src/html-imports/HTMLModule.js", "../src/html-imports/HTMLImportsContext.js", "../src/html-imports/_HTMLImportElement.js", "../src/html-imports/index.js", "../src/context-api/index.js", "../src/scoped-css/index.js", "../src/init.js", "../src/index.lite.js"],
  "sourcesContent": ["import { Observer } from '@webqit/observer';\nimport LiveProgramHandle from './runtime/LiveProgramHandle.js';\nimport { _$functionArgs } from './util.js';\nimport AbstractLiveScript from './AbstractLiveScript.js';\nimport { compile as $$compile } from './runtime/index.js';\n\nexport { Observer, LiveProgramHandle }\nexport { nextKeyword, matchPrologDirective } from './util.js';\n\nexport let LiveFunction;\n\nexport function AsyncLiveFunction(...$args) {\n    const { source, args, params } = _$functionArgs($args);\n    const transformedFunction = compile('async-function-source', source, args, params);\n    if (!(transformedFunction instanceof Promise)) return transformedFunction;\n    // Introduce a wrapper function that awaits main function\n    const wrapperFunction = async function (...args) { return (await transformedFunction).call(this, ...args); }\n    Object.defineProperty(wrapperFunction, 'toString', { value: async function (...args) { return (await transformedFunction).toString(...args) } })\n\n    return wrapperFunction;\n}\n\nexport let LiveScript;\n\nexport class AsyncLiveScript extends AbstractLiveScript {\n    static sourceType = 'async-script-source';\n    static astTools = { parse, transform, serialize };\n}\n\nexport class LiveModule extends AbstractLiveScript {\n    static sourceType = 'module';\n    static astTools = { parse, transform, serialize };\n}\n\n// ------------------\n\nexport function compile(sourceType, source, ...params) {\n    return $$compile(sourceType, { parse, transform, serialize }, source, ...params);\n}\n\nexport function parse(input, params) {\n    return exec('parse', input, params);\n}\n\nexport function transform(input, params) {\n    return exec('transform', input, params);\n}\n\nexport function serialize(input, params) {\n    return exec('serialize', input, params);\n}\n\nfunction exec(action, input, params) {\n    // To string magic\n    const patchToString = (result) => {\n        Object.defineProperty(result, 'toString', {\n            value: base64 => base64 === 'base64' ? result.transformedSourceBase64 : result.transformedSource\n        });\n        return result;\n    };\n\n    // $useLiveT has been loaded sync?\n    if (globalThis.webqit?.$useLiveT) {\n        const { parse, transform, serialize } = globalThis.webqit.$useLiveT;\n        if (action === 'serialize') return serialize(input, params);\n        if (action === 'parse') return parse(input, params);\n        if (action === 'transform') {\n            const result = transform(input, params);\n            return patchToString(result);\n        }\n    }\n\n    // Load and run $useLiveT async - in the background?\n    globalThis.webqit = globalThis.webqit || {};\n    if (!globalThis.webqit.$useLiveTWorker) {\n        const customUrl = document.querySelector('meta[name=\"$q-transformer-url\"]');\n        const transformerUrls = (customUrl?.content.split(',') || []).concat('https://unpkg.com/@webqit/use-live/dist/transformer.js');\n        const workerScriptText = `\n        const transformerUrls = [ '${transformerUrls.join(`','`)}' ];\n        ( function importScript() {\n            try { importScripts( transformerUrls.shift().trim() ) } catch( e ) { if ( transformerUrls.length ) { importScript(); } }\n        } )();\n        const { parse, transform, serialize } = globalThis.webqit.$useLiveT;\n        globalThis.onmessage = e => {\n            const { action, input, params } = e.data;\n            let result;\n            if (action === 'serialize') {\n                result = serialize(input, params);\n            } else if (action === 'parse') {\n                result = parse(input, params);\n            } else if (action === 'transform') {\n                const { toString, ...compilation } = transform(input, params);\n                result = compilation;\n            }\n            e.ports[0]?.postMessage(result);\n        };`;\n        globalThis.webqit.$useLiveTWorker = new Worker(`data:text/javascript;base64,${btoa(workerScriptText)}`);\n    }\n\n    // Run in background\n    return new Promise(res => {\n        let messageChannel = new MessageChannel;\n        webqit.$useLiveTWorker.postMessage({ action, input, params }, [messageChannel.port2]);\n        messageChannel.port1.onmessage = e => {\n            const result = e.data;\n            if (action === 'transform') patchToString(result);\n            res(result);\n        }\n    });\n}", "import { _isObject, _isTypeObject, _isFunction, _getType } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _wq, _await, env } from './util.js';\nimport ListenerRegistry from './core/ListenerRegistry.js';\nimport TrapsRegistry from './core/TrapsRegistry.js';\nimport Descriptor from './core/Descriptor.js';\nimport { unproxy } from './actors.js';\n\n/* ---------------SPECIAL APIs--------------- */\n\n/**\n * Creates a Path array instance from arguments.\n * \n * @param Array\t            ...segments\n *\n * @return Path\n */\nclass Path extends Array {\n    get [Symbol.toStringTag]() {\n        return 'Path';\n    }\n    static [Symbol.hasInstance](instance) {\n        return Array.isArray( instance )\n            && instance[ Symbol.toStringTag ] === 'Path';\n    }\n}\nexport function path( ...segments ) {\n    return new Path( ...segments );\n}\n\n/**\n * Creates a \"Subtree\" directive.\n * \n * @return Subtree\n */\nclass Subtree extends Array {\n    get [Symbol.toStringTag]() {\n        return 'Subtree';\n    }\n    static [Symbol.hasInstance](instance) {\n        return Array.isArray( instance )\n            && instance[ Symbol.toStringTag ] === 'Subtree';\n    }\n}\nexport function subtree() {\n    return new Subtree;\n}\n\n/**\n * Creates an \"Infinity\" directive.\n * \n * @return Infinity\n */\nexport function any() {\n    return Infinity;\n}\n\n/**\n * Reduces a path array against handler.\n * \n * @param Array|Object\t    target\n * @param Array\t            path\n * @param Function\t        receiver\n * @param Function\t        final\n * @param Object\t        params\n * \n * @example reduce( object, [ segement1, segement2 ], observe, ( value, flags ) => {}, params );\n *\n * @return Any\n */\nexport function reduce( target, path, receiver, final = x => x, params = {} ) {\n    const _isSubtree = path instanceof Subtree;\n    if ( !_isSubtree && !path?.length ) return;\n    return ( function eat( target, path, $params, $isSubtree ) {\n        const isSubtree = $isSubtree || path[ $params.level ] instanceof Subtree;\n        const segment = isSubtree ? Infinity : path[ $params.level ];\n        const isLastSegment = isSubtree ? false : $params.level === path.length - 1;\n        if ( target instanceof Descriptor && target.operation !== 'get' ) {\n            // Always probe event-generated trees\n            $params = { ...$params, probe: 'always' };\n        } else if ( $params.probe !== 'always' ) {\n            // Probe until (before) last segment\n            $params = { ...$params, probe: !isLastSegment };\n        }\n        // ---------------\n        return receiver( target, segment, ( result, ...args ) => {\n            // -----------\n            const addTrail = ( desc ) => {\n                if ( !( desc instanceof Descriptor ) ) return;\n                desc.path = 'key' in desc ? [ desc.key ] : [];\n                if ( target instanceof Descriptor ) {\n                    desc.path = 'key' in desc ? target.path.concat( desc.key ) : target.path.slice( 0 );\n                    Object.defineProperty( desc, 'context', { get: () => target, configurable: true } );\n                }\n            };\n            const flags = args[ 0 ] || {};\n            const advance = ( result ) => {\n                if ( result instanceof Descriptor && 'argumentsList' in result ) {\n                    return;\n                }\n                const $value = resolveObj( result/* a Descriptor who's value could be proxied */, false );\n                return _await( $value/* could be a promise */, $value => {\n                    if ( result instanceof Descriptor ) {\n                        result.value = $value; // Update to (fulfilled), unproxied, value\n                    } else {\n                        result = $value;\n                    }\n                    return eat( result, path, { ...$params, ...flags, keyInParent: result.key, level: $params.level + 1, }, isSubtree );\n                } );\n            };\n            // -----------\n            if ( isPropsList( segment ) && Array.isArray( result ) ) {\n                result.forEach( addTrail );\n                if ( isLastSegment ) {\n                    return final( result, ...args );\n                }\n                if ( isSubtree && result[ 0 ] instanceof Descriptor && ( result[ 0 ].operation !== 'get' || params.asGet ) ) {\n                    final( result, ...args );\n                }\n                for ( const entry of result ) {\n                    advance( entry );\n                }\n                return;\n            }\n            // -----------\n            addTrail( result );\n            if ( isLastSegment ) {\n                return final( result, ...args );\n            }\n            return advance( result );\n            // -----------\n        }, $params );\n    } )( target, path.slice( 0 ), { ...params, level: 0 }, _isSubtree );\n}\n\n/**\n * Adds an observer to a target's registry.\n *\n * @param Array|Object\t    target\n * @param String|Object\t    prop\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return AbortController\n */\nexport function observe( target, prop, receiver, params = {} ) {\n    // ---------------\n    const originalTarget = resolveObj( target, !params.level );\n\tif ( _isFunction( arguments[ 1 ] ) ) {\n        [ , receiver, params = {} ] = arguments;\n        prop = Infinity;\n\t}\n\tif ( !_isFunction( receiver ) ) throw new Error( `Handler must be a function; \"${ _getType( receiver ) }\" given!` );\n    if ( prop instanceof Path || prop instanceof Subtree ) return reduce( originalTarget, prop, observe, receiver, params );\n    // ---------------\n    params = { ...params, descripted: true };\n    delete params.live;\n    if ( !_isTypeObject( originalTarget ) ) return params.probe && get( originalTarget, prop, receiver, params ) || undefined;\n    // ---------------\n    const emit = bind( originalTarget, prop, receiver, params );\n    if ( params.probe ) {\n        return get( originalTarget, prop, emit, params );\n    }\n    return emit();\n}\n\n/**\n * Adds an interceptor object to a target's registry.\n *\n * @param Array|Object\t    target\n * @param Object\t        traps\n * @param Object\t\t    params\n *\n * @return AbortRegistry\n */\nexport function intercept( target, traps, params = {} ) {\n    // ---------------\n    const originalTarget = resolveObj( target );\n    if ( !_isObject( traps ) ) {\n        [ /*target*/, /*operation*/, /*handler*/, params = {} ] = arguments;\n        traps = { [ arguments[ 1 ] ]: arguments[ 2 ] };\n    }\n    // ---------------\n    return TrapsRegistry.getInstance( originalTarget, true, params.namespace ).addRegistration( { traps, params } );\n}\n\n/* ---------------QUERY APIs--------------- */\n\n/**\n * Performs a \"getOwnPropertyDescriptor\" operation.\n *\n * @param Array|Object\t    target\n * @param String|Number\t    prop\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function getOwnPropertyDescriptor( target, prop, receiver = x => x, params = {} ) {\n    return exec( target, 'getOwnPropertyDescriptor', { key: prop }, receiver, params );\n}\n\n/**\n * Performs a \"getOwnPropertyDescriptors\" operation.\n * @note this isn't part of the standard Reflect API.\n *\n * @param Array|Object\t    target\n * @param String|Number\t    prop\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function getOwnPropertyDescriptors( target, prop, receiver = x => x, params = {} ) {\n    return exec( target, 'getOwnPropertyDescriptors', { key: prop }, receiver, params );\n}\n\n/**\n * Performs a \"getPrototypeOf\" operation.\n *\n * @param Array|Object\t    target\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function getPrototypeOf( target, receiver = x => x, params = {} ) {\n    return exec( target, 'getPrototypeOf', {}, receiver, params );\n}\n\n/**\n * Performs a \"isExtensible\" operation.\n *\n * @param Array|Object\t    target\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function isExtensible( target, receiver = x => x, params = {} ) {\n    return exec( target, 'isExtensible', {}, receiver, params );\n}\n\n/**\n * Performs a \"ownKeys\" operation.\n *\n * @param Array|Object\t    target\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function ownKeys( target, receiver = x => x, params = {} ) {\n    return exec( target, 'ownKeys', {}, receiver, params );\n}\n\n/**\n * Performs an operation of the given \"type\".\n *\n * @param Array|Object\t    target\n * @param String|Number\t    prop\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function has( target, prop, receiver = x => x, params = {} ) {\n    return exec( target, 'has', { key: prop }, receiver, params );\n}\n\n/**\n * Performs a get operation.\n *\n * @param Array|Object\t    target\n * @param String|Number\t    prop\n * @param Function\t        receiver\n * @param Object\t        params\n *\n * @return Any\n */\nexport function get( target, prop, receiver = x => x, params = {} ) {\n    // ---------------\n    let isLive;\n    const originalTarget = resolveObj( target, !params.level );\n    if ( _isObject( receiver ) ) {\n        [ params, receiver ] = [ receiver, x => x ];\n    } else if ( params.live ) { isLive = true; }\n    if ( prop instanceof Path || prop instanceof Subtree ) return reduce( originalTarget, prop, get, receiver, { ...params, asGet: true } );\n    // ---------------\n    return resolveProps( originalTarget, prop, props => {\n        const related = [ ...props ];\n        return ( function next( results, _props, _done ) {\n            if ( !_props.length ) return _done( results );\n            const prop = _props.shift();\n            if ( ![ 'string', 'number', 'symbol' ].includes( typeof prop ) ) {\n                throw new Error( `Property name/key ${ prop } invalid.` );\n            }\n            // ---------\n            function defaultGet( descriptor, value = undefined ) {\n                const _next = value => ( descriptor.value = value, next( [ ...results, params.live || params.descripted ? descriptor : value ]/** not using concat() as value may be an array */, _props, _done ) );\n                if ( arguments.length > 1 ) return _next( value );\n                if ( !_isTypeObject( originalTarget ) ) return _next( originalTarget?.[ descriptor.key ] );\n                const accessorizedProps = _wq( originalTarget, 'accessorizedProps', false );\n                const accessorization = accessorizedProps && accessorizedProps.get( descriptor.key );\n                if ( accessorization && accessorization.intact() ) {\n                    return _next( accessorization.getValue( params.withPropertyDescriptors ) );\n                }\n                if ( params.withPropertyDescriptors ) {\n                    const desc = Object.getOwnPropertyDescriptor( originalTarget, descriptor.key );\n                    return _next( desc );\n                }\n                return _next( Reflect.get( originalTarget, descriptor.key/*, ...( params.receiver ? [ params.receiver ] : [] )*//*Throws Illegal invocation error ffor DOM nodes, e.g.*/ ) );\n            }\n            // ---------\n            const descriptor = new Descriptor( originalTarget, {\n                type: 'get',\n                key: prop,\n                value: undefined,\n                operation: 'get',\n                related,\n            } );\n            if ( !_isTypeObject( originalTarget ) ) return defaultGet( descriptor );\n            const trapsRegistry = TrapsRegistry.getInstance( originalTarget, false, params.namespace );\n            if ( trapsRegistry ) {\n                return trapsRegistry.emit( descriptor, defaultGet );\n            }\n            return defaultGet( descriptor );\n        } )( [], props.slice( 0 ), results => {\n            const result_s = isPropsList( prop/*original*/ ) ? results : results[ 0 ];\n            if ( isLive && _isTypeObject( originalTarget ) ) {\n                const emit = bind( originalTarget, prop, receiver, params, target.key );\n                return emit( result_s );\n            }\n            return receiver( result_s );\n        } );\n    }, params );\n}\n\n/* ---------------MUTATION APIs--------------- */\n\n/**\n * Performs a batch operation.\n * \n * @param Object\t        target\n * @param Function\t        callback\n * @param Object\t        params\n *\n * @return Void\n */\nexport function batch( target, callback, params = {} ) {\n    const originalTarget = resolveObj( target );\n    return ListenerRegistry.getInstance( originalTarget, true, params.namespace ).batch( callback, params );\n}\n\n/**\n * Performs a mirror operation.\n * \n * @param Object\t        source\n * @param Object\t        target\n * @param Object\t        params\n *\n * @return Void\n */\nexport function map( source, target, params = {} ) {\n    target = resolveObj( target );\n    source = resolveObj( source );\n    const only = ( params.only || [] ).slice( 0 ), except = ( params.except || [] ).slice( 0 );\n    const sourceKeys = Object.keys( params.spread ? [ ...source ] : source ).map( k => !isNaN( k ) ? parseInt( k ) : k );\n    const filteredKeys = only.length ? only.filter( k => sourceKeys.includes( k ) ) : sourceKeys.filter( k => !except.includes( k ) );\n    const resolveKey = k => { \n        if ( !Array.isArray( target ) || isNaN( k ) ) return k;\n        return k - except.filter( i => i < k ).length;\n    };\n    const doSet = key => {\n        const descriptor = getOwnPropertyDescriptor( source, key, params );\n        if ( ( 'value' in descriptor ) && descriptor.writable && descriptor.enumerable && descriptor.configurable ) {\n            set( target, resolveKey( key ), descriptor.value, params );\n        } else if ( descriptor.enumerable || params.onlyEnumerable === false ) { defineProperty( target, key, { ...descriptor, configurable: true }, params ); }\n    };\n    batch( target, () => {\n        filteredKeys.forEach( doSet );\n    } );\n    return observe( source, mutations => {\n        //batch( target, () => {\n            mutations.filter( m => only.length ? only.includes( m.key ) : !except.includes( m.key ) ).forEach( m => {\n                if ( m.type === 'delete' ) return deleteProperty( target, resolveKey( m.key ), params );\n                if ( m.type === 'def' ) {\n                    if ( m.value.enumerable || params.onlyEnumerable === false ) {\n                        defineProperty( target, resolveKey( m.key ), { ...m.value, configurable: true }, params );\n                    }\n                    return;\n                }\n                doSet( m.key );\n            } );\n        //}, params );\n    }, { ...params, withPropertyDescriptors: true } );\n}\n\n/**\n * Performs a set operation.\n * \n * @param Object\t        target\n * @param String|Number\t    prop\n * @param Any\t            value\n * @param Function\t        receiver\n * @param Object\t        params\n * @param Bool\t            def\n *\n * @return Any\n */\nexport function set( target, prop, value, receiver = x => x, params = {}, def = false ) {\n    // ---------------\n    const originalTarget = resolveObj( target );\n    let entries = [ [ prop, value ] ];\n    if ( _isObject( prop ) ) {\n        [ /*target*/, /*hash*/, receiver = x => x, params = {}, def = false ] = arguments;\n        entries = Object.entries( prop );\n    }\n    if ( _isObject( receiver ) ) { [ def, params, receiver ] = [ typeof params === 'boolean' ? params : def, receiver, x => x ]; }\n    // ---------------\n    const related = entries.map( ( [ prop ] ) => prop );\n    return ( function next( descriptors, entries, _done ) {\n        if ( !entries.length ) return _done( descriptors );\n        const [ prop, value ] = entries.shift();\n        // ---------\n        function defaultSet( descriptor, status = undefined ) {\n            const _next = status => ( descriptor.status = status, next( descriptors.concat( descriptor ), entries, _done ) );\n            if ( arguments.length > 1 ) return _next( descriptor, status );\n            const accessorizedProps = _wq( originalTarget, 'accessorizedProps', false );\n            const accessorization = accessorizedProps && accessorizedProps.get( descriptor.key );\n            if ( descriptor.type === 'def' ) {\n                if ( accessorization && !accessorization.restore() ) _next( false );\n                Object.defineProperty( originalTarget, descriptor.key, descriptor.value );\n                return _next( true );\n            }\n            if ( accessorization && accessorization.intact() ) {\n                return _next( accessorization.setValue( descriptor.value ) );\n            }\n            return _next( Reflect.set( originalTarget, descriptor.key, descriptor.value ) );\n        }\n        // ---------\n        function exec( isUpdate, oldValue ) {\n            if ( params.diff && value === oldValue ) return next( descriptors, entries, _done );\n            const descriptor = new Descriptor( originalTarget, {\n                type: def ? 'def' : 'set',\n                key: prop,\n                value,\n                isUpdate,\n                oldValue,\n                related: [ ...related ],\n                operation: def ? 'defineProperty' : 'set',\n                detail: params.detail,\n            } );\n            const trapsRegistry = TrapsRegistry.getInstance( originalTarget, false, params.namespace );\n            return trapsRegistry \n                ? trapsRegistry.emit( descriptor, defaultSet ) \n                : defaultSet( descriptor );\n        }\n        // ---------\n        return has( originalTarget, prop, exists => {\n            if ( !exists ) return exec( exists );\n            if ( prop === 'length' && Array.isArray( originalTarget ) && _wq( originalTarget ).has( '$length' ) ) {\n                return exec( true, _wq( originalTarget ).get( '$length' ) );\n            }\n            const $params = { ...params, withPropertyDescriptors: def };\n            return get( originalTarget, prop, oldValue => exec( exists, oldValue ), $params );\n        }, params );\n        // ---------\n    } )( [], entries.slice( 0 ), descriptors => {\n        const listenerRegistry = ListenerRegistry.getInstance( originalTarget, false, params.namespace );\n        if ( listenerRegistry ) listenerRegistry.emit( descriptors, { eventsArePropertyDescriptors: !!def } );\n        return receiver(\n            isPropsList( prop/*original*/ ) ? descriptors.map( opr => opr.status ) : descriptors[ 0 ]?.status\n        );\n    } );\n}\n\n/**\n * Performs a defineProperty operation.\n * \n * @param Object\t        target\n * @param String|Number\t    prop\n * @param Object\t        descriptor\n * @param Function\t        receiver\n * @param Object\t        params\n *\n * @return Any\n */\nexport function defineProperty( target, prop, descriptor, receiver = x => x, params = {} ) {\n    return set( target, prop, descriptor, receiver, params, true/*def*/ );\n}\n\n/**\n * Performs a defineProperties operation.\n * @note this isn't part of the standard Reflect API.\n * \n * @param Object\t        target\n * @param Object\t        descriptors\n * @param Function\t        receiver\n * @param Object\t        params\n *\n * @return Any\n */\nexport function defineProperties( target, descriptors, receiver = x => x, params = {} ) {\n    return set( target, descriptors, receiver, params, true/*def*/ );\n}\n\n/**\n * Performs a delete operation.\n * \n * @param Object\t        target\n * @param String|Number\t    prop\n * @param Function\t        receiver\n * @param Object\t        params\n *\n * @return Any\n */\nexport function deleteProperty( target, prop, receiver = x => x, params = {} ) {\n    // ---------------\n    const originalTarget = resolveObj( target );\n    if ( _isObject( receiver ) ) { [ params, receiver ] = [ receiver, x => x ]; }\n    // ---------------\n    const props = _arrFrom( prop, false ), related = [ ...props ];\n    return ( function next( descriptors, props, _done ) {\n        if ( !props.length ) return _done( descriptors );\n        const prop = props.shift();\n        // ---------\n        function defaultDel( descriptor, status = undefined ) {\n            const _next = status => ( descriptor.status = status, next( descriptors.concat( descriptor ), props, _done ) );\n            if ( arguments.length > 1 ) return _next( descriptor, status );\n            const accessorizedProps = _wq( originalTarget, 'accessorizedProps', false );\n            const accessorization = accessorizedProps && accessorizedProps.get( descriptor.key );\n            if ( accessorization && !accessorization.restore() ) _next( false );\n            return _next( Reflect.deleteProperty( originalTarget, descriptor.key ) );\n        }\n        // ---------\n        function exec( oldValue ) {\n            const descriptor = new Descriptor( originalTarget, {\n                type: 'delete',\n                key: prop,\n                oldValue,\n                related: [ ...related ],\n                operation: 'deleteProperty',\n                detail: params.detail,\n            } );\n            const trapsRegistry = TrapsRegistry.getInstance( originalTarget, false, params.namespace );\n            return trapsRegistry \n                ? trapsRegistry.emit( descriptor, defaultDel ) \n                : defaultDel( descriptor );\n        }\n        // ---------\n        return get( originalTarget, prop, exec, params );\n        // ---------\n    } )( [], props.slice( 0 ), descriptors => {\n        const listenerRegistry = ListenerRegistry.getInstance( originalTarget, false, params.namespace );\n        if ( listenerRegistry ) listenerRegistry.emit( descriptors );\n        return receiver(\n            isPropsList( prop/*original*/ ) ? descriptors.map( opr => opr.status ) : descriptors[ 0 ].status\n        );\n    } );\n}\n\n/**\n * @alias deleteProperty()\n */\nexport function deleteProperties( target, props, receiver = x => x, params = {} ) {\n    return deleteProperty( ...arguments );\n}\n\n/* ---------------EFFECT APIs--------------- */\n\n/**\n * Performs a \"construct\" operation.\n *\n * @param Array|Object\t    target\n * @param Array\t\t\t    argumentsList\n * @param Object\t\t    newTarget\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function construct( target, argumentsList, newTarget = null, receiver = x => x, params = {} ) {\n    return exec( target, 'construct', arguments.length > 2 ? { argumentsList, newTarget } : { argumentsList }, receiver, params );\n}\n\n/**\n * Performs an \"apply\" operation.\n *\n * @param Array|Object\t    target\n * @param Any\t            thisArgument\n * @param Array\t            argumentsList\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function apply( target, thisArgument, argumentsList, receiver = x => x, params = {} ) {\n    const originalThis = unproxy( thisArgument );\n    let returnValue;\n    if ( Array.isArray( thisArgument ) ) {\n        if ( params.arrayMethodName ) {\n            const descriptor = new Descriptor( originalThis, {\n                operation: params.arrayMethodName,\n                argumentsList\n            } );\n            const listenerRegistry = ListenerRegistry.getInstance( originalThis, false, params.namespace );\n            listenerRegistry?.emit( [ descriptor ], { eventIsArrayMethodDescriptor: true } );\n        }\n        _wq( originalThis ).set( '$length', originalThis.length );\n        returnValue = batch(\n            originalThis,\n            () => exec( target, 'apply', { thisArgument/*proxy wrappers allowed; in fact is why it works*/, argumentsList }, receiver, params ),\n            params\n        );\n        _wq( originalThis ).delete( '$length' );\n    } else {\n        returnValue = exec( target, 'apply', { thisArgument: originalThis, argumentsList }, receiver, params );\n    }\n    return returnValue;\n}\n\n/**\n * Performs a \"setPrototypeOf\" operation.\n *\n * @param Array|Object\t    target\n * @param Anyr\t            proto\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function setPrototypeOf( target, proto, receiver = x => x, params = {} ) {\n    return exec( target, 'setPrototypeOf', { proto }, receiver, params );\n}\n\n/**\n * Performs a \"preventExtension\" operation.\n *\n * @param Array|Object\t    target\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nexport function preventExtensions( target, receiver = x => x, params = {} ) {\n    return exec( target, 'preventExtensions', {}, receiver, params );\n}\n\n/* ---------------HELPER APIs--------------- */\n\n/**\n * Adds an observer to a target's registry.\n *\n * @param Array|Object\t    target\n * @param String|Object\t    prop\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Function: AbortController\n */\nfunction bind( target, prop, receiver, params = {} ) {\n    const controller = new AbortController;\n    env.setMaxListeners?.( 0, controller.signal );\n    if ( params.signal ) { params.signal.addEventListener( 'abort', () => controller.abort() ); }\n    const $params = { ...params, signal: controller.signal };\n    const listenerRegistry = ListenerRegistry.getInstance( target, true, $params.namespace );\n    const childRegistrations = new Map;\n    return function emit( descriptor_s = [], prevRegistration = null ) {\n        let flags, registrationNext, isExisting;\n        if ( isPropsList( prop ) ) {\n            if ( prevRegistration ) {\n                isExisting = true;\n                registrationNext = prevRegistration;\n                for ( const descriptor of descriptor_s ) {\n                    childRegistrations.get( descriptor.key )?.remove();\n                    childRegistrations.delete( descriptor.key );\n                }\n            } else {\n                registrationNext = listenerRegistry.addRegistration( prop, emit, $params );\n            }\n            flags = { signal: registrationNext.signal, childRegistrations };\n        } else {\n            prevRegistration?.remove();\n            registrationNext = listenerRegistry.addRegistration( prop, emit, $params );\n            flags = { signal: registrationNext.signal };\n        }\n        // ------------------\n        if ( $params.childRegistrations && $params.keyInParent ) {\n            $params.childRegistrations.set( $params.keyInParent, registrationNext );\n        }\n        // ------------------\n        if ( arguments.length ) {\n            const handlerReturnValue = receiver( descriptor_s, flags );\n            if ( arguments.length > 1 ) return handlerReturnValue;\n        }\n        return controller;\n    };\n}\n\n/**\n * Performs an operation of the given \"type\".\n *\n * @param Array|Object\t    target\n * @param String\t\t    operation\n * @param Object\t\t    payload\n * @param Function\t        receiver\n * @param Object\t\t    params\n *\n * @return Any\n */\nfunction exec( target, operation, payload = {}, receiver = x => x, params = {} ) {\n    // ---------\n    target = resolveObj( target );\n    if ( _isObject( receiver ) ) { [ params, receiver ] = [ receiver, x => x ]; }    \n    // ---------\n    function defaultExec( descriptor, result ) {\n        if ( arguments.length > 1 ) return receiver( result );\n        return receiver( ( Reflect[ operation ] || Object[ operation ] )( target, ...Object.values( payload ) ) );\n    }\n    // ---------\n    const descriptor = new Descriptor( target, { operation, ...payload } );\n    const trapsRegistry = TrapsRegistry.getInstance( target, false, params.namespace );\n    if ( trapsRegistry ) {\n        return trapsRegistry.emit( descriptor, defaultExec );\n    }\n    return defaultExec( descriptor );\n}\n\n// Asks if prop is a multi-result field\nfunction isPropsList( prop ) {\n    return prop === Infinity || Array.isArray( prop );\n}\n\n// Resolves obj down to it's self\nfunction resolveObj( obj, assert = true, probePropertyDescriptors = true ) {\n\tif ( ( !obj || !_isTypeObject( obj ) ) && assert ) throw new Error( `Object must be of type object or array! \"${ _getType( obj ) }\" given.` );\n    if ( obj instanceof Descriptor ) {\n        if ( obj.type === 'def' && probePropertyDescriptors ) {\n            obj = typeof obj.value.get === 'function' ? obj.value.get() : obj.value.value;\n        } else {\n            obj = obj.value;\n        }\n    }\n\treturn obj && unproxy( obj );\n}\n\n// Resolves prop down to actual keys\nfunction resolveProps( obj, prop, receiver, params = {} ) {\n    if ( prop === Infinity ) {\n        if ( params.level && !_isTypeObject( obj ) ) return receiver( [] );\n        return receiver( Object.entries( Object.getOwnPropertyDescriptors( obj ) ).filter( ( [ , p ] ) => p.writable !== false && !p.get && !p.set ).map( ( [ name ] ) => name ) );\n    }\n    return receiver( _arrFrom( prop, false ) );\n}\n", "\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Returns the val's type.\n *\n * @param string \tval\n *\n * @return string\n */\nexport default function(val) {\n\treturn typeof val;\n};\n", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n", "\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.keys(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n", "\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n", "export default function wq(obj, ...namespaces) {\n    if (!obj || !['object', 'function'].includes(typeof obj)) {\n        throw new Error(`Argument #1 must be of type object`);\n    }\n    let wq = obj[Symbol.for('wq')];\n    if (!wq) {\n        wq = new WQInternals;\n        Object.defineProperty(obj, Symbol.for('wq'), {\n            value: wq,\n            // Defaults, but to be explicit...\n            enumerable: false,\n            configurable: false,\n            writable: false\n        });\n    }\n    if (!namespaces.length) {\n        return wq;\n    }\n    let _ns, _wq;\n    while ((_ns = namespaces.shift())) {\n        if ((_wq = wq) && !(wq = wq.get(_ns))) {\n            wq = new WQInternals;\n            _wq.set(_ns, wq);\n        }\n    }\n    return wq;\n}\n\nclass WQInternals extends Map {}", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport { _wq as __wq } from '@webqit/util/js/index.js';\n\nexport const _wq = ( target, ...args ) => __wq( target, 'observerAPI', ...args );\n\nexport const _await = ( value, callback ) => value instanceof Promise ? value.then( callback ) : callback( value );\n\nexport const env = {};\n", "\n/**\n * ---------------------------\n * The Registration class\n * ---------------------------\n */\n\nexport default class Registration {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param Registry\t\t\tregistry\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor( registry, dfn ) {\n\t\tthis.registry = registry;\n\t\tObject.assign( this, { ...dfn, target: registry.target } );\n\t\tif ( this.params.signal ) {\n\t\t\tthis.params.signal.addEventListener( 'abort', () => this.remove() );\n\t\t}\n\t}\n\n\t/**\n\t * Sets a \"disconnected\" flag on the Registration.\n\t *\n\t * @return void\n\t */\n\tremove() {\n\t\tthis.removed = true;\n\t\treturn this.registry.removeRegistration( this );\n\t}\n}", "\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport Registration from './Registration.js';\nimport { _await, env } from '../util.js';\n\n/**\n * ---------------------------\n * The ListenerRegistration class\n * ---------------------------\n */\n\nexport default class ListenerRegistration extends Registration {\n\t\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.emit.currentRegistration = this;\n\t\tObject.defineProperty( this, 'abortController', { value: new AbortController } );\n\t\tObject.defineProperty( this, 'signal', { value: this.abortController.signal } );\n\t\tenv.setMaxListeners?.( 0, this.signal );\n\t}\n\n\t/**\n\t * De-registers the instance.\n\t * \n\t * @return Void\n\t */\n\tremove() {\n\t\tthis.abortController.abort();\n\t\tsuper.remove();\n\t}\n\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the event's fields.\n\t *\n\t * @param Array\t\t\t \t\tevents\n\t *\n\t * @return Any\n\t */\n\tfire( events ) {\n\t\tif ( this.emit.recursionTarget && ![ 'inject', 'force-async', 'force-sync' ].includes( this.params.recursions ) ) return;\n\t\tlet matches = events, filter = this.filter;\n\t\tif ( filter !== Infinity && ( filter = _arrFrom( filter, false ) ) ) {\n\t\t\tmatches = events.filter( event => filter.includes( event.key ) );\n\t\t}\n\t\tif ( this.params.diff ) {\n\t\t\tmatches = matches.filter( event => event.type !== 'set' || event.value !== event.oldValue );\n\t\t}\n\t\tif ( !matches.length ) return;\n\t\tif ( [ 'inject', 'defer' ].includes( this.params.recursions ) ) {\n\t\t\tif ( this.emit.recursionTarget ) {\n\t\t\t\tthis.emit.recursionTarget.push( ...matches );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.emit.recursionTarget = this.params.recursions === 'inject' ? matches : [];\n\t\t}\n\t\tconst $ret = this.filter === Infinity || Array.isArray( this.filter )\n\t\t\t? this.emit( matches, this )\n\t\t\t: this.emit( matches[ 0 ], this );\n\t\t// NOTEL: on calling emit(), this registration has expired and a new one active!!!\n\t\treturn _await( $ret, ret => {\n\t\t\tconst recursions = this.emit.recursionTarget;\n\t\t\tdelete this.emit.recursionTarget;\n\t\t\tif ( this.params.recursions === 'defer' ) {\n\t\t\t\tif ( recursions?.length ) return this.emit.currentRegistration.fire( recursions );\n\t\t\t}\n\t\t\treturn ret;\n\t\t} );\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom, _intersect, _equals as _arrEquals } from '@webqit/util/arr/index.js';\nimport { _wq } from '../util.js';\n\n/**\n * ---------------------------\n * The Registry class\n * ---------------------------\n */\n\nexport default class Registry {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object\ttarget\n\t * \n\t * @return void\n\t */\n\tconstructor( target ) {\n\t\tthis.target = target;\n\t\tthis.entries = [];\n\t}\n\t\n\t/**\n\t * Adds an Registration instance\n\t * with optional tags.\n\t *\n\t * @param Registration\t\tregistration\n\t *\n\t * @return Registration\n\t */\n\taddRegistration( registration ) {\n\t\tthis.entries.push( registration );\n\t\treturn registration;\n\t}\n\t\n\t/**\n\t * Removes registrations by reference.\n\t *\n\t * @param Registration\t\tregistration\n\t *\n\t * @return void\n\t */\n\tremoveRegistration( registration ) {\n\t\tthis.entries = this.entries.filter( _entry => _entry !== registration );\n\t}\n\t\t\n\t/**\n\t * Returns a observer-specific object embedded on an element.\n\t *\n\t * @param string\t\ttype\n\t * @param array|object\ttarget\n\t * @param bool      \tcreateIfNotExists\n\t * @param string      \tnamespace\n\t *\n\t * @return Registry\n\t */\n\tstatic _getInstance( type, target, createIfNotExists = true, namespace = this.__namespace ) {\n\t\tif ( !_isTypeObject( target ) ) throw new Error( `Subject must be of type object; \"${ _getType( target ) }\" given!` );\n\t\tlet ImplementationClass = this;\n\t\tif ( namespace && _wq( globalThis, 'observerAPI', 'namespaces' ).has( type + '-' + namespace ) ) {\n\t\t\tImplementationClass = _wq( globalThis, 'observerAPI', 'namespaces' ).get( type + '-' + namespace );\n\t\t\ttype += '-' + namespace\n\t\t}\n\t\tif ( !_wq( target, 'registry' ).has( type ) && createIfNotExists ) {\n\t\t\t_wq( target, 'registry' ).set( type, new ImplementationClass( target ) );\n\t\t}\n\t\treturn _wq( target, 'registry' ).get( type );\n\t}\n\n\t/**\n\t * Extend a Fireable Class with a namespace.\n\t *\n\t * @param string\t\tnamespace\n\t * @param class      \tImplementationClass\n\t *\n\t * @return void|class\n\t */\n\tstatic _namespace( type, namespace, ImplementationClass = null ) {\n\t\ttype += '-' + namespace;\n\t\tif ( arguments.length === 2 ) return _wq( globalThis, 'observerAPI', 'namespaces' ).get( type );\n\t\tif ( !( ImplementationClass.prototype instanceof this ) ) {\n\t\t\tthrow new Error( `The implementation of the namespace ${ this.name }.${ namespace } must be a subclass of ${ this.name }.` );\n\t\t}\n\t\t_wq( globalThis, 'observerAPI', 'namespaces' ).set( type, ImplementationClass );\n\t\tImplementationClass.__namespace = namespace;\n\t}\n}", "\n/**\n * ---------------------------\n * The Descriptor class\n * ---------------------------\n */\n\nexport default class Descriptor {\n\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\ttarget\n\t * @param object\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tif (!(dfn.operation)) throw new Error('Descriptor operation must be given in definition!');\n\t\tObject.assign(this, dfn);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Descriptor';\n\t}\n\n\tstatic [Symbol.hasInstance](instance) {\n\t\treturn instance?.[Symbol.toStringTag] === 'Descriptor'\n\t\t\t&& instance.operation\n\t}\n}", "\n/**\n * @imports\n */\nimport ListenerRegistration from './ListenerRegistration.js';\nimport Registry from './Registry.js';\nimport { _await } from '../util.js';\nimport Descriptor from './Descriptor.js';\n\n/**\n * ---------------------------\n * The ListenerRegistry class\n * ---------------------------\n */\n\nexport default class ListenerRegistry extends Registry {\n\n\tstatic getInstance( target, createIfNotExists = true, namespace = null ) {\n\t\treturn super._getInstance( 'listeners', ...arguments );\n\t}\n\n\tstatic namespace( namespace, ImplementationClass = null ) {\n\t\treturn super._namespace( 'listeners', ...arguments );\n\t}\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( target ) {\n\t\tsuper( target );\n\t\tthis.batches = [];\n\t}\n\t\n\t/**\n\t * @addRegistration\n\t */\n\taddRegistration( filter, emit, params ) {\n\t\treturn super.addRegistration( new ListenerRegistration( this, { filter, emit, params } ) );\n\t}\n\t\n\t/**\n\t * Fires all observers with the given evt (change).\n\t *\n\t * @param Arrayn events\n\t *\n\t * @return Void\n\t */\n\temit( events, { eventsArePropertyDescriptors = false, eventIsArrayMethodDescriptor = false } = {} ) {\n\t\tif ( this.batches.length ) {\n\t\t\tconst arrayMethodName = this.batches[ 0 ].params.arrayMethodName;\n\t\t\tthis.batches[ 0 ].snapshots.push( {\n\t\t\t\tevents: [ ...events ],\n\t\t\t\tarrayMethodName, // Typically from array operations\n\t\t\t\teventsArePropertyDescriptors, // Typically from defineProperty() operations\n\t\t\t\teventIsArrayMethodDescriptor // Typically from array method operations\n\t\t\t} );\n\t\t\treturn\n\t\t}\n\t\tthis.$emit( this.entries, [ {\n\t\t\tevents, \n\t\t\teventsArePropertyDescriptors, // Typically from defineProperty() operations\n\t\t\teventIsArrayMethodDescriptor // Typically from array method operations\n\t\t} ] );\n\t}\n\n\t$emit( listeners, snapshots ) {\n\t\t// Analyse listener modes\n\t\tlet listenersLength = 0,\n\t\tlistenersAskingEventsWithPropertyDescriptors = 0,\n\t\tlistenersAskingArrayMethodDescriptors = 0;\n\t\tfor ( const listener of listeners ) {\n\t\t\tlistenersLength += 1;\n\t\t\tif ( listener.params.withPropertyDescriptors ) {\n\t\t\t\tlistenersAskingEventsWithPropertyDescriptors += 1;\n\t\t\t}\n\t\t\tif ( listener.params.withArrayMethodDescriptors ) {\n\t\t\t\tlistenersAskingArrayMethodDescriptors += 1;\n\t\t\t}\n\t\t}\n\t\t// Sort events\n\t\tconst events_with_PropertyDescriptors_with_ArrayMethodDescriptors = [], events_with_PropertyDescriptors_without_ArrayMethodDescriptors = [];\n\t\tconst events_without_PropertyDescriptors_with_ArrayMethodDescriptors = [], events_without_PropertyDescriptors_without_ArrayMethodDescriptors = [];\n\t\tfor ( const snapshot of snapshots ) {\n\t\t\tconst arrayMethodName = snapshot.arrayMethodName;\n\t\t\tconst eventsArePropertyDescriptors = snapshot.eventsArePropertyDescriptors;\n\t\t\tconst eventIsArrayMethodDescriptor = snapshot.eventIsArrayMethodDescriptor;\n\t\t\tfor ( const event of snapshot.events ) {\n\t\t\t\tif ( arrayMethodName ) {\n\t\t\t\t\tevent.operation = arrayMethodName;\n\t\t\t\t}\n\t\t\t\t// Some opting in to PropertyDescriptors\n\t\t\t\tif ( listenersAskingEventsWithPropertyDescriptors ) {\n\t\t\t\t\t//if ( !arrayMethodName ) { }\n\t\t\t\t\tlistenersAskingArrayMethodDescriptors && // Some opting in to ArrayMethodDescriptors\n\t\t\t\t\tevents_with_PropertyDescriptors_with_ArrayMethodDescriptors.push( event );\n\t\t\t\t\tif ( !eventIsArrayMethodDescriptor ) {\n\t\t\t\t\t\tlistenersAskingArrayMethodDescriptors !== listenersLength && // Some opting out of ArrayMethodDescriptors\n\t\t\t\t\t\tevents_with_PropertyDescriptors_without_ArrayMethodDescriptors.push( event );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Some opting out of PropertyDescriptors\n\t\t\t\tif ( listenersAskingEventsWithPropertyDescriptors !== listenersLength ) {\n\t\t\t\t\tlet $event = event;\n\t\t\t\t\tif ( eventsArePropertyDescriptors ) {\n\t\t\t\t\t\tconst { target, type, ...details } = event;\n\t\t\t\t\t\t$event = new Descriptor( target, { type: 'set', ...details } );\n\t\t\t\t\t\tObject.defineProperty( $event, 'value', 'get' in details.value ? { get: () => details.value.get() } : { value: details.value.value } )\n\t\t\t\t\t\tif ( details.oldValue ) {\n\t\t\t\t\t\t\tObject.defineProperty( $event, 'oldValue', 'get' in details.oldValue ? { get: () => details.oldValue.get() } : { value: details.oldValue.value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//if ( !arrayMethodName/*Although eedless as is typically mutually exclusive to eventsArePropertyDescriptors*/ ) { }\n\t\t\t\t\tlistenersAskingArrayMethodDescriptors && // Some opting in to ArrayMethodDescriptors\n\t\t\t\t\tevents_without_PropertyDescriptors_with_ArrayMethodDescriptors.push( $event );\n\t\t\t\t\tif ( !eventIsArrayMethodDescriptor ) { // Although eedless as is typically already implied by eventsArePropertyDescriptors\n\t\t\t\t\t\tlistenersAskingArrayMethodDescriptors !== listenersLength && // Some opting out of ArrayMethodDescriptors\n\t\t\t\t\t\tevents_without_PropertyDescriptors_without_ArrayMethodDescriptors.push( $event );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Dispatch\n\t\tfor ( const listener of listeners ) {\n\t\t\tif ( listener.params.withPropertyDescriptors ) {\n\t\t\t\tif ( listener.params.withArrayMethodDescriptors ) {\n\t\t\t\t\tevents_with_PropertyDescriptors_with_ArrayMethodDescriptors.length &&\n\t\t\t\t\tlistener.fire( events_with_PropertyDescriptors_with_ArrayMethodDescriptors );\n\t\t\t\t} else {\n\t\t\t\t\tevents_with_PropertyDescriptors_without_ArrayMethodDescriptors.length &&\n\t\t\t\t\tlistener.fire( events_with_PropertyDescriptors_without_ArrayMethodDescriptors );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( listener.params.withArrayMethodDescriptors ) {\n\t\t\t\t\tevents_without_PropertyDescriptors_with_ArrayMethodDescriptors.length &&\n\t\t\t\t\tlistener.fire( events_without_PropertyDescriptors_with_ArrayMethodDescriptors );\n\t\t\t\t} else {\n\t\t\t\t\tevents_without_PropertyDescriptors_without_ArrayMethodDescriptors.length &&\n\t\t\t\t\tlistener.fire( events_without_PropertyDescriptors_without_ArrayMethodDescriptors );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Fires all observers with the given evt (change).\n\t *\n\t * @param Arrayn events\n\t *\n\t * @return Void\n\t */\n\tbatch( callback, params = {} ) {\n\t\tthis.batches.unshift( { entries: [ ...this.entries ], snapshots: [], params } );\n\t\tconst returnValue = callback();\n\t\treturn _await( returnValue, returnValue => {\n\t\t\tconst batch = this.batches.shift();\n\t\t\tif ( !batch.snapshots.length ) return returnValue;\n\t\t\tthis.$emit( batch.entries, batch.snapshots );\n\t\t\treturn returnValue;\n\t\t} );\n\t}\n\n}\n", "\n/**\n * @imports\n */\nimport Registration from './Registration.js';\n\n/**\n * ---------------------------\n * The TrapsRegistration class\n * ---------------------------\n */\n\nexport default class TrapsRegistration extends Registration {\n\t\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the descriptor's fields.\n\t *\n\t * @param Descriptor\t\t\t \tdescriptor\n\t * @param function\t\t\t\t\tnext\n\t * @param mixed\t\t\t\t\t \trecieved\n\t *\n\t * @return void\n\t */\n\texec( descriptor, next, recieved ) {\n\t\tif ( this.running || !this.traps[ descriptor.operation ] ) {\n\t\t\treturn next( ...Array.prototype.slice.call( arguments, 2 ) );\n\t\t}\n\t\tthis.running = true;\n\t\treturn this.traps[ descriptor.operation ]( descriptor, recieved, ( ...args ) => {\n\t\t\tthis.running = false;\n\t\t\treturn next( ...args );\n\t\t} );\n\t}\n}", "\n/**\n * @imports\n */\nimport TrapsRegistration from './TrapsRegistration.js';\nimport Registry from './Registry.js';\n\n/**\n * ---------------------------\n * The TrapsRegistry class\n * ---------------------------\n */\n\nexport default class TrapsRegistry extends Registry {\n\n\tstatic getInstance( target, createIfNotExists = true, namespace = null ) {\n\t\treturn super._getInstance( 'traps', ...arguments );\n\t}\n\n\tstatic namespace( namespace, ImplementationClass = null ) {\n\t\treturn super._namespace( 'traps', ...arguments );\n\t}\n\t\n\t/**\n\t * @inheritdoc\n\t */\n\taddRegistration( dfn ) {\n\t\treturn super.addRegistration( new TrapsRegistration( this, dfn ) );\n\t}\n\n\t/**\n\t * Fires all interceptors with the given action.\n\t *\n\t * @param Descriptor\t\tdescriptor\n\t * @param function\t\t\tdefaultHandler\n\t *\n\t * @return mixed\n\t */\n\temit( descriptor, defaultHandler = null ) {\n\t\tconst $this = this;\n\t\treturn ( function next( index, ..._args ) {\n\t\t\tconst registration = $this.entries[ index ];\n\t\t\tif ( registration ) {\n\t\t\t\treturn registration.exec( descriptor, ( ...args ) => {\n\t\t\t\t\treturn next( index + 1, ...args );\n\t\t\t\t}/*next*/, ..._args );\n\t\t\t}\n\t\t\treturn defaultHandler ? defaultHandler( descriptor, ..._args ) : _args[ 0 ];\n\t\t} )( 0 );\n\t}\n}", "\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _isClass, _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport { set, deleteProperty, has, get, ownKeys, defineProperty, getOwnPropertyDescriptor } from \"./main.js\";\nimport { apply, construct, getPrototypeOf, setPrototypeOf, isExtensible, preventExtensions } from \"./main.js\";\nimport { _wq } from './util.js';\n\n/* ---------------ACCESSORIZE METHODS--------------- */\n\n/**\n * Accessorizes props.\n *\n * @param Array|Object\ttarget\n * @param String|Array\tprops\n * @param Object\t\tparams\n *\n * @return Array\n */\nconst symWQOriginal = Symbol('wqOriginal');\nexport function accessorize( target, props, params = {} ) {\n    target = resolveTarget( target );\n    const accessorizedProps = _wq( target, 'accessorizedProps' );\n    // ---------\n    function getDescriptorDeep( prop ) {\n        let descriptor, proto = target;\n        do {\n            descriptor = Object.getOwnPropertyDescriptor( proto, prop );\n        } while ( !descriptor && ( proto = Object.getPrototypeOf( proto ) ) );\n        return descriptor \n            ? { proto, descriptor } \n            : { descriptor: { value: undefined, configurable: true, enumerable: true, writable: true } };\n    }\n    // ---------\n    function accessorizeProp( prop ) {\n        if ( accessorizedProps.has( prop + '' ) ) return true;\n        // ------------------\n        // Current Descriptor Record\n        const currentDescriptorRecord = getDescriptorDeep( prop );\n        currentDescriptorRecord.getValue = function( withPropertyDescriptors = false ) {\n            if ( withPropertyDescriptors ) return this.descriptor;\n            return this.descriptor.get ? this.descriptor.get() : this.descriptor.value;\n        };\n        currentDescriptorRecord.setValue = function( value, withPropertyDescriptors = false ) {\n            this.dirty = true;\n            if ( withPropertyDescriptors ) { this.descriptor = value; return; }\n            return this.descriptor.set ? this.descriptor.set( value ) !== false : ( this.descriptor.value = value, true );\n        };\n        currentDescriptorRecord.intact = function() {\n            const currentDescriptor = Object.getOwnPropertyDescriptor( target, prop );\n            return currentDescriptor?.get === accessorization.get \n                && currentDescriptor?.set === accessorization.set\n                && accessorizedProps.get( prop + '' ) === this;\n        };\n        currentDescriptorRecord.restore = function() {\n            if ( !this.intact() ) return false;\n            if ( ( this.proto && this.proto !== target ) || ( !this.proto && !this.dirty ) ) { delete target[ prop ]; }\n            else { Object.defineProperty( target, prop, this.descriptor ); }\n            accessorizedProps.delete( prop + '' );\n            return true;\n        };\n        accessorizedProps.set( !isNaN( prop ) ? parseInt( prop ) : prop, currentDescriptorRecord );\n        // ------------------\n        // enumerable, configurable\n        const { enumerable = true } = currentDescriptorRecord.descriptor;\n        const accessorization = { enumerable, configurable: true };\n        // set, get\n        if ( ( 'value' in currentDescriptorRecord.descriptor ) || currentDescriptorRecord.descriptor.set ) {\n            accessorization.set = function ( value ) { return set( this, prop, value, params ); };\n        }\n        if ( ( 'value' in currentDescriptorRecord.descriptor ) || currentDescriptorRecord.descriptor.get ) {\n            accessorization.get = function () { return get( this, prop, params ); };\n        }\n        try {\n            Object.defineProperty( target, prop, accessorization );\n            return true;\n        } catch( e ) {\n            accessorizedProps.delete( prop + '' );\n            return false;\n        }\n    }\n    const _props = Array.isArray( props ) ? props : (\n        props === undefined ? Object.keys( target ) : [ props ]\n    );\n    const statuses = _props.map( accessorizeProp );\n    return props === undefined || Array.isArray( props ) \n        ? statuses \n        : statuses[ 0 ];\n}\n\n/**\n * Unaccessorizes previously accessorized props.\n *\n * @param Array|Object\ttarget\n * @param String|Array\tprops\n * @param Object\t\tparams\n *\n * @return Array\n */\nexport function unaccessorize( target, props, params = {} ) {\n    target = resolveTarget( target );\n    const accessorizedProps = _wq( target, 'accessorizedProps' );\n    function unaccessorizeProp( prop ) {\n        if ( !accessorizedProps.has( prop + '' ) ) return true;\n        return accessorizedProps.get( prop + '' ).restore();\n    }\n    const _props = Array.isArray( props ) ? props : (\n        props === undefined ? Object.keys( target ) : [ props ]\n    );\n    const statuses = _props.map( unaccessorizeProp );\n    return props === undefined || Array.isArray( props ) \n        ? statuses \n        : statuses[ 0 ];\n}\n\n/* ---------------PROXY METHODS--------------- */\n\n/**\n * Returns an object as a proxy and binds all instance methods\n * to the proxy instead of the object itself.\n *\n * @param Array|Object\t\ttarget\n * @param Object\t\t    params\n * @param Function\t\t    extendCallback\n *\n * @return Proxy\n */\nexport function proxy( target, params = {}, extendCallback = undefined ) {\n    // Resolve target\n    const originalTarget = resolveTarget( target );\n    // Return same proxy instance?\n    if ( typeof params.membrane === 'boolean' ) throw new Error( `The params.membrane parameter cannot be of type boolean.` );\n    if ( params.membrane && _wq( originalTarget, 'membraneRef' ).has( params.membrane ) ) { return _wq( originalTarget, 'membraneRef' ).get( params.membrane ); }\n    const traps = {\n        apply: ( target, thisArgument, argumentsList ) => apply( target, thisArgument, argumentsList, undefined, params ),\n        construct:  ( target, argumentsList, newTarget = null ) => construct( target, argumentsList, newTarget, params ),\n        defineProperty:  ( target, propertyKey, attributes ) => defineProperty( target, propertyKey, attributes, params ),\n        deleteProperty: ( target, propertyKey ) => deleteProperty( target, propertyKey, params ),\n        get: ( target, propertyKey, receiver = null ) => {\n            if ( propertyKey === symWQOriginal ) {\n                return originalTarget;\n            }\n            const $params = { ...params, receiver };\n            const returnValue = get( target, propertyKey, $params );\n            // Auto-wrap array methods\n            if ( Array.isArray( target ) && typeof returnValue === 'function' && !/^class\\s?/.test(Function.prototype.toString.call( returnValue ) ) ) {\n                return proxy( returnValue, { ...params, arrayMethodName: propertyKey, membrane: receiver/* the instance obj that will be the thisArgument at apply(). Much like function.bind() */ }, extendCallback );\n            }\n            // Auto-wrap others if so specified\n            if ( params.chainable && _isTypeObject( returnValue ) && propertyKey !== 'prototype' && !( typeof returnValue === 'function' && /^class\\s?|\\{\\s\\[native\\scode\\]\\s\\}$/.test(Function.prototype.toString.call( returnValue ) ) ) ) {\n                return proxy( returnValue, params, extendCallback );\n            }\n            return returnValue;\n        },\n        getOwnPropertyDescriptor: ( target, propertyKey ) => getOwnPropertyDescriptor( target, propertyKey, params ),\n        getPrototypeOf: target => getPrototypeOf( target, params ),\n        has: ( target, propertyKey ) => has( target, propertyKey, params ),\n        isExtensible: target => isExtensible( target, params ),\n        ownKeys: target => ownKeys( target, params ),\n        preventExtensions: target => preventExtensions( target, params ),\n        set: ( target, propertyKey, value, receiver = null ) => set( target, propertyKey, value, { ...params, receiver } ),\n        setPrototypeOf: ( target, prototype ) => setPrototypeOf( target, prototype, params ),\n    };\n    // Extend...\n    const $traps = extendCallback?.( traps ) || traps;\n    // Create proxy\n    const $proxy = new Proxy( originalTarget, $traps );\n    if ( params.membrane ) { _wq( originalTarget, 'membraneRef' ).set( params.membrane, $proxy ); }\n\treturn $proxy;\n}\n\n/**\n * Returns the original object earlier proxied by proxy().\n *\n * @param Proxy|Any\t\ttarget\n *\n * @return Any\n */\nexport function unproxy( target ) {\n    // Proxy targets are mapped to their own instances internally\n    return target && target[ symWQOriginal ] || target;\n}\n\n/* ---------------HELPERS--------------- */\n\n/** \n * Ensures target object is an object or array.\n *\n * @param Array|Object\ttarget\n *\n * @return Array|Object\n */\nfunction resolveTarget( target ) {\n\tif ( !target || !_isTypeObject( target ) ) throw new Error('Target must be of type object!');\n\treturn unproxy( target );\n}\n", "\n/**\n * @imports\n */\nimport * as main from './main.js';\nimport * as actors from './actors.js';\n\nexport const Observer = { ...main, ...actors };\n\nexport { default as ListenerRegistry } from './core/ListenerRegistry.js';\nexport { default as TrapsRegistry } from './core/TrapsRegistry.js';\nexport { default as Descriptor } from './core/Descriptor.js';\n\nexport default Observer;", "import { Observer } from \"@webqit/observer\";\n\nexport default class LiveProgramHandle {\n\n    constructor(runtime) {\n        Object.defineProperty(this, Symbol.toStringTag, { value: 'LiveProgramHandle' });\n        Object.defineProperty(this, 'runtime', { value: runtime });\n        const events = {\n            statechange: () => { Observer.defineProperty(this, 'value', { value: runtime.flowControl.get('return')?.arg, enumerable: true, configurable: true }); },\n        };\n        for (const name in events) {\n            runtime.on(name, events[name]);\n            events[name]();\n        }\n        if (runtime.$params.sourceType === 'module') {\n            Object.defineProperty(this, 'exports', { value: runtime.exports });\n        }\n    }\n\n    abort() { return this.runtime.abort(true); }\n\n}\n", "\nexport const _call = ( _function, ...args ) => {\n    const callback = args.pop();\n    if ( _function.constructor.name === 'AsyncFunction' ) return _await( _function.call( ...args ), callback );\n    try {\n        return callback( _function.call( ...args ) );\n    } catch( e ) { return callback( undefined, e ); }\n};\n\nexport const _await = ( maybePromise, callback ) => {\n    return maybePromise instanceof Promise ? maybePromise.then( callback ).catch( e => callback( undefined, e ) ) : callback( maybePromise )\n};\n\nexport const _isTypeObject = val => {\n\treturn ( typeof val === 'object' && val ) || typeof val === 'function';\n};\n\nexport function _$functionArgs( args ) {\n    const params = typeof args[ args.length - 1 ] === 'object' ? args.pop() : {};\n    const source = args.pop() || '';\n    return { source, args, params };\n}\n\nexport const env = {};\n\n\nexport function matchPrologDirective(str, strictStart = false) {\n    if (strictStart) return /^([\"'])use live\\1\\s*(;|$)/.test(str);\n    return /([\"'])use live\\1\\s*(;|$)/.test(str);\n}\n\nexport function nextKeyword(input, start = 0, mode = null) {\n    let i = start;\n    const l = input.length;\n\n    // Helper: skip whitespace\n    const skipWS = () => {\n        while (i < l && /\\s/.test(input[i])) i++;\n    };\n\n    // Helper: skip line comment\n    const skipLineComment = () => {\n        i += 2;\n        while (i < l && input[i] !== \"\\n\" && input[i] !== \"\\r\") i++;\n    };\n\n    // Helper: skip block comment\n    const skipBlockComment = () => {\n        i += 2;\n        while (i < l && !(input[i] === \"*\" && input[i + 1] === \"/\")) i++;\n        if (i < l) i += 2;\n    };\n\n    // Skip leading whitespace and comments\n    while (i < l) {\n        skipWS();\n\n        if (input[i] === \"/\" && input[i + 1] === \"/\") {\n            skipLineComment();\n            continue;\n        }\n        if (input[i] === \"/\" && input[i + 1] === \"*\") {\n            skipBlockComment();\n            continue;\n        }\n\n        break;\n    }\n\n    // MODE 0: only skip, return new index\n    if (mode === 0) return input.slice(i);\n\n    // Extract identifier/keyword\n    const startIdent = i;\n\n    // Identifier must start with A-Za-z$_\n    if (i < l && /[A-Za-z$_]/.test(input[i])) {\n        i++;\n        while (i < l && /[A-Za-z0-9$_]/.test(input[i])) i++;\n        return input.slice(startIdent, i);\n    }\n\n    // If we reached here and mode = 1: return single next char OR null at EOF\n    if (mode === 1 && i < l) {\n        return input[i]; // return next non-skipped character\n    }\n\n    return null; // EOF\n}", "export function resolveParams( ...extensions ) {\n    let extension, params = { runtimeParams, transformerParams, parserParams };\n    while( extension = extensions.shift() ) {\n        const {\n            runtimeParams: _runtimeParams = {},\n            transformerParams: { globalsNoObserve: _globalsNoObserve = [], globalsOnlyPathsExcept: _globalsOnlyPathsExcept = [], ..._transformerParams } = {},\n            parserParams: _parserParams = {},\n        } = extension;\n        params = {\n            runtimeParams: { ...params.runtimeParams, ..._runtimeParams },\n            transformerParams: { ...params.transformerParams, globalsNoObserve: [ ...params.transformerParams.globalsNoObserve, ..._globalsNoObserve ], globalsOnlyPathsExcept: [ ...params.transformerParams.globalsOnlyPathsExcept, ..._globalsOnlyPathsExcept ], ..._transformerParams },\n            parserParams: { ...params.parserParams, ..._parserParams },\n        };\n        if ( extensions.devMode ) { /* shortcut for devMode configs */ }\n    }\n    return params;\n}\nexport const parserParams = {\n    ecmaVersion: 'latest',\n    allowReturnOutsideFunction: true,\n    allowAwaitOutsideFunction: false,\n    allowSuperOutsideMethod: false,\n    preserveParens: false,\n    locations: true,\n};\nexport const transformerParams = {\n    globalsNoObserve: [ 'arguments', 'debugger', ],\n    globalsOnlyPathsExcept: [],\n    originalSource: true,\n    locations: true,\n    compact: 2,\n};\nexport const runtimeParams = {\n    apiVersion: 3,\n};\n", "\nexport default {\n\n    // Statements & Clauses\n    throwStmt( argument ) { return { type: 'ThrowStatement', argument }; },\n    tryStmt( block, handler, finalizer, guardedHandlers ) { return { type: 'TryStatement', block, handler, finalizer, guardedHandlers }; },\n    catchClause( param, body ) { return { type: 'CatchClause', param, body }; },\n    exprStmt( expression ) { return { type: 'ExpressionStatement', expression, }; },\n    blockStmt( body ) { return { type: 'BlockStatement', body }; },\n    labeledStmt( label, body ) { return { type: 'LabeledStatement', label, body }; },\n    withStmt( object, body ) { return { type: 'WithStatement', object, body }; },\n    ifStmt( test, consequent, alternate ) { return this.conditionalExpr(test, consequent, alternate, 'IfStatement'); },\n    switchStmt( discriminant, cases, lexical = false ) { return { type: 'SwitchStatement', discriminant, cases, /*lexical*/ /* Failing tests and seems to be SpiderMonkey-specific*/ }; },\n    switchCase( test, consequent ) { return { type: 'SwitchCase', test, consequent }; },\n    whileStmt( test, body ) { return { type: 'WhileStatement', test, body }; },\n    doWhileStmt( test, body ) { return { type: 'DoWhileStatement', test, body }; },\n    forStmt( init, test, update, body ) { return { type: 'ForStatement', init, test, update, body }; },\n    forInStmt( left, right, body ) { return { type: 'ForInStatement', left, right, body }; },\n    forOfStmt( left, right, body ) { return { type: 'ForOfStatement', left, right, body }; },\n    breakStmt( label = null ) { return { type: 'BreakStatement', label }; },\n    continueStmt( label = null ) { return { type: 'ContinueStatement', label }; },\n    returnStmt( argument ) { return { type: 'ReturnStatement', argument }; },\n    yieldExpr( argument, delegate = false ) { return { type: 'YieldExpression', argument, delegate }; },\n    awaitExpr( argument ) { return { type: 'AwaitExpression', argument }; },\n\n    // Declarations\n    varDeclaration( kind, declarations ) { return { type: 'VariableDeclaration', kind, declarations } },\n    varDeclarator( id, init = null ) { return { type: 'VariableDeclarator', id, init } },\n    funcDeclaration( id, params, body, async = false, expression = false, generator = false ) {\n        return this.func( 'FunctionDeclaration', ...arguments );\n    },\n\n    // Expressions\n    sequenceExpr( expressions ) { return { type: 'SequenceExpression', expressions }; },\n    parensExpr( expression ) { return { type: 'ParenthesizedExpression', expression }; },\n    logicalExpr( operator, left, right ) { return { type: 'LogicalExpression', operator, left, right, }; },\n    binaryExpr( operator, left, right ) { return { type: 'BinaryExpression', operator, left, right, }; },\n    unaryExpr( operator, argument, prefix = true ) { return { type: 'UnaryExpression', operator, argument, prefix }; },\n    updateExpr( operator, argument, prefix = false ) { return { type: 'UpdateExpression', operator, argument, prefix }; },\n    assignmentExpr( left, right, operator = '=' ) { return { type: 'AssignmentExpression', operator, left, right }; },\n    assignmentPattern( left, right ) { return { type: 'AssignmentPattern', left, right }; },\n    thisExpr() { return { type: 'ThisExpression' }; },\n    conditionalExpr( test, consequent, alternate, type = 'ConditionalExpression' ) { return { type, test, consequent, alternate }; },\n    arrayExpr( elements ) { return { type: 'ArrayExpression', elements }; },\n    arrayPattern( elements ) { return { type: 'ArrayPattern', elements }; },\n    objectExpr( properties ) { return { type: 'ObjectExpression', properties }; },\n    objectPattern( properties ) { return { type: 'ObjectPattern', properties }; },\n    chainExpr( expression ) { return { type: 'ChainExpression', expression }; },\n    callExpr( callee, args, optional = false ) { return { type: 'CallExpression', callee, arguments: args, optional }; },\n    newExpr( callee, args ) { return { type: 'NewExpression', callee, arguments: args }; },\n    taggedTemplateExpr( tag, quasi ) { return { type: 'TaggedTemplateExpression', tag, quasi }; },\n    memberExpr( object, property, computed = false, optional = false ) {\n        return { type: 'MemberExpression', object, property, computed, optional };\n    },\n    funcExpr( id, params, body, async = false, expression = false, generator = false ) {\n        return this.func( 'FunctionExpression', ...arguments );\n    },\n    arrowFuncExpr( id, params, body, async = false, expression = false, generator = false ) {\n        return this.func( 'ArrowFunctionExpression', ...arguments );\n    },\n    // Other\n    func( type, id, params, body, async = false, expression = false, generator = false ) {\n        return { type, id, params, body, async, expression, generator, };\n    },\n    identifier( name ) { return { type: 'Identifier', name }; },\n    property( key, value, kind = 'init', shorthand = false, computed = false, method = false ) { return { type: 'Property', key, value, kind, shorthand, computed, method }; },\n\n    classDeclaration( id, body, superClass = null ) { return this.class( 'ClassDeclaration', ...arguments ); },\n    classExpression( id, body, superClass = null ) { return this.class( 'ClassExpression', ...arguments ); },\n    class( type, id, body, superClass = null ) { return { type, id, body, superClass }; },\n    methodDefinition( key, value, kind = 'method', $static = false, computed = false ) { return { type: 'MethodDefinition', key, value, kind, static: $static, computed }; },\n    propertyDefinition( key, value, $static = false, computed = false ) { return { type: 'PropertyDefinition', key, value, static: $static, computed }; },\n    \n    spreadElement( argument ) { return { type: 'SpreadElement', argument }; },\n    literal( value ) {\n        if ( typeof value === 'object' && !( 'name' in value )  && !( 'value' in value ) ) throw new Error( `Objects that convert to literals must have a \"name\" or \"value\" property.` );\n        return typeof value === 'object' ? { type: 'Literal', get value() { return 'name' in value ? value.name : value.value } } : { type: 'Literal', value };\n    },\n    templateLiteral( quasis, expressions ) { return { type: 'TemplateLiteral', quasis, expressions }; },\n\n    comments( comments ) {\n        const valueObject = {};\n        Object.defineProperty( valueObject, 'toString', { value: () => comments } );\n        Object.defineProperty( valueObject, 'trim', { value: function() {\n            return this.toString();\n        } } );\n        return [ { type: 'Line', value: valueObject, } ];\n    },\n\n    withLoc( target, ...sources ) {\n        [ 'start', 'end' ].forEach( offset => {\n            const sourceNode = offset === 'start' ? sources[ 0 ] : sources[ sources.length - 1 ];\n            target[ offset ] = sourceNode[ offset ];\n            if ( sourceNode.loc ) {\n                target.loc = target.loc || {};\n                target.loc[ offset ] = sourceNode.loc?.[ offset ];\n            }\n        } );\n        return target;\n    },\n\n    // Util\n    invert( expr ) { return this.unaryExpr( '!', expr ); },\n    clone( expr ) {\n        expr = { ...expr };\n        delete expr.start;\n        delete expr.end;\n        return expr;\n    },\n\n}", "\n/**\n * The modules registry\n */\nexport const registry = Object.create( null );", "/**\n * @imports\n */\nimport { env } from \"../util.js\";\n\nexport default class _EventTarget extends EventTarget {\n\n    managedAlways = new Set;\n    managedOnce = new Set;\n\n    constructor() {\n        super();\n        env.setMaxListeners?.( 0, this );\n    }\n\n    fire( evenName ) { return this.dispatchEvent( new Event( evenName, { cancelable: true } ) ); }\n\n    on( ...args ) {\n        this.addEventListener( ...args );\n        return () => this.removeEventListener( ...args );\n    }\n\n    abort( total = false ) {\n        this.managedAlways.forEach( x => x.abort ? x.abort( total ) : x( total ) );\n        this.managedOnce.forEach( x => x.abort ? x.abort( total ) : x( total ) );\n        this.managedOnce.clear();\n        this.fire( 'abort' );\n    }\n\n    manage( x ) { this.managedAlways.add( x ); }\n    once( x ) { this.managedOnce.add( x ); }\n\n}", "\n/**\n * @import\n */\nimport { Observer } from '@webqit/observer';\nimport { _isTypeObject } from '../util.js';\nimport EventTarget from './EventTarget.js';\n\nexport default class Signal extends EventTarget {\n\n    subscribers = new Set;\n    signals = new Map;\n\n    constructor(context, type, state) {\n        super();\n        this.context = context;\n        this.context?.once(() => this.abort());\n        this.once(() => this.watchMode(false));\n        this.type = type;\n        this.state = state;\n    }\n\n    get name() { return [...this.context?.signals.keys() || []].find(k => this.context.signals.get(k) === this); }\n\n    signal(name, type = 'prop') {\n        let signal = this.signals.get(name);\n        if (!signal) {\n            // Initialization\n            signal = new Signal(\n                this,\n                type,\n                type === 'object' ? name : (_isTypeObject(this.state) ? Observer.get(this.state, name) : undefined)\n            );\n            this.signals.set(name, signal);\n            // Self-start\n            if (this.signals.size === 1) { this.watchMode(); }\n            // Cleanup\n            signal.once(() => {\n                // On being killed, auto-delete\n                this.signals.delete(name);\n                // On empty self-kill\n                if (!this.signals.size) { this.watchMode(false); }\n            });\n        }\n        return signal;\n    }\n\n    subscribe(autorun) {\n        this.subscribers.add(autorun);\n        autorun.once(() => {\n            // Cleanup\n            this.subscribers.delete(autorun);\n            // On empty self-kill\n            if (!this.subscribers.size) { this.abort(); }\n        });\n    }\n\n    watchMode(flag = true) {\n        this.mutationsWatch?.abort();\n        if (!flag || !this.signals.size || !_isTypeObject(this.state)) return;\n        this.mutationsWatch = Observer.observe(this.state, mutations => {\n            // Find subscribers and organize them by target runtime\n            const groupings = {\n                map: new Map,\n                add(autoruns, mutation, signal) {\n                    for (const autorun of autoruns) {\n                        if (autorun.runtime.thread.includes(autorun)) {\n                            //##signal.subscribers.delete(autorun);;\n                            //##continue;\n                        }\n                        if (autorun.spec.beforeSchedule?.(mutation) === false) continue;\n                        if (!this.map.has(autorun.runtime)) { this.map.set(autorun.runtime, new Set); }\n                        this.map.get(autorun.runtime).add(autorun);\n                    }\n                }\n            };\n            for (const mutation of mutations) {\n                const signal = this.signals.get(mutation.key);\n                if (!signal) continue;\n                groupings.add(signal.subscribers, mutation, signal);\n                signal.refresh(mutation.value);\n            }\n            // Dispatch to runtimes...\n            const runtimesMap = !groupings.map.size ? groupings.map : [...groupings.map].sort((a, b) => (a[0].$serial > b[0].$serial ? 1 : -1));\n            //const runtimesMap = groupings.map;\n            for (const [runtime, autoruns] of runtimesMap) {\n                if (runtime.state === 'aborted') continue;\n                runtime.schedule(...autoruns);\n            }\n        }, { recursions: 'force-sync' });\n    }\n\n    refresh(newState) {\n        this.state = newState;\n        for (const [name, signal] of this.signals) {\n            signal.refresh(Observer.get(this.state ?? {}, name));\n        }\n        this.watchMode();\n    }\n\n}", "\n/**\n * @import\n */\nimport Signal from './Signal.js';\n\nexport default class Scope extends Signal {\n\n    symbols = new Map;\n    constructor( context, type, state = undefined ) {\n        super( context, type, state || Object.create( null ) );\n    }\n\n}", "\n/**\n * @import\n */\nimport { Observer } from '@webqit/observer';\nimport { _await, _call } from '../util.js';\nimport EventTarget from './EventTarget.js';\nimport Scope from './Scope.js';\n\nexport default class Autorun extends EventTarget {\n\n    state;\n\n    constructor( context, type, spec, serial, scope, closure ) {\n        super();\n        // We are to be managed by context\n        context?.once( this );\n        this.context = context;\n        this.type = type;\n        this.spec = spec || {};\n        this.scope = scope;\n        if ( context?.scope !== scope ) {\n            // It's own scope, so we manage it\n            this.manage( scope );\n        }\n        this.serial = serial;\n        if ( closure ) { this.closure = closure; }\n        if ( context?.type === 'iteration' ) { this.path = context.path.concat( this.spec.index ); }\n        else if ( context?.type === 'round' ) { this.path = context.path.concat( this.serial ); }\n        else { this.path = ( context?.path || [] ).slice( 0, -1 ).concat( this.serial ); }\n        this.flowControl = new Map;\n    }\n\n    get runtime() { return this.context.runtime; }\n\n    contains( node ) { return this === node.context || ( node.context && this.contains( node.context ) ); }\n\n    order( node ) {\n        if ( !node ) return this;\n        const [ a, b ] = node.path.length < this.path.length ? [ node, this ] : [ this, node ];\n        return a.path.reduce( ( prev, key, i ) => {\n            return prev && key <= b.path[ i ];\n        }, true ) && a || b;\n    }\n\n    beforeExecute() {\n        this.state = 'running';\n        // Get record and reset\n        const flowControlBefore = this.flowControl;\n        this.flowControl = new Map;\n        return flowControlBefore;\n    }\n\n    execute( callback = null ) {\n        this.runtime.thread.unshift( this );\n        return _await( this.beforeExecute(), stateBefore => {\n            return _call( this.closure, this, this, ( returnValue, exception ) => {\n                if ( exception ) return this.throw( exception, [ this.serial, this.context?.serial ], exception.code );\n                if ( this.spec.complete ) { returnValue = this.spec.complete( returnValue, this ); }\n                this.afterExecute( stateBefore );\n                this.runtime.thread.shift();\n                return callback ? callback( returnValue, this ) : returnValue;\n            } );\n        } );\n    }\n\n    throw( e, serials, errorCode ) {\n        if ( this.type === 'function' && [ 'HandlerFunction', 'FinalizerFunction' ].includes( this.$params.executionMode ) ) {\n            // Hoist control further above the context that handed it to us\n            return this.$params.lexicalContext.throw( e, serials, errorCode );\n        } else if ( this.spec.handler ) return this.spec.handler( e );\n        else if ( this.type !== 'function' && this.context ) return this.context.throw( e, serials, errorCode );\n        if ( e.cause ) throw e;\n        // Message\n        const message = `${ e.message || e }`;\n        const $message = errorCode !== null ? `[${ errorCode }]: ${ message }` : message;\n        // Cause\n        const cause = serials.map( serial => serial !== -1 && this.extractSource( serial, true ) ).filter( x => x );\n        cause.push( { source: this.runtime.$params.originalSource } );\n        // Type\n        const ErrorClass = globalThis[ e.name ];\n        const error = new ( ErrorClass || Error )( $message, { cause } );\n        // File\n        const fileName = this.runtime.$params.sourceType === 'module' && this.$params.experimentalFeatures !== false && this.$params.exportNamespace || this.$params.fileName;\n        if ( fileName ) { error.fileName = fileName; }\n        if ( errorCode ) { error.code = errorCode; }\n        throw error;\n    }\n\n    afterExecute( flowControlBefore ) {\n        this.state = 'complete';\n        // Compare records... and hoist differences\n        const flowControlAfter = this.flowControl;\n        if ( this.spec.finalizer ) this.spec.finalizer();\n        // Handle downstream\n        this.handleDownstream( flowControlAfter.size, flowControlBefore.size );\n        this.handleRightstream( flowControlAfter.size, flowControlBefore.size );\n        for ( const cmd of [ 'break', 'continue', 'return' ] ) {\n            if ( flowControlAfter.has( cmd ) && !flowControlAfter.get( cmd ).endpoint ) { this.hoistFlowControl( cmd, flowControlAfter.get( cmd ).arg ); }\n            else if ( flowControlBefore.has( cmd ) && !flowControlBefore.get( cmd ).endpoint ) { this.hoistFlowControl( cmd, flowControlBefore.get( cmd ).arg, true ); }\n        }\n    }\n\n    typed( as, value, name = undefined ) {\n        const valueType = Array.isArray( value ) ? 'array' : ( value === null ? 'null' : typeof value );\n        if ( valueType === as || ( as === 'iterable' && value?.[ Symbol.iterator ] ) || ( as === 'desctructurable' && ![ 'undefined', 'null' ].includes( valueType ) ) ) return value;\n        if ( as === 'iterable' ) { throw new Error( `value is not iterable.` ); }\n        if ( as === 'desctructurable' ) { throw new Error( ( name ? `Cannot access ${ name }; ` : '' ) + `object not desctructurable.` ); }\n        throw new Error( `value must be of type ${ as }.` );\n    }\n\n    let( name, serial, closure, spec = {} ) { return this.var( name, serial, closure, { ...spec, kind: 'let' } ); }\n\n    const( name, serial, closure, spec = {} ) { return this.var( name, serial, closure, { ...spec, kind: 'const' } ); }\n\n    var( name, serial, closure, spec = {} ) {\n        spec = { kind: 'var'/* as default */, ...spec };\n        // Uninitialized declarations like: let a;\n        if ( !closure ) closure = () => undefined;\n        const $closure = !spec.restOf ? closure : ( ...args ) => {\n            try { return closure( ...args ); }\n            catch( e ) { throw new Error( `Cannot declare ${ name }; ${ e.message }` ); }\n        };\n        const complete = ( returnValue, autorun ) => {\n            let scope = autorun.scope;\n            if ( spec.kind === 'var' ) {\n                //let scope = this.runtime.scope;\n                // For plain scripts, hoist all the way to the global scope... or somewhere before where its been defined\n                while ( ![ 'module', 'function' ].includes( scope.type ) && !Observer.has( scope.state, name ) && scope.context ) {\n                    scope = scope.context;\n                }\n            } else if ( scope.type === 'this' && scope.context ) {\n                // We're in a script or module program. scope.context is either going to be 'env' or 'module'\n                scope = scope.context;\n            }\n            let symbolState = scope.symbols.get( name );\n            if ( symbolState && ( symbolState.kind !== spec.kind || ( spec.kind === 'let' && symbolState.serial !== serial ) ) ) {\n                throw new Error( `Identifier \"${ name }\" has already been declared.` );\n            }\n            symbolState?.reader?.abort(); // Any previous reader? Type \"var\" cannot rely on autorun lifecycle cleanup\n            symbolState = { serial, kind: spec.kind }; // New state!\n            let assignedValue = returnValue;\n            if ( spec.restOf ) {\n                if ( spec.type === 'array' ) {\n                    assignedValue = [];\n                } else { assignedValue = {}; }\n                symbolState.reader = Observer.map( returnValue, assignedValue, { except: spec.restOf, spread: spec.type === 'array' } );\n                autorun.once( symbolState.reader ); // Lifecycle cleanup\n            }\n            scope.symbols.set( name, symbolState );\n            Observer.set( scope.state, name, assignedValue );\n            return assignedValue;\n        };\n        return this.autorun( spec.kind, { complete, ...spec }, serial, $closure );\n    }\n\n    update( name, closure, spec = {} ) {\n        // Find lexical scope\n        let lexicalScope = this.scope;\n        while( lexicalScope && !Observer.has( lexicalScope.state, name ) ) { lexicalScope = lexicalScope.context; }\n        // Validation\n        if ( !lexicalScope ) { throw new ReferenceError( `${ name } is not defined.` ); }\n        let symbolState = lexicalScope.symbols.get( name );\n        if ( symbolState?.kind === 'const' ) { throw new ReferenceError( `Assignment to constant variable \"${ name }\".` ); }\n        const valueBefore = Observer.get( lexicalScope.state, name );\n        const $closure = !spec.restOf ? closure : ( ...args ) => {\n            try { return closure( ...args ); }\n            catch( e ) { throw new Error( `Cannot update ${ name }; ${ e.message }` ); }\n        };\n        return _call( $closure, undefined, valueBefore, ( returnValue, exception ) => {\n            if ( exception ) return this.throw( exception, [ this.serial ] );\n            // Operation\n            symbolState?.reader?.abort(); // Any previous reader?\n            let assignedValue = returnValue;\n            if ( spec.restOf ) {\n                symbolState = symbolState || {}; // New state!\n                if ( spec.type === 'array' ) {\n                    assignedValue = [];\n                } else { assignedValue = {}; }\n                symbolState.reader = Observer.map( returnValue, assignedValue, { except: spec.restOf, spread: spec.type === 'array' } );\n                this.once( symbolState.reader ); // Lifecycle cleanup\n            }\n             const isStatic = this.spec.static || this.type === 'function' && this.$params?.executionMode === 'RegularFunction';\n            ( /*##isStatic ? Reflect :*/ Observer ).set( lexicalScope.state, name, assignedValue );\n            return [ 'postinc', 'postdec' ].includes( spec.kind ) ? valueBefore : assignedValue;\n        } );\n    }\n\n    ref( name, ...rest ) {\n        let depth = 0, hint = {};\n        if ( typeof rest[ 0 ] === 'number' ) {\n            depth = rest.shift();\n            hint = rest.shift() || {};\n        } else if ( typeof rest[ 0 ] === 'object' ) {\n            hint = rest.shift();\n        }\n        // Find lexical scope\n        let lexicalScope = this.scope;\n        while( lexicalScope && !Observer.has( lexicalScope.state, name ) ) {\n            lexicalScope = lexicalScope.context;\n        }\n        // Not found?\n        if ( !lexicalScope ) {\n            if ( hint.isTypeCheck ) return;\n            throw new Error( `${ name } is not defined.` );\n        }\n        // Bind now?\n        const kind = lexicalScope.symbols.get( name )?.kind;\n        const baseSignal = lexicalScope.signal( name, kind );\n        if ( hint.typed ) { this.typed( hint.typed, baseSignal.state, name ); }\n        return this.autobind( baseSignal, depth, hint );\n    }\n\n    obj( val, ...rest ) {\n        let depth = 0, hint = {};\n        if ( typeof rest[ 0 ] === 'number' ) {\n            depth = rest.shift();\n            hint = rest.shift() || {};\n        } else if ( typeof rest[ 0 ] === 'object' ) {\n            hint = rest.shift();\n        }\n        return this.autobind( this.runtime.$objects.signal( val, 'object' ), depth, hint );\n    }\n\n    autobind( baseSignal, depth, hint ) {\n        const liveMode = [ 'LiveProgram', 'LiveFunction' ].includes( this.runtime.$params.executionMode );\n        const isConst = baseSignal.type  === 'const';\n        const isRuntime = this === this.runtime;\n        const isAborted = this.state === 'aborted';\n        const isStatic = this.spec.static;\n        const isWrite = this.spec.isWrite;\n        const nowRunning = this;\n        return ( function proxy( signal, params = {}, depth ) {\n            // Do bindings first\n            if ( liveMode && !isStatic && !isWrite && !hint?.isLeft && !isConst && !isRuntime && !isAborted ) {\n                signal.subscribe( nowRunning );\n            }\n            // Return bare value here?\n            if ( !depth || !signal.state || typeof signal.state !== 'object' ) {\n                let returnValue = signal.state;\n                if ( typeof signal.state === 'function' && !/^class\\s?/.test( Function.prototype.toString.call( signal.state ) ) ) {\n                    // We're returning a proxy for functions instead of: signal.context.state[ signal.name ].bind( signal.context.state );\n                    returnValue = Observer.proxy( signal.state, { ...params, membrane: signal } );\n                }\n                return returnValue;\n            }\n            //##if ( !liveMode || isStatic ) return signal.state;\n            \n            // Return dynamic value\n            let propertyAlreadyBound;\n            return Observer.proxy( signal.state, params, traps => ( {\n                ...traps,\n                get( target, name, receiver = null ) {\n                    // Constructs are always going to for one property access: ref('a').b, and we need to prevent .c from creating a binding\n                    if ( propertyAlreadyBound ) { return traps.get( target, name, receiver ); }\n                    propertyAlreadyBound = true;\n                    let $params = { ...params };\n                    if ( Array.isArray( target ) ) {\n                        $params.arrayMethodName = name;\n                    }\n                    return proxy( signal.signal( name ), $params, depth - 1 );\n                },\n            } ) );\n        } )( baseSignal, {}, depth );\n    }\n\n    autorun( type, ...rest ) {\n        let closure = rest.pop();\n        const serial = rest.pop();\n        const spec = rest.pop() || {};\n        // Handle certain types with their own class\n        let AutorunClass = Autorun, scope = this.scope;\n        if ( type === 'iteration' ) {\n            const staticDefs = this.runtime.constructor;\n            AutorunClass = closure.constructor.name === 'AsyncFunction' ? staticDefs.AutoAsyncIterator : staticDefs.AutoIterator;\n        }\n        if ( [ 'block', 'switch', 'iteration' ].includes( type ) ) { scope = new Scope( scope, type ); }\n        // Instantiate\n        const autorun = new AutorunClass( this, type, spec, serial, scope, closure );\n        if ( type === 'downstream' ) {\n            // Declare a \"downstream\" for the context\n            this.downstream = autorun;\n            // For now\n            if ( this.flowControlApplied() ) return;\n        } else if ( this.type === 'switch' && this.breakpoint ) {\n            return;\n        }\n        // Push stack and execute\n        return autorun.execute();\n    }\n\n    function( executionMode, functionKind, serial, $qFunction ) {\n        // Declare in current scope\n        if ( functionKind === 'Declaration' ) {\n            const declarationScope = this.scope.type === 'this' ? this.scope.context : this.scope;\n            Observer.set( declarationScope.state, $qFunction.name, $qFunction );\n        }\n        // Metarise function\n        const _this = this;\n        Object.defineProperty( $qFunction, 'toString', { value: function( $qSource = false ) {\n            if ( $qSource && executionMode === 'LiveFunction' ) return Function.prototype.toString.call( $qFunction );\n            const originalSource = _this.runtime.extractSource( serial );\n            return originalSource.startsWith( 'static ' ) ? originalSource.replace( 'static ', '' ) : originalSource;\n        } } );\n        return $qFunction;\n    }\n\n    class( classKind, $class, methodsSpec ) {\n        // Declare in current scope\n        if ( classKind === 'Declaration' ) {\n            const declarationScope = this.scope.type === 'this' ? this.scope.context : this.scope;\n            Observer.set( this.scope.state, $class.name, $class );\n        }\n        // Metarise methods\n        methodsSpec.forEach( ( { name, isLiveFunction, static: isStatic, serial } ) => {\n            this.function( isLiveFunction && 'LiveFunction' || 'RegularFunction', 'Expression', serial, isStatic ? $class[ name ] : $class.prototype[ name ] )\n        } );\n        return $class;\n    }\n\n    async import( ...args ) { return this.runtime.import( ...args ); }\n\n    async export( ...args ) { return this.runtime.export( ...args ); }\n\n    continue( label ) { return this.applyFlowControl( 'continue', label ); }\n\n    break( label ) { return this.applyFlowControl( 'break', label ); }\n\n    return( arg ) { return this.applyFlowControl( 'return', arg ); }\n\n    applyFlowControl( cmd, arg, unset = false ) {\n        const sizeBefore = this.flowControl.size;\n        if ( unset ) { this.flowControl.delete( cmd ); }\n        else { this.flowControl.set( cmd, { arg } ); }\n        if ( this.type === 'round' ) { this.context.breakpoint = this; }\n        if ( this.type === 'round' && [ 'break', 'continue' ].includes( cmd ) && arg === this.context?.spec.label ) {\n            if ( !unset ) { this.flowControl.get( cmd ).endpoint = true; }\n            if ( this.state !== 'running' ) { this.handleRightstream( this.flowControl.size, sizeBefore ); }\n            return;\n        }\n        if ( this.context?.type === 'switch' && cmd === 'break' && !arg ) {\n            if ( !unset ) { this.flowControl.get( cmd ).endpoint = true; }\n            this.context.breakpoint = this;\n            return;\n        }\n        // Notice that no hoisting and no \"downstream\" handling if in active scope\n        // as that would be done at after() hook!\n        if ( this.state !== 'running' ) {\n            this.handleDownstream( this.flowControl.size, sizeBefore );\n            this.hoistFlowControl( ...arguments );\n        }\n    }\n\n    hoistFlowControl( ...args ) { return this.context?.applyFlowControl( ...args ); }\n\n    flowControlApplied( cmd, arg ) {\n        if ( !arguments.length ) return this.flowControl.size || false;\n        if ( arguments.length === 1 ) return this.flowControl.has( cmd );\n        return this.flowControl.get( cmd )?.arg === arg;\n    }\n\n    handleDownstream( sizeAfter, sizeBefore ) {\n        let downstream;\n        if ( ![ 'block' ].includes( this.type ) // If this is \"downstream\", the \"downstream\" you see from parent scope will be self\n        || !( downstream = this.context?.downstream ) ) return;\n        if ( sizeAfter ) { downstream.abort(); }\n        else if ( sizeBefore ) {\n            downstream.state = 'resuming'; // Just something other than \"aborted\"\n            this.runtime.schedule( downstream );\n        }\n    }\n\n    handleRightstream( sizeAfter, sizeBefore ) {\n        if ( this.type !== 'round' ) return;\n        let nextRound = this, returnees = new Set;\n        while( nextRound = nextRound.nextRound ) {\n            if ( sizeAfter ) { nextRound.abort(); }\n            else if ( sizeBefore && nextRound.state !== 'inert' ) {\n                nextRound.state = 'resuming'; // Just something other than \"aborted\"\n                returnees.add( nextRound );\n            }\n        }\n        if ( returnees.size ) { this.runtime.schedule( ...returnees ); }\n        if ( !sizeAfter && sizeBefore ) {\n            this.runtime.on( 'reflection', () => {\n                if ( this.context.iterating ) return;\n                this.context.iterate();\n            }, { once: true } );\n        }\n    }\n\n    abort( total = false ) {\n        if ( total ) {\n            if ( this.context?.breakpoint === this ) { delete this.context.breakpoint; }\n            this.flowControl.clear();\n        }\n        this.state = total ? 'inert' : 'aborted';\n        return super.abort( total );\n    }\n    \n}", "\n/**\n * @import\n */\nimport { _await } from '../util.js';\nimport { Observer } from '@webqit/observer';\nimport Autorun from './Autorun.js';\nimport Scope from './Scope.js';\n\nexport default class AutoIterator extends Autorun {\n\n    rounds = new Map;\n\n    constructor( context, type, spec, serial, scope, closure ) {\n        spec.$closure = closure;\n        super( context, type, spec, serial, scope );\n        this.manage( () => {\n            delete this.breakpoint;\n            this.rounds.clear();\n        } );\n    }\n\n    pseudorun( callback ) {\n        this.runtime.iThread.unshift( this );\n        return _await( callback(), returnValue => {\n            this.runtime.iThread.pop();\n            return returnValue;\n        } );\n    }\n\n    createIterator() {\n        if ( this.spec.kind === 'for-in' ) return ( function* () { for ( let key in this.iteratee ) yield key; } ).call( this );\n        if ( this.spec.kind === 'for-of' ) return ( function* () { for ( let val of this.iteratee ) yield val; } ).call( this );\n        return { next: () => ({ done: !this.pseudorun( () => this.spec.test( this ) ), }), };\n    }\n\n    closure() {\n        if ( [ 'for-of', 'for-in' ].includes( this.spec.kind ) ) {\n            [ this.production, this.iteratee ] = this.spec.parameters( this );\n            this.iterator = this.createIterator();\n            this.iterator.original = true;\n            this.watchMode();\n        } else {\n            if ( this.spec.kind === 'for' ) { this.spec.init( this ); }\n            this.iterator = this.createIterator();\n        }\n        this.iterate();\n    }\n\n    terminated() { return this.breakpoint && !this.breakpoint.flowControlApplied( 'continue', this.spec.label ) && this.breakpoint.flowControlApplied(); }\n    advance() { if ( this.spec.kind === 'for' ) { this.pseudorun( () => this.spec.advance( this ) ); } }\n\n    iterate() {\n        this.iterating = true;\n        const $test = () => !this.terminated()/* must come before */ && !( this.cursor = this.iterator.next() ).done;\n        const $round = () => {\n            const round = this.createRound( this.cursor.value );\n            round.execute();\n            this.advance();\n        };\n        if ( this.spec.kind === 'do-while' ) { do $round(); while ( $test() ); }\n        else { while ( $test() ) $round(); }\n        this.iterating = false;\n    }\n\n    createRound( production ) {\n        const index = this.rounds.size, spec = { index };\n        // The scope instance starts life with the variables that the iteration round should see.\n        const state = [ 'for-in', 'for-of' ].includes( this.spec.kind ) ? { [ this.production ]: production } : { ...this.scope.state };\n        const scope = new Scope( this.scope, 'round', state );\n        this.scope.symbols.forEach( ( meta, name ) => { scope.symbols.set( name, meta ); } );\n        const round = new Autorun( this, 'round', spec, this.serial, scope, this.spec.$closure );\n        const key = this.spec.kind === 'for-in' ? production : index;\n        this.rounds.set( key, round );\n        if ( this.lastRound ) {\n            this.lastRound.nextRound = round;\n            round.prevRound = this.lastRound;\n        }\n        this.lastRound = round;\n        return round;\n    }\n\n    watchMode() {\n        if ( this.spec.static ) return;\n        const handleMutations = ( mutations, currentCursor ) => {\n            const deletions = new Set, extension = new Set;\n            for ( const mutation of mutations ) {\n                if ( Array.isArray( this.iteratee ) && mutation.key === 'length' ) continue;\n                const production = this.spec.kind === 'for-in' ? mutation.key : mutation.value;\n                const key = this.spec.kind === 'for-in' ? mutation.key : parseInt( mutation.key );\n                const existingRound = this.rounds.get( key ); // Note that we're not using has()\n                if ( existingRound ) {\n                    // This is an existing round\n                    Observer.set( existingRound.scope.state, this.production, production );\n                    if ( mutation.type === 'delete' ) {\n                        this.rounds.set( key, undefined ); // No actual deletions here as this.rounds.size is our index\n                        if ( existingRound.prevRound ) { existingRound.prevRound.nextRound = existingRound.nextRound; }\n                        if ( existingRound.nextRound ) { existingRound.nextRound.prevRound = existingRound.prevRound; }\n                        // Fired above for the last time and now should die\n                        deletions.add( existingRound );\n                    }\n                } else if ( mutation.type !== 'delete' && !mutation.isUpdate ) {\n                    // This is a brand new entry\n                    // Deletions and updates that didn't have an existing round above are obviously awaiting visit from a paused loop\n                    if ( this.spec.kind === 'for-of' && this.iterator.original && !currentCursor.done ) continue; // A live iteration is going on\n                    extension.add( production );\n                }\n            }\n            this.runtime.on( 'reflection', () => {\n                deletions.forEach( deletion => deletion.abort( true ) );\n            }, { once: true } );\n            if ( extension.size ) {\n                this.iterator = ( function* ( parent ) {\n                    yield* parent;\n                    yield* extension;\n                } )( this.iterator );\n                if ( currentCursor.done ) { this.iterate(); }\n            }\n        };\n        this.once( Observer.observe( this.iteratee, mutations => {\n            _await( this.cursor, currentCursor => handleMutations( mutations, currentCursor ) );\n        } ) );\n    }\n    \n}", "\n/**\n * @import\n */\nimport AutoIterator from './AutoIterator.js';\n\nexport default class AutoAsyncIterator extends AutoIterator {\n\n    async createIterator() {\n        if ( this.spec.kind === 'for-in' ) return ( function* () { for ( let key in this.iteratee ) yield key; } ).call( this );\n        if ( this.spec.kind === 'for-of' ) return ( function* () { for ( let val of this.iteratee ) yield val; } ).call( this );\n        return { next: async () => ({ done: !( await this.pseudorun( () => this.spec.test( this ) ) ), }), };\n    }\n\n    async closure() {\n        if ( [ 'for-of', 'for-in' ].includes( this.spec.kind ) ) {\n            [ this.production, this.iteratee ] = await this.spec.parameters( this );\n            this.iterator = await this.createIterator();\n            this.iterator.original = true;\n            this.watchMode();\n        } else {\n            if ( this.spec.kind === 'for' ) { await this.spec.init( this ); }\n            this.iterator = await this.createIterator();\n        }\n        await this.iterate();\n    }\n\n    async iterate() {\n        let cursor; this.iterating = true;\n        const $test = async () => ( !this.terminated()/* must come before */ && ( this.cursor = this.iterator.next() ) && ( cursor = await this.cursor ) && !cursor.done );\n        const $round = async () => {\n            const round = this.createRound( cursor.value );\n            await round.execute();\n            await this.advance();\n        };\n        if ( this.spec.kind === 'do-while' ) { do await $round(); while ( await $test() ); }\n        else { while ( await $test() ) await $round(); }\n        this.iterating = false;\n    }\n\n}", "import { Observer } from '@webqit/observer';\nimport { _await } from '../util.js';\nimport { registry } from './hot-module-registry.js';\nimport AutoAsyncIterator from './AutoAsyncIterator.js';\nimport AutoIterator from './AutoIterator.js';\nimport Autorun from './Autorun.js';\nimport Scope from './Scope.js';\nimport LiveProgramHandle from './LiveProgramHandle.js';\n\nexport default class Runtime extends Autorun {\n\n    static AutoAsyncIterator = AutoAsyncIterator;\n    static AutoIterator = AutoIterator;\n\n    locations = [];\n    queue = new Set;\n    thread = [];\n    iThread = [];\n\n    constructor( context, type, params, scope, closure ) {\n        const { $serial = 0, spec, ...$params } = params;\n        super( context, type, spec, -1, scope, closure );\n        this.$serial = $serial;\n        this.$params = $params;\n        // Random object\n        this.$objects = new Scope( undefined, 'objects' );\n        this.manage( this.$objects );\n        // Imports/exports\n        this.exports = Object.create( null );\n        this.$promises = { imports: [], exports: [] };\n        this.manage( () => {\n            Observer.deleteProperties( this.exports, Object.keys( this.exports ) );\n            this.$promises.imports.splice( 0 );\n            this.$promises.exports.splice( 0 );\n        } );\n    }\n\n    extractSource( serial, full = false ) {\n        const [ [ locStart, line, column ], [ locEnd ] ] = this.locations[ serial ];\n        const expr = this.$params.originalSource.slice( locStart, locEnd );\n        return full ? { expr, line, column } : expr;\n    }\n\n    get runtime() { return this; }\n\n    get nowRunning() { return this.thread[ 0 ]; }\n\n    schedule( ...autoruns ) {\n        // Determine if active beforehand\n        const isActive = this.queue.size;\n        for ( const autorun of autoruns ) { this.queue.add( autorun ); }\n        if ( isActive ) return;\n        // Event Loop\n        this.flowControlDirty = false;\n        return ( function nextTick( prevReturn, current ) {\n            // Find following...\n            let following;\n            for ( const autorun of this.queue ) {\n                // If autorun is higher in source ignore\n                // Or a parent autorun has already been run in this event loop which started by aborting all descendants\n                // Or the unique situation with \"for\" loops where \"test\" and \"update\" expressions tend to self-schedule the AutoIteration instance.\n                if ( current && current.order( autorun ) !== current || [ 'aborted', 'running' ].includes( autorun.state ) || this.iThread[ 0 ]?.contains( autorun ) ) {\n                    this.queue.delete( autorun ); continue;\n                }\n                // Get $autorun to be very next to _this.currentMicro\n                following = following ? following.order( autorun ) : autorun;\n                if ( !current ) { current = following; }\n            }\n            // Fire events\n            if ( !following ) {\n                this.fire( 'reflection' );\n                if ( this.flowControlApplied() ) { this.fire( 'statechange' ); }\n                return prevReturn;\n            }\n            // Execute following...\n            following.abort();\n            // Evaluate and possibly await...\n            return following.execute( returnValue => {\n                // Remove from queue\n                this.queue.delete( following );\n                // Next tick\n                return nextTick.call( this, returnValue, following );\n            } );\n        } ).call( this, undefined, this.nowRunning );\n    }\n\n    execute( callback = null ) {\n        return super.execute( returnValue => {\n            const liveMode = [ 'LiveProgram', 'LiveFunction' ].includes( this.$params.executionMode );\n            const isScript = this.$params.sourceType === 'module' || this.$params.sourceType === 'script';\n            const actualReturnValue = liveMode || this.$params.executionMode === 'RegularProgram' && isScript\n                ? new LiveProgramHandle( this )\n                : this.flowControl.get( 'return' )?.arg;//returnValue;\n            return callback ? callback( actualReturnValue, this ) : actualReturnValue;\n        } );\n    }\n\n    spawn( executionMode, thisContext, closure, lexicalContext = null ) {\n        const context = this.nowRunning || lexicalContext || this;\n        const params = { ...this.$params, $serial: this.$serial + 1, executionMode, lexicalContext };\n        const scope = new Scope( context.scope, 'function', thisContext ? { [ 'this' ]: thisContext } : {}/* ArrowFunctions do not have their own this */ );\n        const subRuntime = new this.constructor( context, 'function', params, scope, closure );\n        return subRuntime.execute();\n    }\n\n    async import( ...args ) {\n        const source = args.pop();\n        const $source = typeof source === 'string' ? { source } : source;\n        const onload = modules => {\n            if ( $source.forExport || $source.isDynamic ) return modules;\n            this.assignModules( args, this.scope.state, modules, source.serial );\n        };\n        if ( this.$params.experimentalFeatures !== false && registry[ $source.source ] ) {\n            return onload( registry[ $source.source ] );\n        }\n        const promise = ( async () => {\n            const moduleName = this.$params.sourceType === 'module' && this.$params.experimentalFeatures !== false && this.$params.exportNamespace || this.$params.fileName;\n            try { return onload( { ...await import( $source.source ) } ); } catch( e ) {\n                if ( e.code === 'ERR_MODULE_NOT_FOUND' ) { this.throw( new Error( `Cannot find module \"${ $source.source }\"${ moduleName ? ` imported at \"${ moduleName }\"` : '' }.` ), [ $source.serial ], e.code ); }\n                else this.throw( e, [ $source.serial ], e.code );\n            }\n        } )();\n        if ( !$source.isDynamic ) {\n            this.$promises[ $source.forExport ? 'exports' : 'imports' ].push( promise );\n        }\n        return promise;\n    }\n\n    async export( ...args ) {\n        const source = !Array.isArray( args[ args.length - 1 ] ) ? args.pop() : null;\n        // Export from source or from top-level scope!\n        const modules = source ? await this.import( { ...source, forExport: true } ) \n            : (this.scope.type === 'this' ? this.scope.context.state : this.scope.state);\n        // Assign imported modules to exports object\n        this.assignModules( args, this.exports, modules, source?.serial );\n    }\n\n    assignModules( specifiers, target, source, sourceSerial = null ) {\n        const observeList = [];\n        const liveMode = [ 'LiveProgram', 'LiveFunction' ].includes( this.$params.executionMode );\n        for ( const [ local, serial, alias, literal ] of specifiers ) {\n            if (local === null) {\n                ( liveMode ? Observer : Reflect ).set( target, alias, literal );\n                continue;\n            }\n            if ( local === '*' && alias ) {\n                ( liveMode ? Observer : Reflect ).set( target, alias, source );\n                continue;\n            }\n            if ( !Observer.has( source, local ) ) { this.throw( new Error( `The requested module does not provide an export named \"${ local }\".` ), [ serial, sourceSerial ] ); }\n            ( liveMode ? Observer : Reflect ).set( target, alias || local, Observer.get( source, local ) );\n            observeList.push( [ local, serial, alias ] );\n        }\n        if ( !observeList.length || !liveMode ) return;\n        this.once( Observer.observe( source, mutations => {\n            for ( const [ local, /* serial */, alias ] of observeList ) {\n                for ( const mutation of mutations ) {\n                    if ( local === '*' ) { Observer.set( target, mutation.key, mutation.value ); }\n                    else if ( mutation.key === local ) { Observer.set( target, alias || local, mutation.value ); }                    \n                }\n            }\n        } ) );\n    }\n    \n    afterExecute( ...args ) {\n        if ( this.$params.sourceType === 'module' && this.$params.experimentalFeatures !== false && this.$params.exportNamespace ) {\n            registry[ this.$params.exportNamespace ] = this.exports;\n            this.once( () => { delete registry[ this.$params.exportNamespace ]; } );\n        }\n        return super.afterExecute( ...args );\n    }\n\n}", "\nimport { _await } from '../util.js';\nimport { resolveParams } from '../params.js';\nimport Node from '../transformer/Node.js';\nimport Runtime from './Runtime.js';\nimport Scope from './Scope.js';\n\nexport { Scope, Runtime }; // IMPORTANT: export Scope and Runtime for use in the bootstrap source\n\n/**\n * Evaluates a given source code of a certain type.\n * The sourceType can be:\n * - function | function-source | function-file | function-source-file: a source code of a function to be returned (sync)\n * - async-function | async-function-source | async-function-file | async-function-source-file: a source code of an async function to be returned (async)\n * - script | script-file: a source code of a script to be executed (sync)\n * - async-script | async-script-file: a source code of an async script to be executed (async)\n * - module | module-file: a source code of a module to be executed (async)\n * @param {string} sourceType - the type of the source code\n * @param {object} astTools - the callback function to parse and compile the source code\n * @param {string} source - the source code to be evaluated\n * @param {Array} functionParams - the parameters of the function (for function and async-function types)\n * @param {Object} params - additional parameters to be passed to the compile and runtime\n * @returns {Promise} a promise that resolves to the result of the evaluation\n */\nexport function compile(sourceType, astTools, source, functionParams = [], params = {}) {\n    if (typeof functionParams === 'object' && functionParams && !Array.isArray(functionParams)) {\n        params = functionParams;\n        functionParams = [];\n    }\n\n    const { liveMode = true, thisContext, env, exportNamespace, fileName, base64, compileFunction, forDynamicBinding = false, ...$params } = params;\n    const { parserParams, transformerParams, runtimeParams } = resolveParams($params);\n\n    const isModule = /module/.test(sourceType);\n    const isScript = /script/.test(sourceType);\n    const isFunction = /function/.test(sourceType);\n    const isAsync = /async/.test(sourceType) || /module/.test(sourceType);\n    const isSource = /source/.test(sourceType);\n    const isFile = /file/.test(sourceType);\n\n    const sourceIsProgram = typeof source === 'object' && source?.type === 'Program';\n    if (!sourceIsProgram) {\n        source = source + '';\n    }\n    const originalProgram = source;\n\n    if (isModule) {\n        parserParams.sourceType = 'module';\n        parserParams.allowAwaitOutsideFunction = true;\n        parserParams.executionMode = liveMode ? 'LiveProgram' : 'RegularProgram';\n    } else if (isScript) {\n        parserParams.executionMode = liveMode ? 'LiveProgram' : 'RegularProgram';\n    } else if (isFunction) {\n        if (isSource) {\n            if (sourceIsProgram) {\n                source = Node.funcExpr(\n                    null,\n                    functionParams.map((param) => Node.identifier(param)),\n                    Node.blockStmt(liveMode ? [Node.literal('use live'), ...source.body] : source.body),\n                    isAsync\n                );\n                // IMPORTANT\n                source.isLiveFunction = originalProgram.isLiveProgram;\n            } else {\n                // Derive the actual live function\n                const body = `  ` + source.split(`\\n`).join(`\\n  `);\n                source = `${isAsync ? 'async function' : 'function'\n                    }(${functionParams.join(', ')}) {\\n${liveMode ? '  \"use live\";\\n' : ''}${body}\\n}`;\n            }\n        } else if (sourceIsProgram) {\n            source = source.body[0];\n        }\n        // The top-level program becomes a simple return statement\n        if (sourceIsProgram) {\n            source = {\n                type: 'Program',\n                body: [Node.returnStmt(source)],\n                start: originalProgram.start,\n                end: originalProgram.end,\n                hasLiveFunctions: originalProgram.hasLiveFunctions,\n                originalSource: originalProgram.originalSource\n            };\n        } else {\n            source = `return ${source}`;\n        }\n        // This return shouldn't be treated as live\n        parserParams.executionMode = 'RegularProgram';\n    } else {\n        throw new Error(`Unrecognized sourceType specified: \"${sourceType}\".`);\n    }\n\n    const $sourceType = isModule ? 'module' : (isScript ? 'script' : 'function');\n    const $base64 = isModule && isFile && base64 && `export default async function(%0) {%1}`;\n\n    transformerParams.sourceType = $sourceType;\n    transformerParams.base64 = $base64;\n    runtimeParams.sourceType = $sourceType;\n    runtimeParams.fileName = fileName;\n    if (isModule) {\n        runtimeParams.exportNamespace = exportNamespace;\n    }\n\n    const transformResult = astTools.transform(source, { ...parserParams, ...transformerParams, astResult: sourceIsProgram });\n\n    function finalBootstrapSource(bootstrapSource, forceStringify = false) {\n        const result = bootstrapSource.join('\\n');\n        if (sourceIsProgram) {\n            return _await(astTools.parse(result, parserParams), (result) => {\n                // Find the main function...\n                const insertionPoint = result.body.find((m) => {\n                    return m.type === `ExpressionStatement`\n                        && m.expression?.type === 'AssignmentExpression'\n                        && m.expression.left.type === 'MemberExpression'\n                        && m.expression.left.object.type === 'Identifier'\n                        && m.expression.left.property.type === 'Identifier'\n                        && m.expression.left.property.name === 'main'\n                        && m.expression.right.type === 'FunctionExpression';\n                }).expression.right.body; // BlockStatement\n                insertionPoint.body.push(...transformResult.transformedSource.body);\n                // Force serilaize?\n                return forceStringify\n                    ? _await(result, (result) => astTools.serialize(result))\n                    : result;\n            });\n        }\n        return result;\n    }\n\n    return _await(transformResult, (transformResult) => {\n        if (!transformResult) return;\n\n        const bootstrapSource = [];\n        const $q2 = transformResult.identifier2;\n\n        // 1. ---- Bootstrap $$cx\n        let $$cx;\n        if (isFile && importDir) {\n            bootstrapSource.push(`const { Scope, Runtime } = await import('${importDir}/index.js');`);\n            bootstrapSource.push(`const ${$q2} = { Scope, Runtime, params: { ...(${JSON.stringify(runtimeParams)}), executionMode: '${transformResult.isLiveProgram && 'LiveProgram' || 'RegularProgram'}', originalSource: \\`${transformResult.originalSource.replace(/`/g, '\\\\`')}\\`, }, };`);\n        } else {\n            const $$$cx = {\n                Scope,\n                Runtime,\n                params: { ...runtimeParams, originalSource: transformResult.originalSource, executionMode: transformResult.isLiveProgram && 'LiveProgram' || 'RegularProgram' },\n                thisContext: thisContext,\n                env: env\n            };\n            if (isFile) {\n                if (!globalThis.webqit) globalThis.webqit = {};\n                if (!globalThis.webqit.UseLive) globalThis.webqit.UseLive = {};\n                if (!globalThis.webqit.UseLive.Script) globalThis.webqit.UseLive.Script = $$$cx;\n                bootstrapSource.push(`const ${$q2} = globalThis.webqit.UseLive.Script;`);\n            } else {\n                $$cx = $$$cx;\n            }\n        }\n\n        // 2. ---- main function\n        bootstrapSource.push(`${$q2}.main = ${isModule ? 'async ' : ''\n            }function(${transformResult.identifier}) {${sourceIsProgram ? '' : `\\n  ${transformResult.transformedSource.replace(/\\n/g, '\\n  ')}\\n`\n            }};`);\n        // 3.a ---- global scope\n        let contextType = 'global';\n        bootstrapSource.push(`${$q2}.scope = new ${$q2}.Scope(undefined, '${contextType}', globalThis);`);\n        // 3.b ---- env scope\n        if (isScript || $$cx?.env/** even module */ || ($$cx && forDynamicBinding)) {\n            contextType = 'env';\n            bootstrapSource.push(`${$q2}.scope = new ${$q2}.Scope(${$q2}.scope, '${contextType}', ${$q2}.env);`);\n        }\n        // 3.c ---- module scope\n        if (isModule) {\n            contextType = 'module';\n            bootstrapSource.push(`${$q2}.scope = new ${$q2}.Scope(${$q2}.scope, '${contextType}');`);\n        }\n        // 3.d ---- this scope\n        if (typeof $$cx?.thisContext !== 'undefined' || ($$cx && forDynamicBinding)) {\n            bootstrapSource.push(`${$q2}.scope = new ${$q2}.Scope(${$q2}.scope, 'this', { ['this']: ${$q2}.thisContext });`);\n        }\n\n        // 4. ---- Runtime\n        bootstrapSource.push(`${$q2}.runtime = new ${$q2}.Runtime(undefined, '${contextType}', ${$q2}.params, ${$q2}.scope, ${$q2}.main);`);\n\n        // 5. ---- The bootstrap source\n        if (isModule && isFile) {\n            bootstrapSource.push(`${$q2}.result = await ${$q2}.runtime.execute();`);\n            const [_default, exports] = transformResult.exportIds.reduce(([, acc], id) => {\n                if (id === 'default') return [id, acc];\n                return [, acc.concat(id)];\n            }, [null, []]);\n            if (exports.length) bootstrapSource.push(`export const { ${exports.join(', ')} } = ${$q2}.result.exports;`);\n            if (_default) bootstrapSource.push(`export default ${$q2}.result.exports.default;`);\n            return finalBootstrapSource(bootstrapSource);\n        }\n        if (isFile) {\n            bootstrapSource.push(`${$q2}.result = ${$q2}.runtime.execute();`);\n            if (isFunction) {\n                bootstrapSource.push(`return ${$q2}.result;`);\n            }\n            return finalBootstrapSource(bootstrapSource);\n        }\n\n        bootstrapSource.push(isFunction ? `return ${$q2}.runtime.execute();` : `return ${$q2}.runtime;`);\n        const result = finalBootstrapSource(bootstrapSource, true);\n        // 6. ---- Compile\n        const fn = compileFunction || Function;\n        return _await(result, (result) => forDynamicBinding ? [fn($q2, result), $$cx] : fn($q2, result)($$cx));\n    });\n}\n\nlet importDir;\ntry { importDir = eval('import.meta.url'); } catch(e) {}\n\n// --- helpers ---\n\nfunction fileURLToDirname(url) {\n    const path = fileURLToPath(url);\n    return dirname(path);\n}\n\nfunction fileURLToPath(url) {\n    if (typeof url !== 'string') throw new TypeError('URL must be a string');\n    if (!url.startsWith('file://')) return url; // already a path\n\n    let path = url.slice('file://'.length);\n\n    // Handle Windows drive letters: /C:/ \u2192 C:/\n    path = path.replace(/^\\/([A-Za-z]:)/, '$1');\n\n    // Decode URL-encoded chars\n    path = decodeURIComponent(path);\n\n    return path;\n}\n\nfunction dirname(path) {\n    if (typeof path !== 'string') throw new TypeError('path must be a string');\n\n    // Normalize separators for cross-platform handling\n    const slash = path.includes('\\\\') ? '\\\\' : '/';\n\n    const idx = path.lastIndexOf(slash);\n    if (idx === -1) return path; // no slash found (not really a path)\n    if (idx === 0) return slash; // root case\n\n    return path.slice(0, idx);\n}\n", "\nimport { _await } from './util.js';\nimport { compile as $compile } from './runtime/index.js';\n\nexport default class AbstractLiveScript {\n    constructor(...args) {\n        const $static = this.constructor;\n        const params = typeof args[args.length - 1] === 'object' ? args.pop() : {};\n        this.source = args.pop() || '';\n        this.$program = $compile($static.sourceType, $static.astTools, this.source, { ...params, forDynamicBinding: true });\n    }\n\n    execute() {\n        return _await(this.$program, ([precompiled, $$cx]) => _await(precompiled($$cx), (runtime) => runtime.execute()));\n    }\n\n    bind(thisContext, env = undefined) {\n        return _await(this.$program, ([precompiled, $$cx]) => precompiled({ ...$$cx, thisContext, env }));\n    }\n\n    toString($qSource = false) {\n        if (!$qSource) return this.source;\n        return _await(this.$program, ([precompiled]) => precompiled + '');\n    }\n}", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isUndefined from '../js/isUndefined.js';\nimport _isNull from '../js/isNull.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Retrieves the value at the given path.\n *\n * A return value of undefined is ambiguous, and can mean either that the\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\n * know whether the path actually exists, pass an object as a third argument.\n * This object will have an \"exists\" key set to true/false.\n *\n * @param object \t\t\t\tctxt\n * @param array \t\t\t\tpath\n * @param object \t\t\t\ttrap\n * @param object \t\t\t\treciever\n *\n * @return mixed\n */\nexport default function(ctxt, path, trap = {}, reciever = {}) {\n\tpath = _arrFrom(path).slice();\n\tvar _ctxt = ctxt;\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\n\t\tvar _key = path.shift();\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\n\t\t\treciever.exists = false;\n\t\t\treturn;\n\t\t}\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\n\t}\n\treciever.exists = true;\n\treturn _ctxt;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isArray from '../js/isArray.js';\nimport _arrFrom from '../arr/from.js';\nimport _get from './get.js';\n\n/**\n * Sets a value to the given path.\n *\n * @param object \t\t\t\tobj\n * @param array \t\t\t\tpath\n * @param mixed \t\t\t\tval\n * @param object|function \t\tbuildTree\n * @param object \t\t\t\ttrap\n *\n * @return bool\n */\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\n\tconst _set = (target, key, val) => {\n\t\tif (trap.set) {\n\t\t\treturn trap.set(target, key, val);\n\t\t} else {\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\n\t\t\t\ttarget.push(val);\n\t\t\t} else {\n\t\t\t\ttarget[key] = val;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n\tpath = _arrFrom(path);\n\tvar target = obj;\n\tfor(var i = 0; i < path.length; i ++) {\n\t\tif (i < path.length - 1) {\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar branch = _get(target, path[i], trap);\n\t\t\tif (!_isTypeObject(branch)) {\n\t\t\t\tif (trap.buildTree === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\n\t\t\t\tif (!branchSuccess) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = branch;\n\t\t} else {\n\t\t\treturn _set(target, path[i], val);\n\t\t}\n\t}\n};\n", "\n/**\n * ---------------------------\n * Binds callbacks to requestAnimationFrame()\n * to create a central \"read/write\" phases for Ctxt access.\n * ---------------------------\n */\n\t\t\t\nexport default class Scheduler {\n\n\t/**\n\t * Starts the loop.\n\t *\n\t * @return this\n\t */\n\tconstructor( window, synthesis = false ) {\n\t\tObject.defineProperty( this, 'window', { value: window } );\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, '_synthesis', { value: 0, writable: true } );\n\t\tif ( !synthesis && this.window.requestAnimationFrame ) {\n\t\t\tthis._loop();\n\t\t} else { this._synthesis ++; }\n\t}\n\n\tget synthesis() { return this._synthesis; }\n\n\tasync synthesizeWhile( callback ) {\n\t\tthis._synthesis ++;\n\t\tthis._fulfill();\n\t\tconst returnValue = await callback();\n\t\tthis._synthesis --;\n\t\treturn returnValue;\n\t}\n\n\t_fulfill() {\n\t\tfor ( const callback of this.readCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.readCallbacks.delete( callback );\n\t\t}\n\t\tfor ( const callback of this.writeCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.writeCallbacks.delete( callback );\n\t\t}\n\t}\n\n\t_loop() {\n\t\tthis.window.requestAnimationFrame( () => {\n\t\t\tthis._fulfill();\n\t\t\tthis._loop();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"read\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonread( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.readCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.readCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"write\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonwrite( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.writeCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * A special construct for Ctxt manipulations that span\n\t * one or more read/write cycles.\n\t *\n\t * @param function \tread\n\t * @param function \twrite\n\t * @param mixed\t\tprevTransaction\n\t *\n\t * @return void|mixed\n\t */\n\tcycle( onread, onwrite, prevTransaction ) {\n\t\tthis.onread( () => {\n\t\t\t// Record initial values\n\t\t\tconst readReturn = onread( prevTransaction );\n\t\t\t// Call erite, the transation\n\t\t\tconst callWrite = ( readReturn ) => {\n\t\t\t\tif ( readReturn === undefined ) return;\n\t\t\t\tthis.onwrite( () => {\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\n\t\t\t\t\t// Repeat transaction\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\n\t\t\t\t\t} else {\n\t\t\t\t\t\trepeatTransaction( writeReturn );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t\t// ---------------------------------------\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\n\t\t\t// ---------------------------------------\n\t\t\tif ( readReturn instanceof Promise ) {\n\t\t\t\treadReturn.then( callWrite );\n\t\t\t} else {\n\t\t\t\tcallWrite( readReturn );\n\t\t\t}\n\t\t} );\n\t}\n\n}", "\n\nexport function isXpath( expr ) { return ( expr = expr.trim() ) && expr.startsWith( '(' ) && expr.endsWith( ')' ) }\n\nexport function xpathQuery( window, context, expr, subtree = true ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', subtree ? '(.//' : '(./' ) ).join( '|' );\n    let nodes = [], node;\n    try {\n        // Throws in firefox and safari where context is a text node\n        const result = window.document.evaluate( expr, context, null, window.XPathResult.ANY_TYPE );\n        while ( node = result.iterateNext() ) nodes.push( node );\n    } catch( e ) {}\n    return nodes;\n}\n\nexport function xpathMatch( window, node, expr ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', '(self::' ) ).join( '|' );\n    try {\n        // Throws in firefox and safari where context is a text node and query isn't\n        return window.document.evaluate( `${ expr }`, node, null, window.XPathResult.BOOLEAN_TYPE ).booleanValue;\n    } catch( e ) {}\n}\n\nexport function containsNode( window, a, b, crossRoots = false, testCache = null ) {\n    const prevTest = testCache?.get( a )?.get( b );\n    if ( typeof prevTest !== 'undefined' ) return prevTest;\n    const response = val => {\n        if ( !testCache?.has( a ) ) testCache?.set( a, new WeakMap );\n        testCache?.get( a )?.set( b, val );\n        return val;\n    };\n    const rootNodeA = a.getRootNode();\n    const rootNodeB = b.getRootNode();\n    if ( rootNodeA === rootNodeB ) return response( a.contains( b ) );\n    if ( crossRoots && rootNodeB instanceof window.ShadowRoot ) return response( containsNode( window, a, rootNodeB.host, crossRoots, testCache ) );\n    return response( false );\n}\n\nexport function splitOuter( str, delim = '|' ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits, skip ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}", "\n/**\n * @imports\n */\nimport * as Util from './Util.js';\n\nexport default class DOMSpec {\n    constructor( content ) {\n        this.content = content;\n        this.type = typeof content === 'string' ? 'selector' : 'instance';\n        this.kind = this.type === 'instance' ? null : Util.isXpath( content ) ? 'xpath' : 'css';\n        if ( this.kind === 'xpath' ) {\n            this.isXpathAttr = Util.splitOuter( content.trim().slice( 1, -1 ), '@' ).length > 1;\n        }\n    }\n    toString() { return this.content; }\n}", "\n/**\n * @imports\n */\nimport { _isFunction, _isObject, _wq } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport DOMSpec from './DOMSpec.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class Realtime\n */\nexport default class Realtime {\n\n\t/**\n\t * @constructor\n\t *\n\t * @param document|Element\tcontext\n\t */\n\tconstructor( context, namespace, window ) {\n\t\tthis.context = context;\n\t\tthis.namespace = namespace;\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\n\t\tthis.document = this.window.document;\n\t\tthis.webqit = this.window.webqit;\n\t\tObject.defineProperty( this, '#', { value: {} } );\n\t}\n\t\n\t/**\n\t * Resolves arguments\n\t * \n\t * @param Array \t\t\targs \n\t * \n\t * @returns Array\n\t */\n\tresolveArgs( args ) {\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\n\t\telse if ( _isObject( args[ 0 ] ) && !( args[ 0 ] instanceof DOMSpec ) && args.length === 1 ) {\n\t\t\targs = [ [], undefined, args[ 0 ] ];\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\n\t\tif ( args[ 0 ].filter( x => typeof x !== 'string' && !( x instanceof DOMSpec ) && !( x instanceof this.window.Node ) ).length ) {\n\t\t\tthrow new Error( `Argument #2 must be either a string or a Node object, or a list of those.` );\n\t\t}\n\t\targs[ 0 ] = args[ 0 ].map( s => s instanceof DOMSpec ? s : new DOMSpec( s ) );\n\t\treturn args;\n\t}\n\n\t/**\n\t * @registry\n\t *\n\t * @param Array\t\t\t\t...args\n\t * \n\t * @returns Map\n\t */\n\tregistry( ...args ) {\n\t\treturn _wq( this.window, 'realdom', this.namespace, ...args );\n\t}\n\t\t\n\t/**\n\t * @createSignalGenerator\n\t * \n\t * @param Object \t\t\tmo \n\t * \n\t * @returns Object\n\t */\n\tcreateSignalGenerator() {\n\t\treturn {\n\t\t\tgenerate() {\n\t\t\t\t// Abort previous\n\t\t\t\tthis.lastController?.abort();\n\t\t\t\tthis.lastController = new AbortController;\n\t\t\t\tconst flags = { signal: this.lastController.signal };\n\t\t\t\treturn flags;\n\t\t\t},\n\t\t\tdisconnect() { this.lastController?.abort(); }\n\t\t}\n\t}\n\t\t\n\t/**\n\t * Loops through registration objects whose contexts match the event context.\n\t * \n\t * @param String \t\tinterceptionTiming\n\t * @param Object|Array \trecord_s\n\t * @param Function \t\tcallback \n\t * \n\t * @returns void\n\t */\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\n\t\tconst { window } = this, deferreds = new Set, testCache = new WeakMap;\n\t\tfor ( const [ registration, deferred ] of this.registry( interceptionTiming ) ) {\n\t\t\tlet $records = [].concat( record_s ).filter( record => Util.containsNode( window, registration.context, record.target, registration.params.subtree === 'cross-roots', testCache ) );\n\t\t\tif ( !$records.length ) continue;\n\t\t\tconst args = [ registration, Array.isArray( record_s ) ? $records : $records[ 0 ] ];\n\t\t\tif ( deferred ) deferreds.add( args ); else callback.call( window, ...args );\n\t\t}\n\t\tfor ( const args of deferreds ) callback.call( window, ...args );\n\t\tdeferreds.clear();\n\t}\n\n\t/**\n\t * @disconnectables\n\t * \n\t * @param AbortSignal \t\tsignal\n\t * @param Array \t\t\t...objects \n\t * \n\t * @returns Object\n\t */\n\tdisconnectables( signal, ...objects ) {\n\t\tconst disconnectable = { disconnect() {\n\t\t\tobjects.forEach( d => (\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \n\t\t\t\t|| _isFunction( d ) && d() \n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\n\t\t\t) );\n\t\t} };\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\n\t\treturn disconnectable;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _wq } from '@webqit/util/js/index.js';\nimport Realtime from './Realtime.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class AttrRealtime\n */\nexport default class AttrRealtime extends Realtime {\n\n\ttype = 'attr';\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'attr', ...args );\n\t}\n\t\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tget( spec, callback = undefined, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// -------------\n\t\tconst records = attrIntersection( context, spec );\n\t\tif ( !callback ) return records;\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\n\t\tif ( !originalFilterIsString ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( records, flags, context );\n\t\t} else {\n\t\t\tfor ( const record of records ) {\n\t\t\t\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\t\t\t\tcallback( record, flags, context );\n\t\t\t}\n\t\t}\n\t\t// -------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( originalFilterIsString ? spec[ 0 ] : spec, callback, { newValue: true, ...params } );\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\n\t\t}\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( originalFilterIsString ? spec[ 0 ] : spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails && !webqit.realdom.attrInterceptionHooks?.intercepting ) {\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => {\n\t\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\t\tdispatch.call( window, registration, records, context );\n\t\t} );\n\t\t// ------------------\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree && true };\n\t\tif ( spec.length ) { $params.attributeFilter = spec.map( a => a + '' ); }\n\t\tdisconnectable.observe( context, $params );\n\t\t// -------------\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\n\t\t\t} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() { registry.delete( registration ); } };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Deduplicates records.\n * \n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction dedupAndIgnoreInternals( records ) {\n\treturn records.reduce( ( rcds, rcd, i ) => {\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\n\t\tif ( _wq( rcd.target, 'realdom', 'internalAttrInteractions' ).get( rcd.attributeName ) ) return rcds;\n\t\treturn rcds.concat( rcd );\n\t}, [] );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration\n * @param Array \t\t\trecords\n * \n * @returns Void\n */\nfunction dispatch( registration, records ) {\n\tconst { context, spec, callback, params, atomics, originalFilterIsString, signalGenerator } = registration;\n\tif (!params.subtree) {\n\t\trecords = records.filter((r) => {\n\t\t\treturn r.target === context;\n\t\t}); \n\t}\n\tif ( !records.length ) return;\n\tconst $spec = spec.map( a => a + '' );\n\tif ( params.atomic && !atomics.size ) {\n\t\trecords = attrIntersection( context, spec, records );\n\t} else if ( params.timing !== 'async' && spec.length ) {\n\t\trecords = records.filter( r => $spec.includes( r.name ) );\n\t}\n\tif ( !records.length ) return;\n\t// Should we care about old / new values being present?\n\tif ( !( params.newValue === null && params.oldValue === null && params.eventDetails ) ) {\n\t\trecords = records.map( rcd => {\n\t\t\tlet exclusion;\n\t\t\tif ( !params.eventDetails ) {\n\t\t\t\t( { event: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.oldValue && ( 'oldValue' in rcd ) ) {\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.newValue && ( 'value' in rcd ) ) {\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\n\t\t\t\trcd = {  ...rcd, value: internalAttrInteraction( rcd.target, rcd.name, () => rcd.target.getAttribute( rcd.name ) ) };\n\t\t\t}\n\t\t\treturn rcd;\n\t\t} );\n\t}\n\tif ( params.atomic ) {\n\t\trecords.forEach( record => atomics.set( record.name, record ) );\n\t\trecords = Array.from( atomics.entries() ).map( ( [ , value ] ) => value );\n\t}\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\n\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\tcallback( record_s, flags, context );\n}\n\n/**\n */\nfunction internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = _wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\n/**\n * Helper to determining which records to deliver.\n * \n * @param Object \t\t\tcontext\n * @param Array \t\t\tspec\n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction attrIntersection( context, spec, records = [] ) {\n\tconst _type = { event: null, type: 'attribute' };\n\tif ( spec.length ) {\n\t\treturn spec.map( attrName => {\n\t\t\tattrName = attrName + '';\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: internalAttrInteraction( context, attrName, () => context.getAttribute( attrName ) ), ..._type };\n\t\t} );\n\t}\n\tconst attrs = Array.from( context.attributes );\n\treturn attrs.map( attr => {\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: internalAttrInteraction( context, attr.nodeName, () => attr.nodeValue ), ..._type };\n\t} );\n}\n\n/**\n * Determines the event for an attr mutation record.\n * \n * @param MutationRecord \t{ target, attributeName }\n * \n * @returns Object\n */\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\n\tconst window = this, registry = window.webqit.realdom.attrInterceptionRecords?.get( target ) || {};\n\tconst event = registry[ attributeName ]?.[ 0 ] || 'mutation';\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\n\treturn record;\n}\n\n/**\n * Attributes intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction attrInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Element } = window;\n\tif ( !webqit.realdom.attrInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'attrInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.attrInterceptionHooks.has( timing ) ) { webqit.realdom.attrInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.attrInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.attrInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.attrInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\n\twebqit.realdom.attrInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'attrInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst attrIntercept = ( record, defaultAction ) => {\n\t\tif ( !webqit.realdom.attrInterceptionRecords.has( record.target ) ) { webqit.realdom.attrInterceptionRecords.set( record.target, {} ); }\n\t\tconst registry = webqit.realdom.attrInterceptionRecords.get( record.target );\n\t\t// ------------------\n\t\tregistry[ record.name ] = registry[ record.name ] || [];\n\t\tregistry[ record.name ].unshift( record.event );\n\t\tif ( _wq( record.target, 'realdom', 'internalAttrInteractions' ).get( record.name ) ) return defaultAction();\n\t\t// ------------------\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\n\t\treturn returnValue;\n\t};\n\n\t// Interception observer WILL need to know non-API-based mutations\n\tconst mo = new window.MutationObserver( records => {\n\t\trecords = records.filter( rcd => {\n\t\t\tconst registry = window.webqit.realdom.attrInterceptionRecords?.get( rcd.target ) || {};\n\t\t\treturn !registry[ rcd.attributeName ]?.shift();\n\t\t} );\n\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\tif ( !records.length ) return;\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\n\t} );\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\n\n\t// Intercept DOM attr mutation methods\n\tconst originalApis = Object.create( null );\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\n\t\tElement.prototype[ apiName ] = function( ...args ) {\n\t\t\tlet value, oldValue = internalAttrInteraction( this, args[ 0 ], () => this.getAttribute( args[ 0 ] ) );\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\n\t\t\t\tvalue = oldValue === null ? true : false;\n\t\t\t}\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\treturn attrIntercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\n/**\n * @imports\n */\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport AttrRealtime from './AttrRealtime.js';\nimport Realtime from './Realtime.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class DOMRealtime\n */\nexport default class DOMRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'tree', ...args );\n\t}\n\n\t/**\n\t * Alias for ( new AttrRealtime() ).all( ... )\n\t */\n\tattr( filter, callback = undefined, params = {} ) {\n\t\tconst { context, window } = this;\n\t\treturn ( new AttrRealtime( context, window ) ).get( ...arguments );\n\t}\n\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tquery( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// ------------------\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'query', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ------------------\n\t\tif ( !params.generation || params.generation === 'entrants' ) {\n\t\t\tif ( !spec.length ) {\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\n\t\t\t\t[ ...context.children ].forEach( node => getRecord( context ).entrants.push( node ) );\n\t\t\t} else if ( spec.every( s => s.type === 'selector' ) ) {\n\t\t\t\tconst [ cssSelectors, xpathQueries ] = spec.reduce( ( [ css, xpath ], s ) => {\n\t\t\t\t\treturn s.kind === 'xpath' ? [ css, xpath.concat( s ) ] : [ css.concat( s ), xpath ];\n\t\t\t\t}, [ [], [] ] );\n\t\t\t\tconst matches = [];\n\t\t\t\tif ( params.subtree ) {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...context.querySelectorAll( cssSelectors.join( ',' ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries ) ); }\n\t\t\t\t} else {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...[ ...context.children ].filter( node => node.matches( cssSelectors ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries, false ) ); }\n\t\t\t\t}\n\t\t\t\tmatches.forEach( node => getRecord( node.parentNode || context ).entrants.push( node ) );\n\t\t\t}\n\t\t}\n\t\t// ------------------\n\t\tif ( !callback ) return records;\n\t\tconst disconnectable = { disconnected: false };\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tif ( disconnectable.disconnected ) break;\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t\t// ------------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( spec, callback, params );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, disconnectable_live );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: false } )\n\t */\n\tchildren( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: false } );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: true } )\n\t */\n\tsubtree( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: true } );\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit, document } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails ) { webqit.realdom.domInterceptionRecordsAlwaysOn = true; }\n\t\tif ( ( document.readyState === 'loading' || webqit.realdom.domInterceptionRecordsAlwaysOn ) && !webqit.realdom.domInterceptionHooks?.intercepting ) {\n\t\t\tdomInterception.call( window, 'sync', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tdispatch.call( window, registration, withEventDetails.call( window, record ), context );\n\t\t} ) );\n\t\tdisconnectable.observe( context, { childList: true, subtree: params.subtree && true, } );\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\t\t\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tdomInterception.call( window, interceptionTiming, record => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, record, dispatch );\n\t\t\t} );\n\t\t}\n\t\tconst mo = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tif ( Array.isArray( ( record = withEventDetails.call( window, record ) ).event ) ) return;\n\t\t\tdispatch.call( window, registration, record, context );\n\t\t} ) );\n\t\tmo.observe( context, { childList: true, subtree: params.subtree && true } );\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() {\n\t\t\tregistry.delete( registration );\n\t\t\tmo.disconnect();\n\t\t} };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Tracks the connectedness of element references.\n\t *\n\t * @param array|Element\t\t\t\telements\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable\n\t */\n\ttrack( elements, callback, params = {} ) {\n\t\tparams = { subtree: true, ...params };\n\t\treturn this.observe( elements, record => {\n\t\t\tif ( record.entrants.length ) callback( true, Array.isArray( elements ) ? record.entrants : record.entrants[ 0 ] );\n\t\t\tif ( record.exits.length ) callback( false, Array.isArray( elements ) ? record.exits : record.exits[ 0 ] );\n\t\t}, params );\n\t}\n}\n\n/**\n * Sensitivty for attribute changes for attribute spec.\n * \n * @param object registration\n * \n * @returns Disconnectable\n */\nfunction staticSensitivity( registration ) {\n\tconst window = this;\n\tconst { context, spec, callback, params, signalGenerator } = registration;\n\tconst cssSelectors = spec.filter( s => s.kind === 'css' );\n\tconst parseDot = selector => selector.match( /\\.([\\w-]+)/g )?.length ? [ 'class' ] : [];\n\tconst parseHash = selector => selector.match( /#([\\w-]+)/g )?.length ? [ 'id' ] : [];\n\tconst parse = selector => [ ...selector.matchAll( /\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g ) ].map( x => x[ 1 ] ).concat( parseDot( selector ) ).concat( parseHash( selector ) );\n\tif ( !( registration.$attrs = Array.from( new Set( cssSelectors.filter( s => ( s + '' ).includes( '[' ) ).reduce( ( attrs, selector ) => attrs.concat( parse( selector + '' ) ), [] ) ) ) ).length ) return;\n\t// ---------\n\tconst entrants = new Set, exits = new Set;\n\tentrants.push = val => ( exits.delete( val ), entrants.add( val ) );\n\texits.push = val => ( entrants.delete( val ), exits.add( val ) );\n\tregistration.$deliveryCache = { entrants, exits };\n\t// ---------\n\treturn ( new AttrRealtime( context, window ) ).observe( registration.$attrs, _records => {\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'static', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ---------\n\t\tconst matchesCache = new WeakMap;\n\t\tconst matches = node => {\n\t\t\tif ( !matchesCache.has( node ) ) { matchesCache.set( node, cssSelectors.some( s => node.matches( s + '' ) ) ); }\n\t\t\treturn matchesCache.get( node );\n\t\t};\n\t\t// ---------\n\t\tfor ( const _record of _records ) {\n\t\t\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\t\t\tif ( params.generation && generation !== params.generation ) return;\n\t\t\t\tif ( registration.$deliveryCache[ generation ].has( _record.target ) || ( generation === 'entrants' ? !matches( _record.target ) : matches( _record.target ) ) ) return;\n\t\t\t\tregistration.$deliveryCache[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target )[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target ).event = _record.event;\n\t\t\t} );\n\t\t}\n\t\t// ---------\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails } );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration \n * @param Object \t\t\trecord \n * \n * @returns Void\n */\nfunction dispatch( registration, _record ) {\n\tconst { context, spec, callback, params, signalGenerator, $deliveryCache } = registration;\n\t// ---------\n\tconst record = { ..._record, entrants: [], exits: [] };\n\tif ( !params.eventDetails ) { delete record.event; }\n\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\tif ( params.generation && generation !== params.generation ) return;\n\t\tif ( spec.length ) {\n\t\t\trecord[ generation ] = nodesIntersection.call( this, spec, params.subtree === 'cross-roots', _record[ generation ], _record.event !== 'parse' );\n\t\t} else {\n\t\t\trecord[ generation ] = [ ..._record[ generation ] ];\n\t\t}\n\t\tif ( !$deliveryCache ) return;\n\t\tfor ( const node of record[ generation ] ) {\n\t\t\t$deliveryCache[ generation ].push( node );\n\t\t}\n\t} );\n\t// ---------\n\tif ( !record.entrants.length && !record.exits.length ) return;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback( record, flags, context );\n}\n\n/**\n * Aggregates instances of els in sources\n * \n * @param Array \t\t\tspec \n * @param Bool \t\t\t\tcrossRoots \n * @param Array \t\t\tsources \n * @param Bool \t\t\t\tdeepIntersect \n * \n * @returns \n */\nfunction nodesIntersection( spec, crossRoots, sources, deepIntersect ) {\n\tsources = Array.isArray( sources ) ? sources : [ ...sources ];\n\tconst match = ( sources, s ) => {\n\t\t// Filter out text nodes\n\t\tif ( s.type === 'selector' ) {\n\t\t\t// Is directly mutated...\n\t\t\tlet matches = s.isXpathAttr ? [] : sources.filter( source => s.kind === 'xpath' ? Util.xpathMatch( this, source, s + '' ) : source.matches && source.matches( s + '' ) );\n\t\t\t// Is contextly mutated...\n\t\t\tif ( deepIntersect || s.isXpathAttr ) {\n\t\t\t\tmatches = sources.reduce( ( collection, source ) => {\n\t\t\t\t\tif ( s.kind === 'xpath' ) { return [ ...collection, ...Util.xpathQuery( this, source, s, deepIntersect ) ]; }\n\t\t\t\t\treturn source.querySelectorAll ? [ ...collection, ...source.querySelectorAll( s + '' ) ] : collection;\n\t\t\t\t}, matches );\n\t\t\t}\n\t\t\tif ( matches.length ) return matches;\n\t\t} else {\n\t\t\t// Is directly mutated...\n\t\t\tif ( sources.includes( s.content ) || (\n\t\t\t\tdeepIntersect && sources.some( source => Util.containsNode( this/* window */, source, s.content, crossRoots ) )\n\t\t\t) ) { return [ s.content ]; }\n\t\t}\n\t};\n\t// Search can be expensive...\n\t// Multiple listeners searching the same thing in the same list?\n\tif ( !sources.$$searchCache ) { sources.$$searchCache = new Map; }\n\treturn spec.reduce( ( matches, s ) => {\n\t\tlet _matches;\n\t\tif ( sources.$$searchCache.has( s.content ) ) {\n\t\t\t_matches = sources.$$searchCache.get( s.content );\n\t\t} else {\n\t\t\t_matches = match( sources, s ) || [];\n\t\t\tif ( s.type === 'instance' ) {\n\t\t\t\tsources.$$searchCache.set( s.content, _matches );\n\t\t\t}\n\t\t}\n\t\treturn matches.concat( _matches );\n\t}, [] );\n}\n\n/**\n * Determines the event for a mutation record\n * \n * @param MutationRecord \t{ target, entrants, exits }\n * \n * @returns Object\n */\nfunction withEventDetails( { target, addedNodes, removedNodes } ) {\n\tlet window = this, event;\n\tevent = _arrFrom( addedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), null );\n\tevent = _arrFrom( removedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), event );\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\n}\n\n/**\n * DOM intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction domInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Node, CharacterData, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\n\tif ( !webqit.realdom.domInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'domInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionNoRecurse ) { Object.defineProperty( webqit.realdom, 'domInterceptionNoRecurse', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionHooks.has( timing ) ) { webqit.realdom.domInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.domInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.domInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.domInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `DOM mutation APIs are now being intercepted.` );\n\twebqit.realdom.domInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'domInterceptionRecords', { value: new Map } );\n\n\t// No recursion helper\n\tconst noRecurse = ( node, method, callback ) => {\n\t\twebqit.realdom.domInterceptionNoRecurse.set( node, method );\n\t\tconst returnValue = callback();\n\t\twebqit.realdom.domInterceptionNoRecurse.delete( node );\n\t\treturn returnValue;\n\t};\n\n\t// Interception hooks\n\tconst intercept = ( record, defaultAction ) => {\n\t\trecord.entrants.concat( record.exits ).forEach( node => {\n\t\t\tclearTimeout( webqit.realdom.domInterceptionRecords.get( node )?.timeout ); // Clear any previous that's still active\n\t\t\twebqit.realdom.domInterceptionRecords.set( node, record.event ); // Main: set event details... and next to timeout details\n\t\t\tconst timeout = setTimeout( () => { webqit.realdom.domInterceptionRecords.delete( node ); }, 0 );\n\t\t\tObject.defineProperty( record.event, 'timeout', { value: timeout, configurable: true } );\n\t\t} );\n\t\twebqit.realdom.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\n\t\treturn returnValue;\n\t};\n\n\t// Intercept DOM mutation methods\n\tconst _apiNames = {\n\t\t// Note the order\n\t\tShadowRoot: [ 'innerHTML', 'setHTMLUnsafe' ],\n\t\tDocumentFragment: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tDocument: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tHTMLElement: [ 'outerText', 'innerText' ],\n\t\tElement: [ 'append', 'prepend', 'before', 'after', 'insertAdjacentElement', 'insertAdjacentHTML', 'remove', 'replaceChildren', 'replaceWith', 'setHTMLUnsafe', 'innerHTML', 'outerHTML' ],\n\t\tCharacterData: [ 'before', 'after', 'remove', 'replaceWith' ],\n\t\tNode: [ 'insertBefore', 'replaceChild', 'removeChild', 'appendChild', 'textContent', 'nodeValue' ],\n\t};\n\tconst _apiOriginals = {\n\t\t// Note the order\n\t\tShadowRoot: Object.create( null ), // extends DocumentFragment\n\t\tDocumentFragment: Object.create( null ), // extends Node\n\t\tDocument: Object.create( null ), // extends Node\n\t\tHTMLElement: Object.create( null ), // extends Element,\n\t\tElement: Object.create( null ), // extends Node\n\t\tCharacterData: Object.create( null ), // extends Node\n\t\tNode: Object.create( null ),\n\t};\n\n\tconst _apiNamesUnique = new Set( Object.values( _apiNames ).reduce( ( all, apis ) => all.concat( apis ), [] ) );\n\t_apiNamesUnique.forEach( apiName => {\n\t\t\n\t\tObject.keys( _apiNames ).forEach( DOMClassName => {\n\t\t\tif ( !_apiNames[ DOMClassName ].includes( apiName ) ) return;\n\t\t\tconst _apiOriginal = Object.getOwnPropertyDescriptor( window[ DOMClassName ].prototype, apiName );\n\t\t\tif ( !_apiOriginal ) return; // Typically: Element:setHTMLUnsafe\n\t\t\tObject.defineProperty( window[ DOMClassName ].prototype, apiName, 'value' in _apiOriginal ? { ..._apiOriginal, value: method } : { ..._apiOriginal, set: setter } );\n\t\t\t_apiOriginals[ DOMClassName ][ apiName ] = _apiOriginal;\n\t\t} );\n\n\t\tfunction method( ...args ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\tif ( webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'insertBefore' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'insertAdjacentElement', 'insertAdjacentHTML' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 1 ] ];\n\t\t\t\tif ( [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t} else if ( [ 'setHTMLUnsafe', 'replaceChildren' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [ ...args ] : [ args[ 0 ] ];\n\t\t\t} else if ( [ 'replaceWith', 'remove' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\tentrants = apiName === 'replaceWith' ? [ ...args ] : [];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else if ( [ 'replaceChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ args[ 1 ] ];\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'removeChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...args ];\n\t\t\t} else {\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\n\t\t\t\tentrants = [ ...args ];\n\t\t\t\tif ( [ 'before', 'after' ].includes( apiName ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to entrants\n\t\t\tlet apiNameFinal = apiName;\n\t\t\tif ( [ 'insertAdjacentHTML', 'setHTMLUnsafe' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' && [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\t$apiOriginals.setHTMLUnsafe.value.call( temp, entrants[ 0 ], apiName === 'setHTMLUnsafe' ? args[ 1 ] : {} );\n\t\t\t\tentrants = [ ...temp.childNodes ];\n\t\t\t\t// --------------  \n\t\t\t\tif ( apiName === 'insertAdjacentHTML' ) {\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\n\t\t\t\t\targs[ 1 ] = new DocumentFragment;\n\t\t\t\t\tnoRecurse( args[ 1 ], 'append', () => args[ 1 ].append( ...temp.childNodes ) );\n\t\t\t\t} else {\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\n\t\t\t\t\targs = [ ...temp.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tif ( !target ) return exec();\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, () => {\n\t\t\t\treturn $apiOriginals[ apiNameFinal ].value.call( this, ...args );\n\t\t\t} );\n\t\t}\n\n\t\tfunction setter( value ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].set.call( this, value );\n\t\t\tif ( this instanceof HTMLScriptElement || webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'outerHTML', 'outerText' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else {\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\n\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\ttarget = this.content;\n\t\t\t\t\texits = [ ...this.content.childNodes ];\n\t\t\t\t} else {\n\t\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to nodes\n\t\t\tif ( [ 'outerHTML', 'innerHTML' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return exec();\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\tnoRecurse( temp, apiName, () => temp[ apiName ] = value );\n\t\t\t\tentrants = this instanceof HTMLTemplateElement ? [ ...temp.content.childNodes ] : [ ...temp.childNodes ];\n\t\t\t\tif ( ( this instanceof HTMLTemplateElement && this.hasAttribute( 'src' ) ) || this instanceof ShadowRoot ) {\n\t\t\t\t\tconst getScripts = nodes => nodes.reduce( ( scripts, el ) => {\n\t\t\t\t\t\tif ( el instanceof HTMLScriptElement ) return scripts.concat( el );\n\t\t\t\t\t\tif ( el instanceof HTMLTemplateElement ) return scripts.concat( getScripts( [ el.content ] ) );\n\t\t\t\t\t\tscripts = scripts.concat( getScripts( [ ...( el.querySelectorAll?.( 'template' ) || [] ) ].map( t => t.content ) ) );\n\t\t\t\t\t\treturn scripts.concat( ...( el.querySelectorAll?.( 'script' ) || [] ) );\n\t\t\t\t\t}, [] );\n\t\t\t\t\tfor ( const script of getScripts( entrants ) ) {\n\t\t\t\t\t\tif (this instanceof ShadowRoot) {\n\t\t\t\t\t\t\tscript.setAttribute('data-handling', 'manual');\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst $script = document.createElement( 'script' );\n\t\t\t\t\t\t[ ...script.attributes ].forEach( attr => $script.setAttribute( attr.name, attr.value ) );\n\t\t\t\t\t\t$script.textContent = script.textContent;\n\t\t\t\t\t\tnoRecurse( script, 'replaceWith', () => script.replaceWith( $script ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// -------------- \n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\tvalue = new DocumentFragment;\n\t\t\t\t\tnoRecurse( value, 'append', () => value.append( ...entrants ) );\n\t\t\t\t\texec = () => noRecurse( this, 'replaceWith', () => Element.prototype.replaceWith.call( this, value ) );\n\t\t\t\t} else {\n\t\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\t\texec = () => noRecurse( this.content, 'replaceChildren', () => this.content.replaceChildren( ...entrants ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\texec = () => noRecurse( this, 'replaceChildren', () => Element.prototype.replaceChildren.call( this, ...entrants ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString, _isFunction } from '@webqit/util/js/index.js';\r\nimport { _set } from '@webqit/util/obj/index.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function() {\r\n    const window = this;\r\n    if ( !window.webqit ) window.webqit = {};\r\n    if ( window.webqit.realdom ) return window.webqit.realdom;\r\n    window.webqit.realdom = {};\r\n    polyfill.call( window );\r\n    // ------\r\n    window.webqit.realdom.meta = ( ...args ) => meta.call( window, ...args );\r\n    window.webqit.realdom.ready = ( ...args ) => ready.call( window, ...args );\r\n    // ------\r\n    window.webqit.realdom.realtime = ( context, namespace = 'dom' ) => {\r\n        if ( namespace === 'dom' ) return new DOMRealtime( context, window );\r\n        if ( namespace === 'attr' ) return new AttrRealtime( context, window );\r\n    };\r\n    // ------\r\n    const scheduler = new Scheduler( window );\r\n    window.webqit.realdom.schedule = ( type, ...args ) => {\r\n        return scheduler[ `on${ type }` ]( ...args );\r\n    };\r\n    window.webqit.realdom.synthesizeWhile = ( ...args ) => {\r\n        return scheduler.synthesizeWhile( ...args );\r\n    };\r\n    // ------\r\n    return window.webqit.realdom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready( ...args ) {\r\n    let timing = 'interactive', callback;\r\n    if ( _isString( args[ 0 ] ) ) {\r\n        timing = args[ 0 ];\r\n        if ( _isFunction( args[ 1 ] ) ) { callback = args[ 1 ]; }\r\n    } else if ( _isFunction( args[ 0 ] ) ) { callback = args[ 0 ]; }\r\n    // --------------\r\n    const timings = { interactive: [ 'interactive', 'complete' ], complete: [ 'complete' ], };\r\n    if ( !timings[ timing ] ) throw new Error( `Invalid ready-state timing: ${ timing }.` );\r\n\tconst window = this;\r\n    // --------------\r\n    if ( !callback ) {\r\n        if ( !window.webqit.realdom.readyStatePromises ) {\r\n            window.webqit.realdom.readyStatePromises = {\r\n                interactive: new Promise( res => ready.call( this, 'interactive', res ) ),\r\n                complete: new Promise( res => ready.call( this, 'complete', res ) ),\r\n            };\r\n        }\r\n        return window.webqit.realdom.readyStatePromises[ timing ];\r\n    }\r\n    // --------------\r\n\tif ( timings[ timing ].includes( window.document.readyState ) ) return callback( window );\r\n    if ( !window.webqit.realdom.readyStateCallbacks ) {\r\n        window.webqit.realdom.readyStateCallbacks = { interactive: [], complete: [] };\r\n        window.document.addEventListener( 'readystatechange', () => {\r\n            const state = window.document.readyState;\r\n            for ( const callback of window.webqit.realdom.readyStateCallbacks[ state ].splice( 0 ) ) {\r\n                callback( window );\r\n            }\r\n        }, false );\r\n    }\r\n    window.webqit.realdom.readyStateCallbacks[ timing ].push( callback );\r\n}\r\n\r\n/**\r\n * A webqit's meta tag props reader.\r\n *  \r\n * @param String name\r\n * \r\n * @return Object\r\n */\r\nfunction meta( name ) {\r\n    const window = this;\r\n    let _content = {}, _el;\r\n    if ( _el = window.document.querySelector( `meta[name=\"${ name }\"]` ) ) {\r\n        _content = ( _el.content || '' ).split( ';' ).filter( v => v ).reduce( ( _metaVars, directive ) => {\r\n            const directiveSplit = directive.split( '=' ).map( d => d.trim() );\r\n            _set( _metaVars, directiveSplit[ 0 ].split( '.' ), directiveSplit[ 1 ] === 'true' ? true : (directiveSplit[ 1 ] === 'false' ? false : (\r\n                    _isNumeric( directiveSplit[ 1 ] ) ? parseInt( directiveSplit[ 1 ] ) : directiveSplit[ 1 ]\r\n                ) )\r\n            );\r\n            return _metaVars;\r\n        }, {} );\r\n    }\r\n    return { get name() { return name; }, get content() { return _el.content; }, json() {\r\n\t\treturn JSON.parse( JSON.stringify( _content ) );\r\n    } };\r\n}", "\n/**\n * Converts a string to title case.\n *\n * @param string \tstr\n * @param bool \t\tstrict\n *\n * @return string\n */\nexport default function(str, strict) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\n};\n", "\n/**\n * @imports\n */\nimport realdomInit from '@webqit/realdom';\nimport { _wq as __wq } from '@webqit/util/js/index.js';\nimport { _merge } from '@webqit/util/obj/index.js';\nimport { _toTitle } from '@webqit/util/str/index.js';\n\nexport const _wq = ( target, ...args ) => __wq( target, 'oohtml', ...args );\n\nexport const env = {};\n\nexport function _init( name, $config, $defaults ) {\n    const window = this, realdom = realdomInit.call( window );\n    env.window = window;\n    if ( !window.webqitConfig ) {\n        window.webqitConfig = realdom.meta( 'webqit' ).json();\n    }\n    window.webqit || ( window.webqit = {} );\n    window.webqit.oohtml || ( window.webqit.oohtml = {} );\n    window.webqit.oohtml.configs || ( window.webqit.oohtml.configs = {} );\n    // ---------------------\n    const configKey = name.toUpperCase().replace( '-', '_' );\n    if ( !window.webqit.oohtml.configs[ configKey ] ) {\n        window.webqit.oohtml.configs[ configKey ] =  {};\n        const config = window.webqit.oohtml.configs[ configKey ];\n        _merge( 2, config, $defaults, $config, realdom.meta( name ).json() );\n        if ( window.webqitConfig.prefix ) {\n            Object.keys( config ).forEach( main => {\n                Object.keys( config[ main ] ).forEach( key => {\n                    if ( main === 'api' && typeof config[ main ][ key ] === 'string' ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }${ _toTitle( config[ main ][ key ] ) }`\n                    } else if ( [ 'attr', 'elements' ].includes( main ) && config[ main ][ key ]?.startsWith( 'data-' ) === false ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }-${ config[ main ][ key ] }`\n                    }\n                } );\n            } );\n        }\n    }\n    // ---------------------\n    return { config: window.webqit.oohtml.configs[ configKey ], realdom, window };\n}\n\nexport function getInternalAttrInteraction( node, attrName ) {\n\treturn __wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n}\nexport function internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = __wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n\t__wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t__wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\nexport function _compare( a, b, depth = 1, objectSizing = false ) {\n    if ( depth && typeof a === 'object' && a && typeof b === 'object' && b && ( !objectSizing || Object.keys( a ).length === Object.keys( b ).length ) ) {\n        for ( let key in a ) {\n            if ( !_compare( a[ key ], b[ key ], depth - 1, objectSizing ) ) return false;\n        }\n        return true;\n    }\n    if ( Array.isArray( a ) && Array.isArray( b ) && a.length === b.length ) {\n        return ( b = b.slice( 0 ).sort() ) && a.slice( 0 ).sort().every( ( valueA, i ) => valueA === b[ i ] );\n    }\n    return a === b;\n}\n\nexport function _splitOuter( str, delim ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}\n\n// Unique ID generator\nexport const _uniqId = () => ( 0 | Math.random() * 9e6 ).toString( 36 );\n\n// Hash of anything generator\nconst hashTable = new Map;\nexport function _toHash( val ) {\n    let hash;\n    if ( !( hash = hashTable.get( val ) ) ) {\n        hash = _uniqId();\n        hashTable.set( val, hash );\n    }\n    return hash;\n}\n\n// Value of any hash\nexport function _fromHash( hash ) {\n    let val;\n    hashTable.forEach( ( _hash, _val ) => {\n        if ( _hash === hash ) val = _val;\n    } );\n    return val;\n}", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default function() {\n    const { window } = env, { webqit } = window;\n    if ( webqit.DOMContextRequestEvent ) return webqit.DOMContextRequestEvent;\n    class DOMContextRequestEvent extends window.Event {\n        /**\n         * @constructor\n         */\n        constructor( ...args ) {\n            const callback = args.pop();\n            if ( typeof callback !== 'function' ) throw new Error( `Callback must be provided.` );\n            const options = args.pop();\n            if ( !options?.kind ) throw new Error( `\"options.kind\" must be specified.` );\n            const eventNames = [ 'contextrequest', 'contextclaim' ];\n            const type = args.pop() || eventNames[ 0 ];\n            if ( !eventNames.includes( type ) ) throw new Error( `Invalid event type. Must be one of: ${ eventNames.join( ',' ) }` );\n            // -------------\n            const { kind, detail, targetContext, live, signal, diff, ...otherOpts } = options;\n            super( type, { ...otherOpts, bubbles: otherOpts.bubbles !== false  } );\n            // -------------\n            Object.defineProperty( this, 'callback', { get: () => callback } );\n            Object.defineProperty( this, 'kind', { get: () => kind } );\n            Object.defineProperty( this, 'targetContext', { get: () => targetContext } );\n            Object.defineProperty( this, 'detail', { get: () => detail } );\n            Object.defineProperty( this, 'live', { get: () => live } );\n            Object.defineProperty( this, 'signal', { get: () => signal } );\n            Object.defineProperty( this, 'diff', { get: () => diff } );\n            Object.defineProperty( this, 'options', { get: () => otherOpts } );\n            Object.defineProperty( this, 'meta', { value: {} } );\n        }\n\n        get target() { return super.target || this.meta.target; }\n        get answered() { return this.meta.answered || false; }\n\n        /**\n         * @respondWith\n         */\n        respondWith( response ) {\n            this.meta.answered = true;\n            if ( this.diff ) {\n                if ( '_prevValue' in this && this._prevValue === response ) return;\n                Object.defineProperty( this, '_prevValue', { value: response, configurable: true } );\n            }\n            return this.callback( response );\n        }\n    }\n    webqit.DOMContextRequestEvent = DOMContextRequestEvent;\n    return DOMContextRequestEvent;\n}", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default class DOMContextResponse extends AbortController {\n    constructor( callback ) {\n        super();\n        callback( response => {\n            const { window: { webqit: { Observer } } } = env;\n            Observer.defineProperty( this, 'value', { value: response, configurable: true, enumerable: true } );\n        }, this );\n    }\n}", "\nexport default class DuplicateContextError extends Error {}", "\n/**\n * @imports\n */\nimport _DOMContextRequestEvent from './_DOMContextRequestEvent.js';\nimport DOMContextResponse from './DOMContextResponse.js';\nimport DOMContext from './DOMContext.js';\nimport DuplicateContextError from './DuplicateContextError.js';\nimport { _wq } from '../util.js';\n\nconst waitListMappings = new Map;\nexport default class DOMContexts {\n\n    /**\n     * @instance\n     */\n    static instance( host ) {\n        return _wq( host ).get( 'contexts::instance' ) || new this( host );;\n    }\n\n    /**\n     * @constructor\n     */\n    constructor( host ) {\n        _wq( host ).get( `contexts::instance` )?.dispose();\n        _wq( host ).set( `contexts::instance`, this );\n        const priv = { host, contexts: new Set };\n        Object.defineProperty( this, '#', { get: () => priv } );\n    }\n\n    /**\n     * @Symbol.iterator\n     */\n    [ Symbol.iterator ] () { return this[ '#' ].contexts[ Symbol.iterator ](); }\n\n    /**\n     * @length\n     */\n    get length() { return this[ '#' ].contexts.size; }\n\n    /**\n     * @find()\n     */\n    find( ...args ) {\n        return [ ...this[ '#' ].contexts ].find( ctx => {\n            if ( typeof args[ 0 ] === 'function' ) return args[ 0 ]( ctx );\n            return ctx.constructor.kind === args[ 0 ] && ( !args[ 1 ] || ctx.detail === args[ 1 ] );\n        } );\n    }\n\n    /**\n     * @attach()\n     */\n    attach( ctx ) {\n        if ( !( ctx instanceof DOMContext) ) throw new TypeError( `Context is not a valid DOMContext instance.` );\n        if ( this.find( ctx.constructor.kind, ctx.detail ) ) {\n            throw new DuplicateContextError( `Context of same kind \"${ ctx.constructor.kind }\"${ ctx.detail ? ` and detail \"${ ctx.detail }\"` : '' } already exists.` );\n        }\n        this[ '#' ].contexts.add( ctx );\n        ctx.initialize( this[ '#' ].host );\n    }\n\n    /**\n     * @detach()\n     */\n    detach( ctx ) {\n        ctx.dispose( this[ '#' ].host );\n        this[ '#' ].contexts.delete( ctx );\n    }\n\n    /**\n     * @request()\n     */\n    request( ...args ) {\n        return new DOMContextResponse( ( emitter, responseInstance ) => {\n            if ( typeof args[ args.length - 1 ] !== 'function' ) {\n                if ( !args[ args.length - 1 ] ) { args[ args.length - 1 ] = emitter; }\n                else { args.push( emitter ); }\n            }\n\n            let options;\n            if ( ( options = args.find( arg => typeof arg === 'object' && arg ) ) && options.live ) {\n                if ( options.signal ) options.signal.addEventListener( 'abort', () => responseInstance.abort() );\n                args[ args.indexOf( options ) ] = { ...options, signal: responseInstance.signal };\n            }\n            const event = new ( _DOMContextRequestEvent() )( ...args );\n            this[ '#' ].host.dispatchEvent( event );\n        } );\n    }\n\n}", "\n/**\n * @imports\n */\nimport DOMContexts from './DOMContexts.js';\nimport { env } from '../util.js';\n\nexport default class DOMContext {\n\n    /**\n     * To be implemented by subclasses\n     */\n    static kind;\n\n    /**\n     * @createRequest\n     */\n    static createRequest() { return { kind: this.kind }; }\n    \n    /**\n     * @constructor\n     */\n    constructor( detail = null ) {\n        Object.defineProperty( this, 'detail', { get: () => detail } );\n        Object.defineProperty( this, 'subscriptions', { value: new Set } );\n    }\n\n    /**\n     * @configs\n     */\n    get configs() {\n        const { window: { webqit: { oohtml: { configs } } } } = env;\n        return configs;\n    }\n\n    /**\n     * @name\n     */\n    get name() { return [ env.window.Document, env.window.ShadowRoot ].some( x => this.host instanceof x ) ? Infinity : this.host.getAttribute( this.configs.CONTEXT_API.attr.contextname ); }\n\n    /**\n     * @subscribed()\n     */\n    subscribed( event ) {}\n\n    /**\n     * @handle()\n     */\n    handle( event ) {}\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) {}\n\n    /**\n     * @matchEvent\n     */\n    matchEvent( event ) {\n        return event.kind === this.constructor.kind\n        && ( !event.targetContext || event.targetContext === this.name );\n    }\n\n    /**\n     * @handleEvent()\n     */\n    handleEvent( event ) {\n        if ( this.disposed || typeof event.respondWith !== 'function'  ) return;\n        if ( event.type === 'contextclaim' ) {\n            if ( !( event.detail instanceof DOMContext ) || event.target === this.host ) return;\n            const claims = new Set;\n            this.subscriptions.forEach( subscriptionEvent => {\n                if ( !event.target.contains( subscriptionEvent.target ) || !event.detail.matchEvent( subscriptionEvent ) ) return;\n                this.subscriptions.delete( subscriptionEvent );\n                this.unsubscribed( subscriptionEvent );\n                claims.add( subscriptionEvent );\n            } );\n            if ( claims.size ) { return event.respondWith( claims ); }\n        }\n        if ( event.type === 'contextrequest' ) {\n            if ( !this.matchEvent( event ) ) return;\n            if ( event.live ) {\n                this.subscriptions.add( event );\n                this.subscribed( event );\n                event.signal?.addEventListener( 'abort', () => {\n                    this.subscriptions.delete( event );\n                    this.unsubscribed( event );\n                } );\n            }\n            event.stopPropagation();\n            return this.handle( event );\n        }\n    }\n\n    /**\n     * @initialize()\n     */\n    initialize( host ) {\n        this.host = host;\n        this.disposed = false;\n        host.addEventListener( 'contextrequest', this );\n        host.addEventListener( 'contextclaim', this );\n        const { value: claims } = DOMContexts.instance( host ).request( 'contextclaim', { kind: this.constructor.kind, detail: this } );\n        claims?.forEach( subscriptionEvent => {\n            this.subscriptions.add( subscriptionEvent );\n            this.subscribed( subscriptionEvent );\n            this.handle( subscriptionEvent );\n        } );\n        return this;\n    }\n     \n    /**\n     * @dispose()\n     */\n    dispose( host ) {\n        this.disposed = true;\n        host.removeEventListener( 'contextrequest', this );\n        host.removeEventListener( 'contextclaim', this );\n        this.subscriptions.forEach( subscriptionEvent => {\n            this.subscriptions.delete( subscriptionEvent );\n            this.unsubscribed( subscriptionEvent );\n            const { target } = subscriptionEvent;\n            subscriptionEvent.meta.answered = false;\n            target.dispatchEvent( subscriptionEvent );\n        } );\n        return this;\n    }\n\n}", "\n/**\n * @imports\n */\nimport DOMContext from '../context-api/DOMContext.js';\nimport { env } from '../util.js';\n\nexport default class DOMNamingContext extends DOMContext {\n\n    static kind = 'namespace';\n\n    /**\n     * @createRequest\n     */\n    static createRequest( detail = null ) {\n        const request = super.createRequest();\n        if ( detail?.startsWith( '@' ) ) {\n            const [ targetContext, ...detail ] = detail.slice( 1 ).split( '/' ).map( s => s.trim() );\n            request.targetContext = targetContext;\n            request.detail = detail.join( '/' );\n        } else { request.detail = detail; }\n        return request;\n    }\n\n    /**\n     * @namespaceObj\n     */\n    get namespaceObj() { return this.host[ this.configs.NAMESPACED_HTML.api.namespace ]; }\n\n    /**\n     * @handle()\n     */\n    handle( event ) {\n        const { window: { webqit: { Observer } } } = env;\n        // Any existing event.meta.controller? Abort!\n        event.meta.controller?.abort();\n\n        // Parse and translate detail\n        if ( !( event.detail || '' ).trim() ) return event.respondWith( Observer.unproxy( this.namespaceObj ) );\n        let path = ( event.detail || '' ).split( '/' ).map( x => x.trim() ).filter( x => x );\n        if ( !path.length ) return event.respondWith();\n        path = path.join( `/${ this.configs.NAMESPACED_HTML.api.namespace }/` )?.split( '/' ) || [];\n\n        event.meta.controller = Observer.reduce( this.namespaceObj, path, Observer.get, descriptor => {\n            if ( this.disposed ) return; // If already scheduled but aborted as in provider unmounting\n            event.respondWith( descriptor.value );\n        }, { live: event.live, signal: event.signal, descripted: true } );\n    }\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) { event.meta.controller?.abort(); }\n}\n", "\n/**\n * @imports\n */\nimport DOMNamingContext from './DOMNamingContext.js';\nimport { _wq, _init, _splitOuter, _fromHash, _toHash, getInternalAttrInteraction, internalAttrInteraction } from '../util.js';\n\n/**\n * @init\n * \n * @param Object $config\n */\nexport default function init($config = {}) {\n\tconst { config, window } = _init.call(this, 'namespaced-html', $config, {\n\t\tattr: { namespace: 'namespace', lid: 'id', },\n\t\tapi: { namespace: 'namespace', },\n\t\ttokens: { lidrefPrefix: '~', lidrefSeparator: ':' },\n\t\ttarget: { className: ':target', eventName: ':target', scrolling: true },\n\t});\n\tconfig.lidSelector = `[${window.CSS.escape(config.attr.lid)}]`;\n\tconfig.namespaceSelector = `[${window.CSS.escape(config.attr.namespace)}]`;\n\twindow.webqit.DOMNamingContext = DOMNamingContext;\n\texposeAPIs.call(window, config);\n\trealtime.call(window, config);\n}\n\n/**\n * @init\n * \n * @param Object config\n * \n * @return String\n */\nfunction lidUtil(config) {\n\tconst { lidrefPrefix, lidrefSeparator, } = config.tokens;\n\treturn {\n\t\tescape(str, mode = 1) { return [...str].map(x => !/\\w/.test(x) ? (mode === 2 ? `\\\\\\\\${x}` : `\\\\${x}`) : x).join(''); },\n\t\tlidrefPrefix(escapeMode = 0) { return escapeMode ? this.escape(lidrefPrefix, escapeMode) : lidrefPrefix; },\n\t\tlidrefSeparator(escapeMode = 0) { return escapeMode ? this.escape(lidrefSeparator, escapeMode) : lidrefSeparator; },\n\t\tisUuid(str, escapeMode = 0) { return str.startsWith(this.lidrefPrefix(escapeMode)) && str.includes(this.lidrefSeparator(escapeMode)); },\n\t\t//isLidref( str, escapeMode = 0 ) { return str.startsWith( this.lidrefPrefix( escapeMode ) ) && !str.includes( this.lidrefSeparator( escapeMode ) ); },\n\t\ttoUuid(hash, lid, escapeMode = 0) { return hash.endsWith('-root') ? lid : `${this.lidrefPrefix(escapeMode)}${hash}${this.lidrefSeparator(escapeMode)}${lid}`; },\n\t\tuuidToId(str, escapeMode = 0) { return this.isUuid(str) ? str.split(this.lidrefSeparator(escapeMode))[1] : str; },\n\t\tuuidToLidref(str, escapeMode = 0) { return this.isUuid(str) ? `${this.lidrefPrefix(escapeMode)}${str.split(this.lidrefSeparator(escapeMode))[1]}` : str; },\n\t}\n}\n\n/**\n * @rewriteSelector\n * \n * @param String selectorText\n * @param String namespaceUUID\n * @param String scopeSelector\n * @param Bool escapeMode\n * \n * @return String\n */\nexport function rewriteSelector(selectorText, namespaceUUID, scopeSelector = null, escapeMode = 0) {\n\tconst window = this, { webqit: { oohtml: { configs: { NAMESPACED_HTML: config } } } } = window;\n\tconst $lidUtil = lidUtil(config);\n\t// Match :scope and relative ID selector\n\tconst regex = new RegExp(`${scopeSelector ? `:scope|` : ''}#(${$lidUtil.lidrefPrefix(escapeMode + 1)})?([\\\\w]+${$lidUtil.lidrefSeparator(escapeMode + 1)})?((?:[\\\\w-]|\\\\\\\\.)+)`, 'g');\n\t// Parse potentially combined selectors individually and categorise into categories per whether they have :scope or not\n\tconst [cat1, cat2] = _splitOuter(selectorText, ',').reduce(([cat1, cat2], selector) => {\n\t\t// The deal: match and replace\n\t\tlet quotesMatch, hadScopeSelector;\n\t\tselector = selector.replace(regex, (match, lidrefPrefixMatch, lidrefSeparatorMatch, id, index) => {\n\t\t\tif (!quotesMatch) { // Lazy: stuff\n\t\t\t\t// Match strings between quotes (single or double) and use that qualify matches above\n\t\t\t\t// The string: String.raw`She said, \"Hello, John. I\\\"m your friend.\" or \"you're he're\" 'f\\'\"j\\'\"f'jfjf`;\n\t\t\t\t// Should yield: `\"Hello, John. I\\\\\"m your friend.\"`, `\"you're he're\"`, `'f\\\\'\"j\\\\'\"f'`\n\t\t\t\tquotesMatch = [...selector.matchAll(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/g)];\n\t\t\t}\n\t\t\t// Qualify match\n\t\t\tif (quotesMatch.some(q => index > q.index && index + match.length < q.index + q[0].length)) return match;\n\t\t\t// Replace :scope\n\t\t\tif (match === ':scope') {\n\t\t\t\thadScopeSelector = true;\n\t\t\t\treturn scopeSelector;\n\t\t\t}\n\t\t\tconst isLidref = lidrefPrefixMatch && !lidrefSeparatorMatch;\n\t\t\tconst isUuid = lidrefPrefixMatch && lidrefSeparatorMatch;\n\t\t\tif (isUuid) {\n\t\t\t\treturn `#${$lidUtil.escape(match.replace('#', ''), 1)}`;\n\t\t\t}\n\t\t\t// Rewrite relative ID selector\n\t\t\tif (isLidref) {\n\t\t\t\tif (config.attr.lid === 'id' && namespaceUUID && !namespaceUUID.endsWith('-root')) {\n\t\t\t\t\treturn `#${$lidUtil.toUuid(namespaceUUID, id, 1)}`;\n\t\t\t\t}\n\t\t\t\t// Fallback to attr-based\n\t\t\t}\n\t\t\t// Rewrite absolute ID selector\n\t\t\tlet rewrite;\n\t\t\tif (config.attr.lid === 'id') {\n\t\t\t\trewrite = `:is(#${id},[id^=\"${$lidUtil.lidrefPrefix(escapeMode)}\"][id$=\"${$lidUtil.lidrefSeparator(escapeMode)}${id}\"])`;\n\t\t\t} else {\n\t\t\t\trewrite = `:is(#${id},[${window.CSS.escape(config.attr.lid)}=\"${id}\"])`;\n\t\t\t}\n\t\t\treturn isLidref ? `:is(${rewrite}):not(${scopeSelector ? scopeSelector + ' ' : ''}${config.namespaceSelector} *)` : rewrite;\n\t\t});\n\t\t// Category 2 has :scope and category 1 does not\n\t\treturn hadScopeSelector ? [cat1, cat2.concat(selector)] : [cat1.concat(selector), cat2];\n\t}, [[], []]);\n\t// Do the upgrade\n\tlet newSelectorText;\n\tif (scopeSelector && cat1.length) {\n\t\tnewSelectorText = [cat1.length > 1 ? `${scopeSelector} :is(${cat1.join(', ')})` : `${scopeSelector} ${cat1[0]}`, cat2.join(', ')].filter(x => x).join(', ');\n\t} else {\n\t\tnewSelectorText = [...cat1, ...cat2].join(', ');\n\t}\n\treturn newSelectorText;\n}\n\n/**\n * @param Element node\n *\n * @return Object\n */\nexport function getOwnNamespaceObject(node) {\n\tconst window = this;\n\tif (!_wq(node).has('namespace')) {\n\t\tconst namespaceObj = Object.create(null);\n\t\t_wq(node).set('namespace', namespaceObj);\n\t\tconst isDocumentRoot = [window.Document, window.ShadowRoot].some(x => node instanceof x);\n\t\tObject.defineProperty(namespaceObj, Symbol.toStringTag, {\n\t\t\tget() {\n\t\t\t\treturn isDocumentRoot ? 'RootNamespaceRegistry' : 'NamespaceRegistry';\n\t\t\t}\n\t\t});\n\t}\n\treturn _wq(node).get('namespace');\n}\n\n/**\n * @param Element node\n * @param Bool forID\n *\n * @return Object\n */\nexport function getOwnerNamespaceObject(node, forID = false) {\n\tconst window = this, { webqit: { oohtml: { configs: { NAMESPACED_HTML: config } } } } = window;\n\tconst isDocumentRoot = [window.Document, window.ShadowRoot].some(x => node instanceof x);\n\treturn getOwnNamespaceObject.call(window, isDocumentRoot ? node : ((forID ? node.parentNode : node)?.closest/*can be documentFragment when Shadow DOM*/?.(config.namespaceSelector) || node.getRootNode()));\n}\n\n/**\n * @param Object namespaceObj\n *\n * @return String\n */\nexport function getNamespaceUUID(namespaceObj) {\n\tconst isDocumentRoot = Object.prototype.toString.call(namespaceObj) === '[object RootNamespaceRegistry]';\n\treturn (_fromHash(namespaceObj) || _toHash(namespaceObj)) + (isDocumentRoot ? '-root' : '');\n}\n\n/**\n * Exposes Namespaced HTML with native APIs.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction exposeAPIs(config) {\n\tconst window = this, { webqit: { Observer } } = window;\n\t// The Namespace API\n\t[window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype].forEach(prototype => {\n\t\t// No-conflict assertions\n\t\tconst type = prototype === window.Document.prototype ? 'Document' : (prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element');\n\t\tif (config.api.namespace in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.namespace}\" API!`); }\n\t\t// Definitions\n\t\tObject.defineProperty(prototype, config.api.namespace, {\n\t\t\tget: function () {\n\t\t\t\treturn Observer.proxy(getOwnNamespaceObject.call(window, this));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Performs realtime capture of elements and builds their relationships.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime(config) {\n\tconst window = this, { webqit: { Observer, realdom, oohtml: { configs }, DOMNamingContext } } = window;\n\n\t// ------------\n\t// APIS\n\t// ------------\n\t// See https://wicg.github.io/aom/aria-reflection-explainer.html & https://github.com/whatwg/html/issues/3515 for the ARIA refelction properties idea\n\t// See https://www.w3.org/TR/wai-aria-1.1/#attrs_relationships for the relational ARIA attributes\n\tconst idRefsAttrs = ['aria-owns', 'aria-controls', 'aria-labelledby', 'aria-describedby', 'aria-flowto',];\n\tconst idRefAttrs = ['for', 'list', 'form', 'aria-activedescendant', 'aria-details', 'aria-errormessage', 'popovertarget'];\n\tconst attrList = [config.attr.lid, ...idRefsAttrs, ...idRefAttrs];\n\tconst relMap = { id: 'id'/* just in case it's in attrList */, for: 'htmlFor', 'aria-owns': 'ariaOwns', 'aria-controls': 'ariaControls', 'aria-labelledby': 'ariaLabelledBy', 'aria-describedby': 'ariaDescribedBy', 'aria-flowto': 'ariaFlowto', 'aria-activedescendant': 'ariaActiveDescendant', 'aria-details': 'ariaDetails', 'aria-errormessage': 'ariaErrorMessage', 'popovertarget': 'popoverTargetElement' };\n\tconst $lidUtil = lidUtil(config);\n\tconst uuidsToLidrefs = (node, attrName, getter) => {\n\t\tif (!getInternalAttrInteraction(node, attrName) && _wq(node, 'attrOriginals').has(attrName)) {\n\t\t\treturn _wq(node, 'attrOriginals').get(attrName);\n\t\t}\n\t\tconst value = getter();\n\t\tif (getInternalAttrInteraction(node, attrName)) return value;\n\t\treturn value && value.split(' ').map(x => (x = x.trim()) && (attrName === config.attr.lid ? $lidUtil.uuidToId : $lidUtil.uuidToLidref).call($lidUtil, x)).join(' ');\n\t};\n\n\t// Intercept getElementById()\n\tconst getElementByIdDescr = Object.getOwnPropertyDescriptor(window.Document.prototype, 'getElementById');\n\tObject.defineProperty(window.Document.prototype, 'getElementById', {\n\t\t...getElementByIdDescr, value(id) {\n\t\t\treturn this.querySelector(`#${id}`); // To be rewritten at querySelector()\n\t\t}\n\t});\n\t// Intercept querySelector() and querySelectorAll()\n\tfor (const queryApi of ['querySelector', 'querySelectorAll']) {\n\t\tfor (const nodeApi of [window.Document, window.Element]) {\n\t\t\tconst querySelectorDescr = Object.getOwnPropertyDescriptor(nodeApi.prototype, queryApi);\n\t\t\tObject.defineProperty(nodeApi.prototype, queryApi, {\n\t\t\t\t...querySelectorDescr, value(selector) {\n\t\t\t\t\treturn querySelectorDescr.value.call(this, rewriteSelector.call(window, selector, getNamespaceUUID(getOwnNamespaceObject.call(window, this))));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t// Intercept getAttribute()\n\tconst getAttributeDescr = Object.getOwnPropertyDescriptor(window.Element.prototype, 'getAttribute');\n\tObject.defineProperty(window.Element.prototype, 'getAttribute', {\n\t\t...getAttributeDescr, value(attrName) {\n\t\t\tconst getter = () => getAttributeDescr.value.call(this, attrName);\n\t\t\treturn attrList.includes(attrName) && !_wq(this, 'lock').get(attrName) ? uuidsToLidrefs(this, attrName, getter) : getter();\n\t\t}\n\t});\n\t// Hide implementation details on the Attr node too.\n\tconst propertyDescr = Object.getOwnPropertyDescriptor(window.Attr.prototype, 'value');\n\tObject.defineProperty(window.Attr.prototype, 'value', {\n\t\t...propertyDescr, get() {\n\t\t\tconst getter = () => propertyDescr.get.call(this);\n\t\t\treturn attrList.includes(this.name) ? uuidsToLidrefs(this.ownerElement, this.name, getter) : getter();\n\t\t}\n\t});\n\tconst propertyDescr2 = Object.getOwnPropertyDescriptor(window.Node.prototype, 'nodeValue');\n\tObject.defineProperty(window.Node.prototype, 'nodeValue', {\n\t\t...propertyDescr2, get() {\n\t\t\tconst getter = () => propertyDescr2.get.call(this);\n\t\t\treturn this instanceof window.Attr && attrList.includes(this.name) ? uuidsToLidrefs(this.ownerElement, this.name, getter) : getter();\n\t\t}\n\t});\n\t// These APIs should return LIDREFS minus the hash part\n\tfor (const attrName of attrList) {\n\t\tif (!(attrName in relMap)) continue;\n\t\tconst domApis = attrName === 'for' ? [window.HTMLLabelElement, window.HTMLOutputElement]\n\t\t\t: (attrName === 'popovertarget' ? [window.HTMLButtonElement, window.HTMLInputElement] : [window.Element]);\n\t\tfor (const domApi of domApis) {\n\t\t\tconst propertyDescr = Object.getOwnPropertyDescriptor(domApi.prototype, relMap[attrName]);\n\t\t\tif (!propertyDescr) continue;\n\t\t\tObject.defineProperty(domApi.prototype, relMap[attrName], {\n\t\t\t\t...propertyDescr, get() {\n\t\t\t\t\tconst getter = () => propertyDescr.get.call(this, attrName);\n\t\t\t\t\treturn uuidsToLidrefs(this, attrName, getter);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tif (config.attr.lid !== 'id') {\n\t\t// Reflect the custom [config.attr.lid] attribute\n\t\tObject.defineProperty(window.Element.prototype, config.attr.lid, {\n\t\t\tconfigurable: true, enumerable: true, get() {\n\t\t\t\treturn this.getAttribute(config.attr.lid);\n\t\t\t}, set(value) {\n\t\t\t\treturn this.setAttribute(config.attr.lid, value);\n\t\t\t}\n\t\t});\n\t}\n\n\t// ------------\n\t// LOCAL IDS & IDREFS\n\t// ------------\n\tconst attrChange = (entry, attrName, value, callback) => {\n\t\treturn internalAttrInteraction(entry, attrName, () => {\n\t\t\tif (typeof value === 'function') value = value();\n\t\t\treturn callback(value);\n\t\t});\n\t};\n\tconst setupBinding = (entry, attrName, value, newNamespaceObj = null) => {\n\t\tattrChange(entry, attrName, value, value => {\n\t\t\tconst isLidAttr = attrName === config.attr.lid;\n\t\t\tconst namespaceObj = newNamespaceObj || getOwnerNamespaceObject.call(window, entry, isLidAttr);\n\t\t\tconst namespaceUUID = getNamespaceUUID(namespaceObj);\n\t\t\tif (isLidAttr) {\n\t\t\t\tconst id = $lidUtil.uuidToId(value);\n\t\t\t\tif (Observer.get(namespaceObj, id) !== entry) {\n\t\t\t\t\tconst uuid = $lidUtil.toUuid(namespaceUUID, id);\n\t\t\t\t\tif (uuid !== value) { entry.setAttribute('id', uuid); }\n\t\t\t\t\tObserver.set(namespaceObj, id, entry);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_wq(entry, 'attrOriginals').set(attrName, value); // Save original before rewrite\n\t\t\t\tconst newAttrValue = value.split(' ').map(idref => (idref = idref.trim()) && $lidUtil.isUuid(idref) ? idref : $lidUtil.toUuid(namespaceUUID, idref)).join(' ');\n\t\t\t\tentry.setAttribute(attrName, newAttrValue);\n\t\t\t\t_wq(namespaceObj).set('idrefs', _wq(namespaceObj).get('idrefs') || new Set);\n\t\t\t\t_wq(namespaceObj).get('idrefs').add(entry);\n\t\t\t}\n\t\t});\n\t};\n\tconst cleanupBinding = (entry, attrName, oldValue, prevNamespaceObj = null) => {\n\t\tattrChange(entry, attrName, oldValue, oldValue => {\n\t\t\tconst isLidAttr = attrName === config.attr.lid;\n\t\t\tconst namespaceObj = prevNamespaceObj || getOwnerNamespaceObject.call(window, entry, isLidAttr);\n\t\t\tif (isLidAttr) {\n\t\t\t\tconst id = $lidUtil.uuidToId(oldValue);\n\t\t\t\tif (Observer.get(namespaceObj, id) === entry) {\n\t\t\t\t\tObserver.deleteProperty(namespaceObj, id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newAttrValue = _wq(entry, 'attrOriginals').get(attrName);// oldValue.split( ' ' ).map( lid => ( lid = lid.trim() ) && $lidUtil.uuidToLidref( lid ) ).join( ' ' );\n\t\t\t\tif (entry.hasAttribute(attrName)) entry.setAttribute(attrName, newAttrValue);\n\t\t\t\t_wq(namespaceObj).get('idrefs')?.delete(entry);\n\t\t\t}\n\t\t});\n\t};\n\n\t// ------------\n\t// NAMESPACE\n\t// ------------\n\trealdom.realtime(window.document).query(config.namespaceSelector, record => {\n\t\tconst reAssociate = (entry, attrName, oldNamespaceObj, newNamespaceObj) => {\n\t\t\tif (!entry.hasAttribute(attrName)) return;\n\t\t\tconst attrValue = () => entry.getAttribute(attrName);\n\t\t\tcleanupBinding(entry, attrName, attrValue/* Current resolved value as-is */, oldNamespaceObj);\n\t\t\tif (entry.isConnected) { setupBinding(entry, attrName, _wq(entry, 'attrOriginals').get(attrName)/* Saved original value */ || attrValue/* Lest it's ID */, newNamespaceObj); }\n\t\t};\n\t\trecord.exits.forEach(entry => {\n\t\t\tif (entry.isConnected) {\n\t\t\t\tconst namespaceObj = getOwnNamespaceObject.call(window, entry);\n\t\t\t\t// Detach ID and IDREF associations\n\t\t\t\tfor (const node of new Set([...Object.values(namespaceObj), ...(_wq(namespaceObj).get('idrefs') || [])])) {\n\t\t\t\t\tfor (const attrName of attrList) { reAssociate(node, attrName, namespaceObj); }\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Detach ID associations\n\t\t\tconst contextsApi = entry[configs.CONTEXT_API.api.contexts];\n\t\t\tconst ctx = contextsApi.find(DOMNamingContext.kind);\n\t\t\t// Detach namespace instance\n\t\t\tif (ctx) { contextsApi.detach(ctx); }\n\t\t});\n\t\trecord.entrants.forEach(entry => {\n\t\t\t// Claim ID and IDREF associations\n\t\t\tlet newSuperNamespaceObj;\n\t\t\tconst superNamespaceObj = getOwnerNamespaceObject.call(window, entry, true);\n\t\t\tfor (const node of new Set([...Object.values(superNamespaceObj), ...(_wq(superNamespaceObj).get('idrefs') || [])])) {\n\t\t\t\tif ((newSuperNamespaceObj = getOwnerNamespaceObject.call(window, node, true)) === superNamespaceObj) continue;\n\t\t\t\tfor (const attrName of attrList) { reAssociate(node, attrName, superNamespaceObj, newSuperNamespaceObj); }\n\t\t\t}\n\t\t\t// Attach namespace instance\n\t\t\tconst contextsApi = entry[configs.CONTEXT_API.api.contexts];\n\t\t\tif (!contextsApi.find(DOMNamingContext.kind)) { contextsApi.attach(new DOMNamingContext); }\n\t\t});\n\t}, { id: 'namespace-html:namespace', live: true, subtree: 'cross-roots', timing: 'sync', staticSensitivity: true, eventDetails: true });\n\n\t// DOM realtime\n\trealdom.realtime(window.document).query(`[${attrList.map(attrName => window.CSS.escape(attrName)).join('],[')}]`, record => {\n\t\t// We do some caching to prevent redundanct lookups\n\t\tconst namespaceNodesToTest = { forID: new Map, forOther: new Map, };\n\t\tfor (const attrName of attrList) {\n\t\t\t// Point to the right cache\n\t\t\tconst _namespaceNodesToTest = attrName === config.attr.lid ? namespaceNodesToTest.forID : namespaceNodesToTest.forOther;\n\t\t\trecord.exits.forEach(entry => {\n\t\t\t\tif (!entry.hasAttribute(attrName)) return;\n\t\t\t\t// Point to the right namespace node\n\t\t\t\tlet namespaceNodeToTest = _namespaceNodesToTest.get(entry);\n\t\t\t\tif (typeof namespaceNodeToTest === 'undefined') {\n\t\t\t\t\tnamespaceNodeToTest = (attrName === config.attr.lid ? entry.parentNode : entry)?.closest/*can be documentFragment when Shadow DOM*/?.(config.namespaceSelector) || entry.getRootNode().host;\n\t\t\t\t\t_namespaceNodesToTest.set(entry, namespaceNodeToTest);\n\t\t\t\t}\n\t\t\t\tif (namespaceNodeToTest && !namespaceNodeToTest.isConnected) return;\n\t\t\t\tcleanupBinding(entry, attrName, () => entry.getAttribute(attrName)/* Current resolved value as-is */);\n\t\t\t});\n\t\t\trecord.entrants.forEach(entry => {\n\t\t\t\tif (!entry.hasAttribute(attrName)) return;\n\t\t\t\tsetupBinding(entry, attrName, () => entry.getAttribute(attrName)/* Raw value (as-is) that will be saved as original */);\n\t\t\t});\n\t\t}\n\t\tnamespaceNodesToTest.forID.clear();\n\t\tnamespaceNodesToTest.forOther.clear();\n\t}, { id: 'namespace-html:attrs', live: true, subtree: 'cross-roots', timing: 'sync' });\n\t// Attr realtime\n\trealdom.realtime(window.document, 'attr').observe(attrList, records => {\n\t\tfor (const record of records) {\n\t\t\tif (record.oldValue && record.value !== record.oldValue) {\n\t\t\t\tcleanupBinding(record.target, record.name, record.oldValue/* Current resolved value as-is */);\n\t\t\t}\n\t\t\tif (record.value && record.value !== record.oldValue) {\n\t\t\t\tsetupBinding(record.target, record.name, record.value/* Raw value (as-is) that will be saved as original */);\n\t\t\t}\n\t\t}\n\t}, { id: 'namespace-html:attr(attrs)', subtree: 'cross-roots', timing: 'sync', newValue: true, oldValue: true });\n\n\t// ------------\n\t// TARGETS\n\t// ------------\n\tlet prevTarget;\n\tconst activateTarget = () => {\n\t\tif (!window.location.hash?.startsWith(`#${$lidUtil.lidrefPrefix()}`)) return;\n\t\tconst path = window.location.hash?.substring(`#${$lidUtil.lidrefPrefix()}`.length).split('/').map(s => s.trim()).filter(s => s) || [];\n\t\tconst currTarget = path.reduce((prev, segment) => prev && prev[config.api.namespace][segment], window.document);\n\t\tif (prevTarget && config.target.className) { prevTarget.classList.toggle(config.target.className, false); }\n\t\tif (currTarget && currTarget !== window.document) {\n\t\t\tif (config.target.className) { currTarget.classList.toggle(config.target.className, true); }\n\t\t\tif (config.target.eventName) { currTarget.dispatchEvent(new window.CustomEvent(config.target.eventName)); }\n\t\t\tif (config.target.scrolling && path.length > 1) { currTarget.scrollIntoView(); }\n\t\t\tprevTarget = currTarget;\n\t\t}\n\t};\n\t// \"hash\" realtime\n\twindow.addEventListener('hashchange', activateTarget);\n\trealdom.ready(activateTarget);\n\t// ----------------\n}\n", "import { resolveParams } from '@webqit/use-live/params';\nimport { _wq, _init, _toHash, _fromHash } from '../util.js';\n\nexport default function init({ advanced = {}, ...$config }) {\n    const { config, window } = _init.call( this, 'scoped-js', $config, {\n        script: { retention: 'retain', mimeTypes: 'module|text/javascript|application/javascript', timing: 'auto' },\n        api: { scripts: 'scripts' },\n        advanced: resolveParams(advanced),\n    } );\n    const customTypes = Array.isArray( config.script.mimeTypes ) ? config.script.mimeTypes : config.script.mimeTypes.split( '|' ).filter( t => t );\n    config.scriptSelector =  customTypes.map( t => `script[type=\"${ window.CSS.escape( t ) }\"]:not([oohtmlignore])` ).concat(`script:not([type])`).join( ',' );\n    window.webqit.oohtml.Script = {\n        compileCache: [ new Map, new Map, ],\n        execute: execute.bind( window, config ),\n    };\n    exposeAPIs.call( window, config );\n    realtime.call( window, config );\n}\n\nfunction exposeAPIs( config ) {\n    const window = this, { webqit: { nextKeyword, matchPrologDirective } } = window;\n    const scriptsMap = new Map;\n    if ( config.api.scripts in window.Element.prototype ) { throw new Error( `The \"Element\" class already has a \"${ config.api.scripts }\" property!` ); }\n    [ window.ShadowRoot.prototype, window.Element.prototype ].forEach( proto => {\n        Object.defineProperty( proto, config.api.scripts, { get: function() {\n            if ( !scriptsMap.has( this ) ) { scriptsMap.set( this, [] ); }\n            return scriptsMap.get( this );\n        }, } );\n    } );\n    Object.defineProperties( window.HTMLScriptElement.prototype, {\n        scoped: {\n            configurable: true,\n            get() { return this.hasAttribute( 'scoped' ); },\n            set( value ) { this.toggleAttribute( 'scoped', value ); },\n        },\n        live: {\n            configurable: true,\n            get() {\n                if (this.liveProgramHandle) return true;\n                const scriptContents = nextKeyword(this.oohtml__textContent || this.textContent || '', 0, 0);\n                return matchPrologDirective(scriptContents, true);\n            },\n        },\n    } );\n}\n\n// Script runner\nasync function execute( config, execHash ) {\n    const window = this, { realdom } = window.webqit;\n    const exec = _fromHash( execHash );\n    if ( !exec ) throw new Error( `Argument must be a valid exec hash.` );\n    const { script, compiledScript, thisContext } = exec;\n    // Honour retention flag\n    if ( config.script.retention === 'dispose' ) {\n        script.remove();\n    } else if ( config.script.retention === 'hidden' ) {\n        script.textContent = `\"source hidden\"`;\n    } else {\n        setTimeout(async () => {\n            script.textContent = await compiledScript.toString();\n        }, 0); //Anti-eval hack\n    }\n    // Execute and save state\n    const varScope = script.scoped ? thisContext : script.getRootNode();\n    if ( !_wq( varScope ).has( 'scriptEnv' ) ) {\n        _wq( varScope ).set( 'scriptEnv', Object.create( null ) );\n    }\n    const liveProgramHandle = await ( await compiledScript.bind( thisContext, _wq( varScope ).get( 'scriptEnv' ) ) ).execute();\n    if ( script.live ) { Object.defineProperty( script, 'liveProgramHandle', { value: liveProgramHandle } ); }\n    realdom.realtime( window.document ).observe( script, () => {\n        if ( script.live ) { liveProgramHandle.abort(); }\n        if ( thisContext instanceof window.Element ) { thisContext[ config.api.scripts ]?.splice( thisContext[ config.api.scripts ].indexOf( script, 1 ) ); }\n    }, { id: 'scoped-js:script-exits', subtree: 'cross-roots', timing: 'sync', generation: 'exits' } );\n}\n\nfunction realtime( config ) {\n    const inBrowser = Object.getOwnPropertyDescriptor( globalThis, 'window' )?.get?.toString().includes( '[native code]' ) ?? false;\n    const window = this, { webqit: { oohtml, realdom } } = window;\n    if ( !window.HTMLScriptElement.supports ) { window.HTMLScriptElement.supports = type => [ 'text/javascript', 'application/javascript' ].includes( type ); }\n    const handled = new WeakSet;\n    realdom.realtime( window.document ).query( config.scriptSelector, record => {\n        record.entrants.forEach( script => {\n            if ( handled.has( script ) || script.hasAttribute('oohtmlno') || (!inBrowser && !script.hasAttribute('ssr')) ) return;\n            // Do compilation\n            const compiledScript = compileScript.call( window, config, script );\n            if ( !compiledScript ) return;\n            handled.add( script );\n            // Run now!!!\n            const thisContext = script.scoped ? script.parentNode || record.target : ( script.type === 'module' ? undefined : window );\n            if ( script.scoped ) { thisContext[ config.api.scripts ].push( script ); }\n            const execHash = _toHash( { script, compiledScript, thisContext } );\n            const manualHandling = record.type === 'query' || ( script.type && !window.HTMLScriptElement.supports( script.type ) ) || script.getAttribute('data-handling') === 'manual';\n            if ( manualHandling || config.script.timing === 'manual' ) { oohtml.Script.execute( execHash ); } else {\n                script.textContent = `webqit.oohtml.Script.execute( '${ execHash }' );`;\n            }\n        } );\n    }, { id: 'scoped-js:script-entries', live: true, subtree: 'cross-roots', timing: 'intercept', generation: 'entrants', eventDetails: true } );\n    // ---\n}\n\nfunction compileScript( config, script ) {\n    const window = this, { webqit: { oohtml, LiveScript, AsyncLiveScript, LiveModule } } = window;\n    \n    let textContent = script.textContent.trim();\n    if ( textContent.startsWith( '/*@oohtml*/if(false){' ) && textContent.endsWith( '}/*@oohtml*/' ) ) {\n        textContent = textContent.slice( 21, -12 );\n        Object.defineProperty( script, 'oohtml__textContent', { value: textContent } );\n    }\n    if ( !textContent.trim().length ) return;\n\n    const sourceHash = _toHash( textContent );\n    const compileCache = oohtml.Script.compileCache[ script.live ? 0 : 1 ];\n    let compiledScript;\n    if ( !( compiledScript = compileCache.get( sourceHash ) ) ) {\n        const { parserParams, compilerParams, runtimeParams } = config.advanced;\n        compiledScript = new ( script.type === 'module' ? LiveModule : ( LiveScript || AsyncLiveScript ) )( textContent, {\n            liveMode: script.live,\n            exportNamespace: `#${ script.id }`,\n            fileName: `${ window.document.url?.split( '#' )?.[ 0 ] || '' }#${ script.id }`,\n            parserParams,\n            compilerParams,\n            runtimeParams,\n        } );\n        compileCache.set( sourceHash, compiledScript );\n    }\n    return compiledScript;\n}\n\nexport function idleCompiler( node ) {\n    const window = this, { webqit: { oohtml: { configs: { SCOPED_JS: config } } } } = window;\n    [ ...( node?.querySelectorAll( config.scriptSelector ) || [] ) ].forEach( script => {\n        compileScript.call( window, config, script );\n    } );\n}", "import { resolveParams } from '@webqit/use-live/params';\nimport { xpathQuery } from '@webqit/realdom/src/realtime/Util.js';\nimport { _wq, _init, _splitOuter } from '../util.js';\n\nexport default function init( $config = {} ) {\n    const { config, window } = _init.call( this, 'data-binding', $config, {\n        attr: { render: 'render', itemIndex: 'data-key' },\n        tokens: { nodeType: 'processing-instruction', tagStart: '?{', tagEnd: '}?', stateStart: '; [=', stateEnd: ']' },\n        advanced: resolveParams({ runtimeParams: { spec: { handler: e => {} } } }),\n    } );\n    ( { CONTEXT_API: config.CONTEXT_API, BINDINGS_API: config.BINDINGS_API, HTML_IMPORTS: config.HTML_IMPORTS } = window.webqit.oohtml.configs );\n    config.attrSelector = `[${ window.CSS.escape( config.attr.render ) }]`;\n    const discreteBindingsMatch = ( start, end ) => {\n        const starting = `starts-with(., \"${ start }\")`;\n        const ending = `substring(., string-length(.) - string-length(\"${ end }\") + 1) = \"${ end }\"`;\n        return `${ starting } and ${ ending }`;\n    }\n    config.discreteBindingsSelector = `comment()[${ discreteBindingsMatch( config.tokens.tagStart, config.tokens.tagEnd ) }]`;\n    realtime.call( window, config );\n}\n\nfunction realtime( config ) {\n    const window = this, { webqit: { realdom } } = window;\n\t// ----------------\n    realdom.realtime( window.document ).query( config.attrSelector, record => {\n        record.exits.forEach(( e ) => {\n            if ( !e.isConnected && e.getAttribute( config.attr.render )?.includes( '@@disconnected' ) ) {\n                e.dispatchEvent( new Event( '@disconnected' ) );\n            }\n        } );\n        cleanup.call( this, ...record.exits );\n        mountInlineBindings.call( window, config, ...record.entrants );\n        queueMicrotask(() => {\n        });\n    }, { id: 'data-binding:attr', live: true, subtree: 'cross-roots', timing: 'sync', eventDetails: true, staticSensitivity: true } );\n    realdom.realtime( window.document ).query( `(${ config.discreteBindingsSelector })`, record => {\n        cleanup.call( this, ...record.exits );\n        mountDiscreteBindings.call( window, config, ...record.entrants );\n        queueMicrotask(() => {\n        });\n    }, { id: 'data-binding:descrete', live: true, subtree: 'cross-roots', timing: 'sync' } );\n}\n\nfunction createDynamicScope( config, root ) {\n    const { webqit: { realdom, Observer, DOMBindingsContext } } = this;\n    if ( _wq( root ).has( 'data-binding' ) ) return _wq( root ).get( 'data-binding' );\n    const scope = Object.create( null ), abortController = new AbortController;\n    scope[ '$exec__' ] = ( target, prop, ...args ) => {\n        const exec = () => {\n            try { target[ prop ]( ...args ); }\n            catch( e ) { throw new Error( `Error executing \"${ prop }()\": ${ e.message } at ${ e.cause }` ); }\n        };\n        exec();\n    };\n    scope[ '$assign__' ] = ( target, prop, val ) => {\n        const exec = () => {\n            try { target[ prop ] = val; }\n            catch( e ) { throw new Error( `Error executing \"${ prop } = ${ val }\": ${ e.message } at ${ e.cause }` ); }\n        };\n        exec();\n    };\n    Observer.intercept( scope, {\n        get: ( e, recieved, next ) => {\n            if ( !( e.key in scope ) ) {\n                const request = { ...DOMBindingsContext.createRequest( e.key ), live: true, signal: abortController.signal };\n                root[ config.CONTEXT_API.api.contexts ].request( request, value => {\n                    Observer.set( scope, e.key, value );\n                } );\n            }\n            return next( scope[ e.key ] ?? ( e.key in globalThis ? globalThis[ e.key ] : undefined ) );\n        },\n        has: ( e, recieved, next ) => { return next( true ); }\n    } );\n    const instance = { scope, abortController, bindings: new Map };\n    _wq( root ).set( 'data-binding', instance );\n    return instance;\n}\n\nfunction cleanup( ...entries ) {\n    for ( const node of entries ) {\n        const root = node.nodeName  === '#text' ? node.parentNode : node;\n        const { bindings, abortController } = _wq( root ).get( 'data-binding' ) || {};\n        if ( !bindings?.has( node ) ) return;\n        bindings.get( node ).liveProgramHandle.abort();\n        bindings.get( node ).signals?.forEach( s => s.abort() );\n        bindings.delete( node );\n        if ( !bindings.size ) {\n            abortController.abort();\n            _wq( root ).delete( 'data-binding' );\n        }\n    }\n}\n\nfunction patternMatch( config, str ) {\n    const tagStart = config.tokens.tagStart.split( '' ).map( x => `\\\\${ x }` ).join( '' );\n    const tagEnd = config.tokens.tagEnd.split( '' ).map( x => `\\\\${ x }` ).join( '' );\n    const stateStart = config.tokens.stateStart.split( '' ).map( x => x === ' ' ? `(?:\\\\s+)?` : `\\\\${ x }` ).join( '' );\n    const stateEnd = config.tokens.stateEnd.split( '' ).map( x => `\\\\${ x }` ).join( '' );\n    const pattern = `^${ tagStart }(.*?)(?:${ stateStart }(\\\\d+)${ stateEnd }(?:\\\\s+)?)?${ tagEnd }$`;\n    const [ /*raw*/, expr, span ] = str.match( new RegExp( pattern ) );\n    return { raw: str, expr, span: parseInt( span ?? 0 ) };\n}\n\nasync function mountDiscreteBindings( config, ...entries ) {\n    const window = this;\n    const instances = entries.reduce( ( instances, node ) => {\n        if ( node.isBound ) return instances;\n        const template = patternMatch( config, node.nodeValue );\n        let textNode = node;\n        if ( template.span ) {\n            textNode = node.nextSibling;\n            if ( textNode?.nodeName !== '#text' || textNode.nodeValue.length < template.span ) return instances;\n            if ( textNode.nodeValue.length > template.span ) { textNode.splitText( template.span ); }\n        } else {\n            textNode = node.ownerDocument.createTextNode( '' );\n            node.after( textNode );\n        }\n        textNode.isBound = true;\n        let anchorNode = node;\n        if ( window.webqit.env !== 'server' ) {\n            anchorNode.remove();\n            anchorNode = null;\n        }\n        return instances.concat( { textNode, template, anchorNode } );\n    }, [] );\n\n    for ( const { textNode, template, anchorNode } of instances ) {\n        const compiled = compileDiscreteBindings.call( window, config, template.expr );\n        const { scope, bindings } = createDynamicScope.call( this, config, textNode.parentNode );\n        Object.defineProperty( textNode, '$oohtml_internal_databinding_anchorNode', { value: anchorNode, configurable: true } );\n        try {\n            bindings.set( textNode, { liveProgramHandle: await ( await compiled.bind( textNode, scope ) ).execute(), } );\n        } catch( e ) {\n            console.log(e);\n        }\n    }\n}\n\nconst discreteParseCache = new Map;\nfunction compileDiscreteBindings( config, str ) {\n    if ( discreteParseCache.has( str ) ) return discreteParseCache.get( str );\n    let source = `let content = ((${ str }) ?? '') + '';`;\n    source += `$assign__(this, 'nodeValue', content);`;\n    source += `if ( this.$oohtml_internal_databinding_anchorNode ) { $assign__(this.$oohtml_internal_databinding_anchorNode, 'nodeValue', \"${ config.tokens.tagStart }${ escDouble( str ) }${ config.tokens.stateStart }\" + content.length + \"${ config.tokens.stateEnd } ${ config.tokens.tagEnd }\"); }`;\n    const { webqit: { LiveScript, AsyncLiveScript } } = this;\n    const { parserParams, compilerParams, runtimeParams } = config.advanced;\n    const compiled = new (LiveScript || AsyncLiveScript)( source, { parserParams, compilerParams, runtimeParams } );\n    discreteParseCache.set( str, compiled );\n    return compiled;\n}\n\nasync function mountInlineBindings( config, ...entries ) {\n    for ( const node of entries ) {\n        const compiled = compileInlineBindings.call( this, config, node.getAttribute( config.attr.render ) );\n        const { scope, bindings } = createDynamicScope.call( this, config, node );\n        const signals = [];\n        Object.defineProperty( node, '$oohtml_internal_databinding_signals', { value: signals, configurable: true } );\n        try {\n            bindings.set( node, { signals, liveProgramHandle: await ( await compiled.bind( node, scope ) ).execute(), } );\n        } catch( e ) {\n            console.log(e);\n        }\n    }\n}\n\nconst inlineParseCache = new Map;\nfunction compileInlineBindings( config, str ) {\n    if ( inlineParseCache.has( str ) ) return inlineParseCache.get( str );\n    const validation = {};\n    let $event_i = -1;\n    const source = _splitOuter( str, ';' ).map( str => {\n        const [ left, right ] = _splitOuter( str, ':' ).map( x => x.trim() );\n        const directive = left[ 0 ], param = left.slice( 1 ).trim();\n        const arg = `(${ right })`, $arg = `(${ arg } ?? '')`;\n        // Functions\n        if ( directive === '$' ) {\n            return `$exec__(this, '${ param }', ${ arg });`;\n        }\n        // CSS\n        if ( directive === '&' ) {\n            if ( param.startsWith( '--' ) ) return `$exec__(this.style, 'setProperty', \"${ escDouble( param ) }\", ${ $arg });`;\n            return `$assign__(this.style, \"${ escDouble( param ) }\", ${ $arg });`;\n        }\n        // Class list\n        if ( directive === '%' ) return `$exec__(this.classList, 'toggle', \"${ escDouble( param ) }\", !!${ arg });`;\n        // Attribute\n        if ( directive === '~' ) {\n            if ( param.startsWith( '?' ) ) return `$exec__(this, 'toggleAttribute', \"${ escDouble( param.substring( 1 ).trim() ) }\", !!${ arg });`;\n            return `$exec__(this, 'setAttribute', \"${ escDouble( param ) }\", ${ $arg });`;\n        }\n        // Structure\n        if ( directive === '#' ) {\n            if ( validation[ param ] ) throw new Error( `Duplicate binding: ${ left }.` );\n            validation[ param ] = true;\n            if ( param === 'text' ) return `$assign__(this, 'textContent', ${ $arg });`;\n            if ( param === 'html' ) return `$assign__(this, 'innerHTML', ${ $arg });`;\n            if ( param === 'items' ) {\n                const [ iterationSpec, importSpec ] = _splitOuter( right, '/' );\n                if ( !importSpec ) throw new Error( `Invalid ${ directive }items spec: ${ str }; no import specifier.` );\n                let [ raw, production, kind, iteratee ] = iterationSpec.trim().match( /(.*?[\\)\\s+])(of|in)([\\(\\{\\[\\s+].*)/i ) || [];\n                if ( !raw ) throw new Error( `Invalid ${ directive }items spec: ${ str }.` );\n                if ( production.startsWith( '(' ) ) {\n                    production = production.trim().slice( 1, -1 ).split( ',' ).map( x => x.trim() );\n                } else { production = [ production ]; }\n                if ( production.length > ( kind === 'in' ? 3 : 2 ) ) throw new Error( `Invalid ${ directive }items spec: ${ str }.` );\n                const indices = kind === 'in' ? production[ 2 ] : ( production[ 1 ] || '$index__' );\n                const src = `\n                let $iteratee__ = ${ iteratee };\n                let $import__ = this.${ config.HTML_IMPORTS.api.import }( ${ importSpec.trim() }, true );\n                this.$oohtml_internal_databinding_signals?.push( $import__ );\n                if ( $import__.value && $iteratee__ ) {\n                    let $existing__ = new Map;\n                    [ ...this.children ].filter( el => el.matches( '[${ config.attr.itemIndex }]' ) ).forEach( x => {\n                        $existing__.set( x.getAttribute( '${ config.attr.itemIndex }' ), x );\n                    } );\n                    ${ indices ? `let ${ indices } = -1;` : '' }\n                    for ( let ${ production[ 0 ] } ${ kind } $iteratee__ ) {\n                        ${ indices ? `${ indices } ++;` : '' }\n                        ${ kind === 'in' && production[ 1 ] ? `let /*value*/${ production[ 1 ] } = $iteratee__[ ${ production[ 0 ] } ];` : '' }\n                        let $itemBinding__ = { ${ production.join( ', ' ) } };\n                        \n                        const $key___ = ( ${ kind === 'in' ? production[ 0 ] : indices } ) + '';\n                        let $itemNode__ = $existing__.get( $key___ );\n                        if ( $itemNode__ ) {\n                            $existing__.delete( $key___ );\n                            $exec__($itemNode__, '${ config.BINDINGS_API.api.bind }', $itemBinding__ );\n                        } else {\n                            $itemNode__ = ( Array.isArray( $import__.value ) ? $import__.value[ 0 ] : ( $import__.value instanceof window.HTMLTemplateElement ? $import__.value.content.firstElementChild : $import__.value ) ).cloneNode( true );\n                            $itemNode__.setAttribute( \"${ config.attr.itemIndex }\", $key___ );\n                            $exec__($itemNode__, '${ config.BINDINGS_API.api.bind }', $itemBinding__ );\n                            $exec__(this, 'appendChild', $itemNode__ );\n                        }\n\n                        if ( ${ kind === 'in' ? `!( ${ production[ 0 ] } in $iteratee__ )` : `typeof ${ production[ 0 ] } === 'undefined'` } ) { $itemNode__.remove(); }\n                    }\n                    $existing__.forEach( x => x.remove() );\n                    $existing__.clear();\n                }`;\n                return src;\n            }\n        }\n        // Events\n        if ( directive === '@' ) {\n            if ( param === '@connected' ) {\n                return `${arg};`;\n            }\n            $event_i++;\n            return `\n                const handler${ $event_i } = event => ${ right.startsWith('{') ? right : arg };\n                this.addEventListener( '${ param }', handler${ $event_i }${ param === '@disconnected' ? ', { once: true }' : '' } );\n                const abort${ $event_i } = () => this.removeEventListener( '${ param }', handler${ $event_i } );\n                this.$oohtml_internal_databinding_signals?.push( { abort: abort${ $event_i } } );\n            `;\n        }\n        if ( str.trim() ) throw new Error( `Invalid binding: ${ str }.` );\n    } ).join( `\\n` );\n    const { webqit: { LiveScript, AsyncLiveScript } } = this;\n    const { parserParams, compilerParams, runtimeParams } = config.advanced;\n    const compiled = new (LiveScript || AsyncLiveScript)( source, { parserParams, compilerParams, runtimeParams } );\n    inlineParseCache.set( str, compiled );\n    return compiled;\n}\n\nconst escDouble = str => str.replace(/\"/g, '\\\\\"');\n\nexport function idleCompiler( node ) {\n    const window = this, { webqit: { oohtml: { configs: { DATA_BINDING: config } } } } = window;\n    // Attr selector must also come first, as in above\n    ( node?.matches( config.attrSelector ) ? [ node ] : [] ).concat([ ...( node?.querySelectorAll( config.attrSelector ) || [] ) ]).forEach( node => {\n        compileInlineBindings.call( window, config, node.getAttribute( config.attr.render ) );\n    } );\n    xpathQuery( window, node, `(${ config.discreteBindingsSelector })` ).forEach( node => {\n        const template = patternMatch( config, node.nodeValue );\n        compileDiscreteBindings.call( window, config, template.expr );\n    } );\n}", "\n/**\n * @imports\n */\nimport DOMContext from '../context-api/DOMContext.js';\nimport { env } from '../util.js';\n\nexport default class DOMBindingsContext extends DOMContext {\n\n    static kind = 'bindings';\n\n    /**\n     * @createRequest\n     */\n    static createRequest( detail = null ) {\n        const request = super.createRequest();\n        if ( detail?.startsWith( '@' ) ) {\n            const [ targetContext, ...detail ] = detail.slice( 1 ).split( '.' ).map( s => s.trim() );\n            request.targetContext = targetContext;\n            request.detail = detail.join( '.' );\n        } else { request.detail = detail; }\n        return request;\n    }\n\n    /**\n     * @bindingsObj\n     */\n    get bindingsObj() { return this.host[ this.configs.BINDINGS_API.api.bindings ]; }\n\n    /**\n     * @matchesEvent\n     */\n    matchEvent( event ) {\n        return super.matchEvent( event )\n        && ( !event.detail || !this.detail || ( Array.isArray( event.detail ) ? event.detail[ 0 ] === this.detail : event.detail === this.detail ) );\n    }\n\n    /**\n     * @handle()\n     */\n    handle( event ) {\n        // Any existing event.meta.controller? Abort!\n        event.meta.controller?.abort();\n        if ( !( event.detail + '' ).trim() ) return event.respondWith( this.bindingsObj );\n        const { window: { webqit: { Observer } } } = env;\n        event.meta.controller = Observer.reduce( this.bindingsObj, Array.isArray( event.detail ) ? event.detail : [ event.detail ], Observer.get, descriptor => {\n            if ( this.disposed ) return; // If already scheduled but aborted as in provider unmounting\n            event.respondWith( descriptor.value );\n        }, { live: event.live, signal: event.signal, descripted: true } );\n    }\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) { event.meta.controller?.abort(); }\n}\n", "\n/**\n * @imports\n */\nimport DOMBindingsContext from './DOMBindingsContext.js';\nimport { _wq, _init, _splitOuter } from '../util.js';\n\n/**\n * @init\n * \n * @param Object $config\n */\nexport default function init( $config = {} ) {\n    const { config, window } = _init.call( this, 'bindings-api', $config, {\n        attr: { bindingsreflection: 'bindings' },\n        api: { bind: 'bind', bindings: 'bindings', },\n    } );\n    window.webqit.DOMBindingsContext = DOMBindingsContext;\n    exposeAPIs.call( window, config );\n    realtime.call(window, config);\n}\n\n/**\n * @Defs\n * \n * The internal bindings object\n * within elements and the document object.\n */\nfunction getBindings( config, node ) {\n    const window = this, { webqit: { Observer, oohtml: { configs: { CONTEXT_API: ctxConfig } } } } = window;\n\tif ( !_wq( node ).has( 'bindings' ) ) {\n\t\tconst bindingsObj = Object.create( null );\n\t\t_wq( node ).set( 'bindings', bindingsObj );\n        Observer.observe( bindingsObj, mutations => {\n            if ( node instanceof window.Element ) {\n                const bindingsParse = parseBindingsAttr( node.getAttribute( config.attr.bindingsreflection ) || '' );\n                const bindingsParseBefore = new Map(bindingsParse);\n                for ( const m of mutations ) {\n                    if ( m.detail?.publish !== false ) {\n                        if ( m.type === 'delete' ) bindingsParse.delete( m.key );\n                        else bindingsParse.set( m.key, undefined );\n                    }\n                }\n                if ( bindingsParse.size && bindingsParse.size !== bindingsParseBefore.size ) {\n                    node.setAttribute( config.attr.bindingsreflection, `{ ${ [ ...bindingsParse.entries() ].map(([ key, value ]) => value === undefined ? key : `${ key }: ${ value }` ).join( ', ' ) } }` );\n                } else if ( !bindingsParse.size ) node.toggleAttribute( config.attr.bindingsreflection, false );\n            } else {\n                const contextsApi = node[ ctxConfig.api.contexts ];\n                for ( const m of mutations ) {\n                    if ( m.type === 'delete' ) {\n                        const ctx = contextsApi.find( DOMBindingsContext.kind, m.key );\n                        if ( ctx ) contextsApi.detach( ctx );\n                    } else if ( !contextsApi.find( DOMBindingsContext.kind, m.key ) ) {\n                        contextsApi.attach( new DOMBindingsContext( m.key ) );\n                    }\n                }\n            }\n        } );\n\t}\n\treturn _wq( node ).get( 'bindings' );\n}\n\n/**\n * Exposes Bindings with native APIs.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction exposeAPIs( config ) {\n\tconst window = this, { webqit: { Observer } } = window;\n    // The Bindings APIs\n    [ window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype ].forEach( prototype => {\n        // No-conflict assertions\n        const type = prototype === window.Document.prototype ? 'Document' : ( prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element' );\n        if ( config.api.bind in prototype ) { throw new Error( `The ${ type } prototype already has a \"${ config.api.bind }\" API!` ); }\n        if ( config.api.bindings in prototype ) { throw new Error( `The ${ type } prototype already has a \"${ config.api.bindings }\" API!` ); }\n        // Definitions\n        Object.defineProperty( prototype, config.api.bind, { value: function( bindings, options = {} ) {\n            return applyBindings.call( window, config, this, bindings, options );\n        } });\n        Object.defineProperty( prototype, config.api.bindings, { get: function() {\n            return Observer.proxy( getBindings.call( window, config, this ) );\n        } } );\n    } );\n}\n\n/**\n * Exposes Bindings with native APIs.\n *\n * @param Object            config\n * @param document|Element  target\n * @param Object            bindings\n * @param Object            params\n *\n * @return Void\n */\nfunction applyBindings( config, target, bindings, { merge, diff, publish, namespace } = {} ) {\n    const window = this, { webqit: { Observer } } = window;\n    const bindingsObj = getBindings.call( this, config, target );\n    const $params = { diff, namespace, detail: { publish } };\n    const exitingKeys = merge ? [] : Object.keys( bindingsObj ).filter( key => !( key in bindings ) );\n    return Observer.batch( bindingsObj, () => {\n        if ( exitingKeys.length ) { Observer.deleteProperties( bindingsObj, exitingKeys, $params ); }\n        return Observer.set( bindingsObj, bindings, $params );\n    }, $params );\n}\n\n/**\n * Performs realtime capture of elements and their attributes\n * and their module query results; then resolves the respective import elements.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime(config) {\n    const window = this, { webqit: { realdom, Observer, oohtml: { configs } } } = window;\n    // ------------\n    const attachBindingsContext = (host, key) => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        if ( !contextsApi.find( DOMBindingsContext.kind, key ) ) {\n            contextsApi.attach( new DOMBindingsContext( key ) );\n        }\n    };\n    const detachBindingsContext = (host, key) => {\n        let ctx, contextsApi = host[configs.CONTEXT_API.api.contexts];\n        while( ctx = contextsApi.find( DOMBindingsContext.kind, key ) ) contextsApi.detach(ctx);\n    };\n    // ------------\n    realdom.realtime(window.document).query( `[${window.CSS.escape(config.attr.bindingsreflection)}]`, record => {\n        record.exits.forEach( entry => detachBindingsContext( entry ) );\n        record.entrants.forEach(entry => {\n            const bindingsParse = parseBindingsAttr( entry.getAttribute( config.attr.bindingsreflection ) || '' );\n            const newData = [ ...bindingsParse.entries() ].filter(([ k, v ]) => v !== undefined );\n            if ( newData.length ) entry[ config.api.bind ]( Object.fromEntries( newData ), { merge: true, publish: false } );\n            for ( const [ key ] of bindingsParse ) {\n                attachBindingsContext( entry, key );\n            }\n        } );\n    }, { id: 'bindings:dom', live: true, subtree: 'cross-roots', timing: 'sync', eventDetails: true });\n\trealdom.realtime( window.document, 'attr' ).observe( config.attr.bindingsreflection, record => {\n        const bindingsObj = getBindings.call( window, config, record.target );\n        const bindingsParse = parseBindingsAttr( record.value || '' );\n        const oldBindings = parseBindingsAttr( record.oldValue || '' );\n        for ( const key of new Set([ ...bindingsParse.keys(), ...oldBindings.keys() ]) ) {\n            if ( !oldBindings.has( key ) ) {\n                if ( bindingsParse.get( key ) !== undefined ) Observer.set( bindingsObj, key, bindingsParse.get( key ), { detail: { publish: false } } );\n                attachBindingsContext( record.target, key );\n            } else if ( !bindingsParse.has( key ) ) {\n                if ( oldBindings.get( key ) !== undefined ) Observer.deleteProperty( bindingsObj, key, { detail: { publish: false } } );\n                detachBindingsContext( record.target, key );\n            } else if ( bindingsParse.get( key ) !== oldBindings.get( key ) ) {\n                Observer.set( bindingsObj, key, bindingsParse.get( key ), { detail: { publish: false } } );\n            }\n        }\n\t}, { id: 'bindings:attr', subtree: 'cross-roots', timing: 'sync', newValue: true, oldValue: true } );\n}\n\nconst parseBindingsAttr = str => {\n    str = str.trim();\n    return new Map(_splitOuter( str.slice(1, -1), ',' ).filter( s => s.trim() ).map( _str => {\n        return _splitOuter( _str, ':' ).map( s => s.trim() );\n    }));\n};\n", "\n/**\n * @imports\n */\nimport { getDefs } from './index.js';\nimport { _wq, env } from '../util.js';\n\nexport default class HTMLModule {\n\n    /**\n     * @instance\n     */\n    static instance(host) {\n        return _wq(host).get('defsmanager::instance') || new this(host);\n    }\n\n    /**\n     * @constructor\n     */\n    constructor(host, parent = null, level = 0) {\n        const { window } = env, { webqit: { realdom, oohtml: { configs } } } = window;\n        _wq(host).get(`defsmanager::instance`)?.dispose();\n        _wq(host).set(`defsmanager::instance`, this);\n        this.window = window;\n        this.host = host;\n        this.config = configs.HTML_IMPORTS;\n        this.parent = parent;\n        this.level = level;\n        this.defs = getDefs(this.host);\n        this.defId = (this.host.getAttribute(this.config.attr.def) || '').trim();\n        this.validateDefId(this.defId);\n        // ----------\n        this.realtimeA = realdom.realtime(this.host.content).children(record => {\n            this.expose(record.exits, false); // Must come first\n            this.expose(record.entrants, true);\n        }, { live: true, timing: 'sync' });\n        // ----------\n        this.realtimeB = realdom.realtime(this.host).attr(['src', 'loading'], (...args) => this.evaluateLoading(...args), {\n            live: true,\n            atomic: true,\n            timing: 'sync',\n            lifecycleSignals: true\n        });\n        // ----------\n        this.realtimeC = this.evalInheritance();\n        // ----------\n    }\n\n    /**\n     * Validates export ID.\n     * \n     * @param String     defId\n     *\n     * @returns Void\n     */\n    validateDefId(defId) {\n        if (['@', '/', '*', '#'].some(token => defId.includes(token))) {\n            throw new Error(`The export ID \"${defId}\" contains an invalid character.`);\n        }\n    }\n\n    /**\n     * Maps module contents as defs.\n     * \n     * @param Array     entries\n     * @param Bool      isConnected\n     *\n     * @returns Void\n     */\n    expose(entries, isConnected) {\n        const { window } = env, { webqit: { Observer } } = window;\n        let dirty, allFragments = this.defs['#'] || [];\n        entries.forEach(entry => {\n            if (!entry || entry.nodeType !== 1) return;\n            const isTemplate = entry.matches(this.config.templateSelector);\n            const defId = (entry.getAttribute(isTemplate ? this.config.attr.def : this.config.attr.fragmentdef) || '').trim();\n            if (isConnected) {\n                if (isTemplate && defId) {\n                    new HTMLModule(entry, this.host, this.level + 1);\n                } else {\n                    allFragments.push(entry);\n                    dirty = true;\n                    if (typeof requestIdleCallback === 'function') {\n                        requestIdleCallback(() => {\n                            this.config.idleCompilers?.forEach(callback => callback.call(this.window, entry));\n                        });\n                    }\n                }\n                if (defId) {\n                    this.validateDefId(defId);\n                    Observer.set(this.defs, (!isTemplate && '#' || '') + defId, entry);\n                }\n            } else {\n                if (isTemplate && defId) { HTMLModule.instance(entry).dispose(); }\n                else {\n                    allFragments = allFragments.filter(x => x !== entry);\n                    dirty = true;\n                }\n                if (defId) Observer.deleteProperty(this.defs, (!isTemplate && '#' || '') + defId);\n            }\n        });\n        if (dirty) Observer.set(this.defs, '#', allFragments);\n    }\n\n    /**\n     * Evaluates remote content loading.\n     *\n     * @param AbortSignal   signal\n     * \n     * @returns Void\n     */\n    evaluateLoading([record1, record2], { signal }) {\n        const { window: { webqit: { Observer } } } = env;\n        const src = (record1.value || '').trim();\n        if (!src) return;\n        let $loadingPromise, loadingPromise = promise => {\n            if (!promise) return $loadingPromise; // Get\n            $loadingPromise = promise.then(() => interception.remove()); // Set\n        };\n        const loading = (record2.value || '').trim();\n        const interception = Observer.intercept(this.defs, 'get', async (descriptor, recieved, next) => {\n            if (loading === 'lazy') { loadingPromise(this.load(src, true)); }\n            await loadingPromise();\n            return next();\n        }, { signal });\n        if (loading !== 'lazy') { loadingPromise(this.load(src)); }\n    }\n\n    /**\n     * Fetches a module's \"src\".\n     *\n     * @param String src\n     *\n     * @return Promise\n     */\n    #fetchedURLs = new Set;\n    #fetchInFlight;\n    load(src) {\n        const { window } = env;\n        if (this.#fetchedURLs.has(src)) {\n            // Cache busting is needed to \n            return Promise.resolve();\n        }\n        this.#fetchedURLs.add(src);\n        if (this.#fetchedURLs.size === 1 && this.host.content.children.length) {\n            return Promise.resolve();\n        }\n        // Ongoing request?\n        this.#fetchInFlight?.controller.abort();\n        // The promise\n        const controller = new AbortController();\n        const fire = (type, detail) => this.host.dispatchEvent(new window.CustomEvent(type, { detail }));\n        const request = window.fetch(src, { signal: controller.signal, element: this.host }).then(response => {\n            return response.ok ? response.text() : Promise.reject(response.statusText);\n        }).then(content => {\n            this.host.innerHTML = content.trim(); // IMPORTANT: .trim()\n            fire('load');\n            return this.host;\n        }).catch(e => {\n            console.error(`Error fetching the bundle at \"${src}\": ${e.message}`);\n            this.#fetchInFlight = null;\n            fire('loaderror');\n            return this.host;\n        });\n        this.#fetchInFlight = { request, controller };\n        return request;\n    }\n\n    /**\n     * Evaluates module inheritance.\n     *\n     * @returns Void|AbortController\n     */\n    evalInheritance() {\n        if (!this.parent) return [];\n        const { window: { webqit: { Observer } } } = env;\n        let extendedId = (this.host.getAttribute(this.config.attr.extends) || '').trim();\n        let inheritedIds = (this.host.getAttribute(this.config.attr.inherits) || '').trim().split(' ').map(id => id.trim()).filter(x => x);\n        const handleInherited = records => {\n            records.forEach(record => {\n                if (Observer.get(this.defs, record.key) !== record.oldValue) return;\n                if (['get'/*initial get*/, 'set', 'def'].includes(record.type)) {\n                    Observer[record.type.replace('get', 'set')](this.defs, record.key, record.value);\n                } else if (record.type === 'delete') {\n                    Observer.deleteProperty(this.defs, record.key);\n                }\n            });\n        };\n        const realtimes = [];\n        const parentDefsObj = getDefs(this.parent);\n        if (extendedId) {\n            realtimes.push(Observer.reduce(parentDefsObj, [extendedId, this.config.api.defs, Infinity], Observer.get, handleInherited, { live: true }));\n        }\n        if (inheritedIds.length) {\n            realtimes.push(Observer.get(parentDefsObj, inheritedIds.includes('*') ? Infinity : inheritedIds, handleInherited, { live: true }));\n        }\n        return realtimes;\n    }\n\n    /**\n     * Disposes the instance and its processes.\n     *\n     * @returns Void\n     */\n    dispose() {\n        this.realtimeA.disconnect();\n        this.realtimeB.disconnect();\n        this.realtimeC.forEach(r => (r instanceof Promise ? r.then(r => r.abort()) : r.abort()));\n        Object.entries(this.defs).forEach(([key, entry]) => {\n            if (key.startsWith('#')) return;\n            HTMLModule.instance(entry).dispose();\n        });\n    }\n}\n", "\n/**\n * @imports\n */\nimport DOMContext from '../context-api/DOMContext.js';\nimport { getDefs } from './index.js';\nimport { env } from '../util.js';\n\nexport default class HTMLImportsContext extends DOMContext {\n\n    /**\n     * @kind\n     */\n    static kind = 'html-imports';\n\n    /**\n     * @createRequest\n     */\n    static createRequest(detail = null) {\n        const request = super.createRequest();\n        if (detail?.startsWith('/')) {\n            request.detail = detail;\n            request.targetContext = Infinity;\n        } else if (detail?.startsWith('@')) {\n            const [targetContext, ..._detail] = detail.slice(1).split(/(?<=\\w)(?=\\/|#)/).map(s => s.trim());\n            request.targetContext = targetContext;\n            request.detail = _detail.join('');\n        } else { request.detail = detail; }\n        return request;\n    }\n\n    /**\n     * @localModules\n     */\n    get localModules() { return getDefs(this.host); }\n    get inheritedModules() { return this.#inheritedModules; }\n    #inheritedModules = {};\n\n    /**\n     * @handle()\n     */\n\n    handle(event) {\n        const { window: { webqit: { Observer } } } = env;\n        // Any existing event.meta.controller? Abort!\n        event.meta.controller?.abort();\n        // Parse and translate detail\n        let path = (event.detail || '').split(/\\/|(?<=\\w)(?=#)/g).map(x => x.trim()).filter(x => x);\n        if (!path.length) return event.respondWith();\n        path = path.join(`/${this.configs.HTML_IMPORTS.api.defs}/`)?.split('/').map(x => x === '*' ? Infinity : x) || [];\n        // We'll now fulfill request\n        const options = { live: event.live, sig_nal: event.signal, descripted: true };\n        event.meta.controller = Observer.reduce(this.#modules, path, Observer.get, (m) => {\n            if (Array.isArray(m)) {\n                if (!m.length) {\n                    event.respondWith();\n                    return;\n                }\n                // Paths with wildcard\n                for (const n of m) {\n                    event.respondWith(n);\n                }\n            } else {\n                event.respondWith(m.value);\n            }\n        }, options);\n    }\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed(event) { event.meta.controller?.abort(); }\n\n    /**\n     * @initialize()\n     */\n    #modules;\n    #controller1;\n    #controller2;\n    initialize(host) {\n        this.host = host;\n        const { window: { webqit: { Observer } } } = env;\n        // ----------------\n        // Resolve\n        const resolve = () => {\n            for (const key of new Set([...Object.keys(this.localModules), ...Object.keys(this.inheritedModules), ...Object.keys(this.#modules)])) {\n                if (!Observer.has(this.localModules, key) && !Observer.has(this.inheritedModules, key)) {\n                    Observer.deleteProperty(this.#modules, key);\n                } else if (key === '#' && Observer.has(this.localModules, key) && Observer.has(this.inheritedModules, key)) {\n                    Observer.set(this.#modules, key, [...Observer.get(this.localModules, key), ...Observer.get(this.inheritedModules, key)]);\n                } else {\n                    const _module = Observer.get(this.localModules, key) || Observer.get(this.inheritedModules, key);\n                    if (Observer.get(this.#modules, key) !== _module) {\n                        Observer.set(this.#modules, key, _module);\n                    }\n                }\n            }\n        };\n        // ----------------\n        // Observe local\n        this.#modules = { ...this.localModules };\n        this.#controller1?.abort();\n        this.#controller1 = Observer.observe(this.localModules, () => resolve('local'), { timing: 'sync' });\n        // ----------------\n        // If host has importscontext attr, compute that\n        const $config = this.configs.HTML_IMPORTS;\n        if (this.host.matches && $config.attr.importscontext) {\n            const realdom = this.host.ownerDocument.defaultView.webqit.realdom;\n            let prevRef;\n            this.#controller2?.disconnect();\n            this.#controller2 = realdom.realtime(this.host).attr($config.attr.importscontext, (record, { signal }) => {\n                const moduleRef = (record.value || '').trim();\n                prevRef = moduleRef;\n                // This superModules contextrequest is automatically aborted by the injected signal below\n                this.#inheritedModules = {};\n                const request = { ...this.constructor.createRequest(moduleRef ? `${moduleRef}/*` : '*'), live: true, signal, diff: true };\n                this.host.parentNode[this.configs.CONTEXT_API.api.contexts].request(request, (m) => {\n                    if (!m) {\n                        this.#inheritedModules = {};\n                        resolve('inherited');\n                    } else if (m.type === 'delete') {\n                        delete this.#inheritedModules[m.key];\n                        if (!Reflect.has(this.localModules, m.key)) {\n                            Observer.deleteProperty(this.#modules, m.key);\n                        }\n                    } else {\n                        this.#inheritedModules[m.key] = m.value;\n                        if (!Reflect.has(this.localModules, m.key) && Reflect.get(this.#modules, m.key) !== m.value) {\n                            Observer.set(this.#modules, m.key, m.value);\n                        }\n                    }\n                });\n                resolve('inherited');\n            }, { live: true, timing: 'sync', oldValue: true, lifecycleSignals: true });\n        }\n        // ----------------\n        return super.initialize(host);\n    }\n\n    /**\n     * @dispose()\n     */\n    dispose(host) {\n        // Stop listening for sources\n        this.#controller1?.abort();\n        this.#controller2?.disconnect();\n        // Now, stop listening for contextrequest and contextclaim events\n        // And relinquish own subscribers to owner context\n        return super.dispose(host);\n    }\n}\n", "\n/**\n * @imports\n */\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport { _wq, env } from '../util.js';\n\n/**\n * Creates the HTMLImportElement class.\n * \n * @param Object config \n * \n * @return HTMLImportElement\n */\nexport default function () {\n    const { window } = env, { webqit } = window, { realdom, oohtml: { configs } } = webqit;\n    if (webqit.HTMLImportElement) return webqit.HTMLImportElement;\n    const BaseElement = configs.HTML_IMPORTS.elements.import.includes('-') ? window.HTMLElement : class { };\n    class HTMLImportElement extends BaseElement {\n\n        /**\n         * @instance\n         * \n         * @param HTMLElement node\n         * \n         * @returns \n         */\n        static instance(node) {\n            if (configs.HTML_IMPORTS.elements.import.includes('-') && (node instanceof this)) return node;\n            return _wq(node).get('import::instance') || new this(node);\n        }\n\n        /**\n         * @constructor\n         */\n        constructor(...args) {\n            super();\n            // --------\n            const el = args[0] || this;\n            _wq(el).set('import::instance', this);\n            Object.defineProperty(this, 'el', { get: () => el, configurable: false });\n\n            const priv = {};\n            Object.defineProperty(this, '#', { get: () => priv, configurable: false });\n            priv.slottedElements = new Set;\n\n            priv.setAnchorNode = anchorNode => {\n                priv.anchorNode = anchorNode;\n                return anchorNode;\n            };\n\n            priv.live = callback => {\n                if (priv.liveImportsRealtime) throw new Error(`Import element already in live mode.`);\n                const parentNode = this.el.isConnected ? this.el.parentNode : priv.anchorNode.parentNode;\n                priv.liveImportsRealtime = realdom.realtime(this.el).attr(configs.HTML_IMPORTS.attr.ref, (record, { signal }) => {\n                    priv.moduleRef = record.value;\n                    const moduleRef = priv.moduleRef.includes('#') ? priv.moduleRef : `${priv.moduleRef}#`/* for live children */;\n                    const request = { ...HTMLImportsContext.createRequest(moduleRef), live: signal && true, signal, diff: !moduleRef.endsWith('#') };\n                    parentNode[configs.CONTEXT_API.api.contexts].request(request, response => {\n                        callback((response instanceof window.HTMLTemplateElement ? [...response.content.children] : (\n                            Array.isArray(response) ? response : response && [response]\n                        )) || []);\n                    });\n                }, { live: true, timing: 'sync', lifecycleSignals: true });\n                priv.autoDestroyRealtime = realdom.realtime(window.document).track(parentNode, () => {\n                    priv.die();\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' });\n            };\n\n            priv.die = () => {\n                priv.autoDestroyRealtime?.disconnect();\n                priv.liveImportsRealtime?.disconnect();\n                priv.liveImportsRealtime = null;\n            };\n\n            priv.hydrate = (anchorNode, slottedElements) => {\n                anchorNode.replaceWith(priv.setAnchorNode(this.createAnchorNode()));\n                priv.live(fragments => {\n                    // The default action\n                    if (priv.originalsRemapped) return this.fill(fragments);\n                    // Initial remap action\n                    const identifiersMap = fragments.map((fragment, i) => ({ el: fragment, fragmentDef: fragment.getAttribute(configs.HTML_IMPORTS.attr.fragmentdef) || '', tagName: fragment.tagName, i }));\n                    slottedElements.forEach((slottedElement, i) => {\n                        const tagName = slottedElement.tagName, fragmentDef = slottedElement.getAttribute(configs.HTML_IMPORTS.attr.fragmentdef) || '';\n                        const originalsMatch = (i++, identifiersMap.find(fragmentIdentifiers => fragmentIdentifiers.tagName === tagName && fragmentIdentifiers.fragmentDef === fragmentDef && fragmentIdentifiers.i === i));\n                        if (originalsMatch) _wq(slottedElement).set('original@imports', originalsMatch.el); // Or should we throw integrity error here?\n                        _wq(slottedElement).set('slot@imports', this.el);\n                        priv.slottedElements.add(slottedElement);\n                    });\n                    priv.originalsRemapped = true;\n                });\n            };\n\n            priv.autoRestore = (callback = null) => {\n                priv.autoRestoreRealtime?.disconnect();\n                if (callback) callback();\n                const restore = () => {\n                    if (this.el.isConnected) return;\n                    this.el.setAttribute('data-nodecount', 0);\n                    priv.internalMutation = true;\n                    priv.anchorNode.replaceWith(this.el);\n                    priv.internalMutation = false;\n                    priv.setAnchorNode(null);\n                };\n                if (!priv.slottedElements.size) return restore();\n                const autoRestoreRealtime = realdom.realtime(priv.anchorNode.parentNode).observe([...priv.slottedElements], record => {\n                    record.exits.forEach(outgoingNode => {\n                        _wq(outgoingNode).delete('slot@imports');\n                        priv.slottedElements.delete(outgoingNode);\n                    });\n                    if (!priv.slottedElements.size) {\n                        autoRestoreRealtime.disconnect();\n                        // At this point, ignore if this is a removal involving the whole parent node\n                        if (!record.target.isConnected) return;\n                        restore();\n                    }\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' });\n                priv.autoRestoreRealtime = autoRestoreRealtime;\n            };\n\n            priv.connectedCallback = () => {\n                if (priv.internalMutation) return;\n                priv.live(fragments => this.fill(fragments));\n            };\n\n            priv.disconnectedCallback = () => {\n                if (priv.internalMutation) return;\n                priv.die();\n            };\n        }\n\n        /**\n         * Creates the slot's anchor node.\n         *\n         * @return Element\n         */\n        createAnchorNode() {\n            if (window.webqit.env !== 'server') { return window.document.createTextNode('') }\n            const escapeElement = window.document.createElement('div');\n            escapeElement.textContent = this.el.outerHTML;\n            const anchorNode = window.document.createComment(escapeElement.innerHTML);\n            _wq(anchorNode).set('isAnchorNode', true);\n            return anchorNode;\n        }\n\n        /**\n         * Fills the slot with slottableElements\n         *\n         * @param Iterable  slottableElements\n         *\n         * @return void\n         */\n        fill(slottableElements, r) {\n            if (!this.el.isConnected && (!this['#'].anchorNode || !this['#'].anchorNode.isConnected)) {\n                // LiveImports must be responding to an event that just removed the subtree from DOM\n                return;\n            }\n            if (Array.isArray(slottableElements)) { slottableElements = new Set(slottableElements) }\n            // This state must be set before the diffing below and the serialization done at createAnchorNode()\n            this.el.setAttribute('data-nodecount', slottableElements.size);\n            this['#'].autoRestore(() => {\n                this['#'].slottedElements.forEach(slottedElement => {\n                    const slottedElementOriginal = _wq(slottedElement).get('original@imports');\n                    // If still available in source, simply leave unchanged\n                    // otherwise remove it from slot... to reflect this change\n                    if (slottableElements.has(slottedElementOriginal)) {\n                        slottableElements.delete(slottedElementOriginal);\n                    } else {\n                        this['#'].slottedElements.delete(slottedElement);\n                        // This removal will not be caught\n                        slottedElement.remove();\n                    }\n                });\n                // Make sure anchor node is what's in place...\n                // not the import element itslef - but all only when we have slottableElements.size\n                if (slottableElements.size && this.el.isConnected) {\n                    const newAnchorNode = this['#'].setAnchorNode(this.createAnchorNode());\n                    this['#'].internalMutation = true;\n                    this.el.replaceWith(newAnchorNode);\n                    this['#'].internalMutation = false;\n                }\n                // Insert slottables now\n                slottableElements.forEach(slottableElement => {\n                    // Clone each slottable element and give it a reference to its original\n                    const slottableElementClone = slottableElement.cloneNode(true);\n                    // The folllowing references must be set before adding to DODM\n                    if (!slottableElementClone.hasAttribute(configs.HTML_IMPORTS.attr.fragmentdef)) {\n                        slottableElementClone.toggleAttribute(configs.HTML_IMPORTS.attr.fragmentdef, true);\n                    }\n                    _wq(slottableElementClone).set('original@imports', slottableElement);\n                    _wq(slottableElementClone).set('slot@imports', this.el);\n                    this['#'].slottedElements.add(slottableElementClone);\n                    this['#'].anchorNode.before(slottableElementClone);\n                });\n            });\n        }\n\n        /**\n         * Empty slot.\n         *\n         * @return void\n         */\n        empty() { this['#'].slottedElements.forEach(slottedElement => slottedElement.remove()); }\n\n        /**\n         * Returns the slot's anchorNode.\n         *\n         * @return array\n         */\n        get anchorNode() { return this['#'].anchorNode; }\n\n        /**\n         * Returns the slot's module reference, if any.\n         *\n         * @return string\n         */\n        get moduleRef() { return this['#'].moduleRef; }\n\n        /**\n         * Returns the slot's slotted elements.\n         *\n         * @return array\n         */\n        get slottedElements() { return this['#'].slottedElements; }\n    }\n    if (configs.HTML_IMPORTS.elements.import.includes('-')) { customElements.define(configs.HTML_IMPORTS.elements.import, HTMLImportElement); }\n    webqit.HTMLImportElement = HTMLImportElement;\n    return HTMLImportElement;\n}", "\n/**\n * @imports\n */\nimport HTMLModule from './HTMLModule.js';\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport _HTMLImportElement from './_HTMLImportElement.js';\nimport { _wq, _init } from '../util.js';\n\n/**\n * Initializes HTML Modules.\n * \n * @param $config  Object\n *\n * @return Void\n */\nexport default function init($config = {}) {\n    const { config, window } = _init.call(this, 'html-imports', $config, {\n        elements: { import: 'import', },\n        attr: { def: 'def', extends: 'extends', inherits: 'inherits', ref: 'ref', importscontext: 'importscontext', },\n        api: { def: 'def', defs: 'defs', import: 'import' },\n    });\n    if (!config.attr.fragmentdef) { config.attr.fragmentdef = config.attr.def; }\n    config.templateSelector = `template[${window.CSS.escape(config.attr.def)}]`;\n    config.importsContextSelector = `[${window.CSS.escape(config.attr.importscontext)}]`;\n    config.slottedElementsSelector = `[${window.CSS.escape(config.attr.fragmentdef)}]:not(template)`;\n    const anchorNodeMatch = (start, end) => {\n        const starting = `starts-with(., \"${start}\")`;\n        const ending = `substring(., string-length(.) - string-length(\"${end}\") + 1) = \"${end}\"`;\n        return `${starting} and ${ending}`;\n    }\n    config.anchorNodeSelector = `comment()[${anchorNodeMatch(`&lt;${config.elements.import}`, `&lt;/${config.elements.import}&gt;`)}]`;\n    window.webqit.HTMLImportsContext = HTMLImportsContext;\n    window.webqit.HTMLImportElement = _HTMLImportElement();\n    exposeAPIs.call(window, config);\n    realtime.call(window, config);\n}\n\n/**\n * Returns the \"defs\" object associated with the given node.\n *\n * @param Element       node\n * @param Bool          autoCreate\n *\n * @return Object\n */\nexport function getDefs(node, autoCreate = true) {\n    if (!_wq(node).has('defs') && autoCreate) {\n        const defs = Object.create(null);\n        _wq(node).set('defs', defs);\n    }\n    return _wq(node).get('defs');\n}\n\n/**\n * Exposes HTML Modules with native APIs.\n *\n * @param Object        config\n *\n * @return Void\n */\nfunction exposeAPIs(config) {\n    const window = this, { webqit: { oohtml: { configs } } } = window;\n    // The \"def\" & \"defs\" properties\n    if (config.api.def in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.def}\" API!`); }\n    if (config.api.defs in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.defs}\" API!`); }\n    // No-conflict assertions\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.def, {\n        get: function () {\n            return this.getAttribute(config.attr.def);\n        }\n    });\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.defs, {\n        get: function () {\n            return getDefs(this);\n        }\n    });\n    // The \"scoped\" property\n    Object.defineProperty(window.HTMLTemplateElement.prototype, 'scoped', {\n        configurable: true,\n        get() { return this.hasAttribute('scoped'); },\n        set(value) { this.toggleAttribute('scoped', value); },\n    });\n    // The Import API\n    [window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype].forEach(prototype => {\n        // No-conflict assertions\n        const type = prototype === window.Document.prototype ? 'Document' : (prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element');\n        if (config.api.import in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.import}\" API!`); }\n        if (config.api.defs in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.defs}\" API!`); }\n        // Definitions\n        Object.defineProperty(prototype, config.api.defs, {\n            get: function () {\n                return getDefs(this);\n            }\n        });\n        Object.defineProperty(prototype, config.api.import, {\n            value: function (ref, live = false, callback = null) {\n                return importRequest(this, ...arguments);\n            }\n        });\n    });\n    function importRequest(context, ref, live = false, callback = null) {\n        let options = {};\n        if (typeof live === 'function') {\n            callback = live;\n            live = false;\n        } else if (typeof live === 'object' && live) {\n            options = { ...live, ...options };\n        } else { options = { live }; }\n        const request = { ...HTMLImportsContext.createRequest(ref), ...options };\n        return context[configs.CONTEXT_API.api.contexts].request(request, callback);\n    }\n}\n\n/**\n * Performs realtime capture of elements and their attributes\n * and their module query results; then resolves the respective import elements.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime(config) {\n    const window = this, { webqit: { Observer, realdom, oohtml: { configs }, HTMLImportElement, HTMLImportsContext } } = window;\n\n    // ------------\n    // MODULES\n    // ------------\n    const attachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        if (!contextsApi.find(HTMLImportsContext.kind)) {\n            contextsApi.attach(new HTMLImportsContext);\n        }\n    };\n    const detachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        const ctx = contextsApi.find(HTMLImportsContext.kind);\n        if (ctx && ( /* disconnect? */!host.isConnected || /* not inheriting && no localModules? */(\n            !host.matches?.(config.importsContextSelector) && !Object.keys(ctx.localModules).length\n        ))) {\n            contextsApi.detach(ctx);\n        }\n    };\n    // ------------\n    realdom.realtime(window.document).query([config.templateSelector, config.importsContextSelector], record => {\n        record.entrants.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                htmlModule.ownerContext = entry.scoped ? entry.parentNode : entry.getRootNode();\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId) { Observer.set(ownerContextModulesObj, htmlModule.defId, entry); }\n                // The ownerContext's defs - ownerContextModulesObj - has to be populated\n                // Before attaching a context instance to it, to give the just created context something to use for\n                // fullfiling reclaimed requests.\n                attachImportsContext(htmlModule.ownerContext);\n            } else {\n                attachImportsContext(entry);\n            }\n        });\n        record.exits.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                //if (!htmlModule.ownerContext) return; // JSDOM sometimes\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId && htmlModule.ownerContext.isConnected) { Observer.deleteProperty(ownerContextModulesObj, htmlModule.defId); }\n                detachImportsContext(htmlModule.ownerContext);\n            } else {\n                detachImportsContext(entry);\n            }\n        });\n    }, { id: 'imports:template/importscontext', live: true, subtree: 'cross-roots', timing: 'sync', staticSensitivity: true, eventDetails: true });\n\n    // ------------\n    // IMPORTS\n    // ------------\n    realdom.realtime(window.document).query(config.elements.import, record => {\n        record.entrants.forEach(node => handleRealtime(node, true, record));\n        record.exits.forEach(node => handleRealtime(node, false, record));\n    }, { id: 'imports:import', live: true, subtree: 'cross-roots', timing: 'sync', deferred: true });\n    function handleRealtime(entry, connectedState) {\n        const elInstance = HTMLImportElement.instance(entry);\n        if (connectedState) { elInstance['#'].connectedCallback(); }\n        else { elInstance['#'].disconnectedCallback(); }\n    }\n    // Hydration\n    if (window.webqit.env === 'server') return;\n    realdom.realtime(window.document).query(`(${config.anchorNodeSelector})`, record => {\n        record.entrants.forEach(anchorNode => {\n            if (_wq(anchorNode).get('isAnchorNode')) return; // Doubling up on the early return above! Ignoring every just created anchorNode\n            const reviver = window.document.createElement('div');\n            reviver.innerHTML = anchorNode.nodeValue;\n            reviver.innerHTML = reviver.firstChild.textContent;\n            const importEl = reviver.firstChild;\n            let nodecount = parseInt(importEl.getAttribute('data-nodecount'));\n            const slottedElements = new Set;\n            let slottedElement = anchorNode;\n            while ((slottedElement = slottedElement.previousElementSibling) && slottedElement.matches(config.slottedElementsSelector) && nodecount--) {\n                slottedElements.add(slottedElement);\n            }\n            HTMLImportElement.instance(importEl)['#'].hydrate(anchorNode, slottedElements);\n        });\n    }, { id: 'imports:hydration', live: true, subtree: 'cross-roots', timing: 'sync' });\n}", "\n/**\n * @imports\n */\nimport DOMContexts from './DOMContexts.js';\nimport DOMContext from './DOMContext.js';\nimport _DOMContextRequestEvent from './_DOMContextRequestEvent.js';\nimport DOMContextResponse from './DOMContextResponse.js';\nimport DuplicateContextError from './DuplicateContextError.js';\nimport { _init } from '../util.js';\n\n/**\n * Initializes HTML Modules.\n * \n * @param $config  Object\n *\n * @return Void\n */\nexport default function init( $config = {} ) {\n    const { config, window } = _init.call( this, 'context-api', $config, {\n        elements: { roots: 'root,webflo-embedded', },\n        attr: { contextname: 'contextname', },\n        api: { contexts: 'contexts', },\n    } );\n    const waitListMappings = new Map, dispatchEvent = window.EventTarget.prototype.dispatchEvent;\n    Object.defineProperty( window.EventTarget.prototype, 'dispatchEvent', { value: function( ...args ) {\n        const event = args[0], rootNode = this?.closest?.(config.elements.roots) || this.getRootNode?.();\n        if ( [ 'contextclaim', 'contextrequest' ].includes( event.type ) && rootNode ) {\n            if ( event.meta ) event.meta.target = this;\n            const temp = (event) => {\n                event.stopImmediatePropagation();\n                // Always set this whether answered or not\n                if ( event.meta ) event.meta.target = event.target;\n                if ( event.answered ) return;\n                if ( !waitListMappings.get( rootNode ) ) waitListMappings.set( rootNode, new Set );\n                if ( event.type === 'contextrequest' && event.live ) {\n                    waitListMappings.get( rootNode ).add( event );\n                } else if ( event.type === 'contextclaim' ) {\n                    const claims = new Set;\n                    waitListMappings.get( rootNode ).forEach( subscriptionEvent => {\n                        if ( !event.target.contains( subscriptionEvent.target ) || !event.detail?.matchEvent?.( subscriptionEvent ) ) return;\n                        waitListMappings.get( rootNode ).delete( subscriptionEvent );\n                        claims.add( subscriptionEvent );\n                    } );\n                    if ( !waitListMappings.get( rootNode ).size ) waitListMappings.delete( rootNode );\n                    return event.respondWith?.( claims );\n                }\n            };\n            rootNode.addEventListener( event.type, temp );\n            const returnValue = dispatchEvent.call( this, ...args );\n            rootNode.removeEventListener( event.type, temp );\n            return returnValue;\n        }\n        return dispatchEvent.call( this, ...args );\n    } } );\n    window.webqit.DOMContexts = DOMContexts;\n    window.webqit.DOMContext = DOMContext;\n    window.webqit.DOMContextRequestEvent = _DOMContextRequestEvent();\n    window.webqit.DOMContextResponse = DOMContextResponse;\n    window.webqit.DuplicateContextError = DuplicateContextError;\n    exposeAPIs.call( window, config );\n}\n\n/**\n * Exposes HTML Modules with native APIs.\n *\n * @param Object                    config\n *\n * @return Void\n */\nfunction exposeAPIs( config ) {\n    const window = this;\n    [ window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype ].forEach( prototype => {\n        // No-conflict assertions\n        const type = prototype === window.Document.prototype ? 'Document' : ( prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element' );\n        if ( config.api.contexts in prototype ) { throw new Error( `The ${ type } prototype already has a \"${ config.api.contexts }\" API!` ); }\n        // Definitions\n        Object.defineProperty( prototype, config.api.contexts, { get: function() {\n            return DOMContexts.instance( this );\n        } } );\n    } );\n}\n", "\n/**\n * @imports\n */\nimport { rewriteSelector, getOwnerNamespaceObject, getNamespaceUUID } from '../namespaced-html/index.js';\nimport { _init, _toHash } from '../util.js';\n\n/**\n * @init\n * \n * @param Object $config\n */\nexport default function init({ advanced = {}, ...$config }) {\n    const { config, window } = _init.call( this, 'scoped-css', $config, {\n        api: { styleSheets: 'styleSheets' },\n        style: { retention: 'retain', mimeTypes: 'text/css', strategy: null },\n    } );\n    config.styleSelector = (Array.isArray( config.style.mimeTypes ) ? config.style.mimeTypes : config.style.mimeTypes.split( '|' ) ).concat( '' ).reduce( ( selector, mm ) => {\n        const qualifier = mm ? `[type=\"${ window.CSS.escape( mm ) }\"]` : ':not([type])';\n        return selector.concat( `style${ qualifier }` );\n    }, [] ).join( ',' );\n    window.webqit.oohtml.Style = {\n        compileCache: new Map,\n    };\n    exposeAPIs.call( window, config );\n    realtime.call( window, config );\n}\n\n/**\n * Exposes Bindings with native APIs.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction exposeAPIs( config ) {\n    const window = this, styleSheetsMap = new Map;\n    // The \"styleSheets\" API\n    [ window.Element.prototype ].forEach( prototype => {\n        // No-conflict assertions\n        const type = 'Element';\n        if ( config.api.styleSheets in prototype ) { throw new Error( `The ${ type } prototype already has a \"${ config.api.styleSheets }\" API!` ); }\n        // Definitions\n        Object.defineProperty( prototype, config.api.styleSheets, { get: function() {\n            if ( !styleSheetsMap.has( this ) ) { styleSheetsMap.set( this, [] ); }\n            return styleSheetsMap.get( this );\n        }, } );\n    } );\n    // The HTMLStyleElement \"scoped\" property\n    Object.defineProperty( window.HTMLStyleElement.prototype, 'scoped', {\n        configurable: true,\n        get() { return this.hasAttribute( 'scoped' ); },\n        set( value ) { this.toggleAttribute( 'scoped', value ); },\n    } );\n}\n\n/**\n * Performs realtime capture of elements and builds their relationships.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime( config ) {\n    const window = this, { webqit: { oohtml, realdom } } = window;\n    const inBrowser = Object.getOwnPropertyDescriptor( globalThis, 'window' )?.get?.toString().includes( '[native code]' ) ?? false;\n    if ( !window.CSS.supports ) { window.CSS.supports = () => false; }\n    const handled = new WeakSet;\n    realdom.realtime( window.document ).query( config.styleSelector, record => {\n        record.entrants.forEach( style => {\n            if ( handled.has( style ) ) return;\n            handled.add( style );\n            // Do compilation\n            const sourceHash = _toHash( style.textContent );\n            const supportsHAS = CSS.supports( 'selector(:has(a,b))' );\n            const scopeSelector = style.scoped && ( supportsHAS ? `:has(> style[rand-${ sourceHash }])` : `[rand-${ sourceHash }]` );\n            const supportsScope = style.scoped && window.CSSScopeRule && false/* Disabled for buggy behaviour: rewriting selectorText within an @scope block invalidates the scoping */;\n            const scopeRoot = style.scoped && style.parentNode || style.getRootNode();\n            if ( scopeRoot instanceof window.Element ) {\n                scopeRoot[ config.api.styleSheets ].push( style );\n                if ( !inBrowser ) return;\n                ( supportsHAS ? style : scopeRoot ).toggleAttribute( `rand-${ sourceHash }`, true );\n            }\n            if ( !inBrowser ) return;\n            if ( style.scoped && style.hasAttribute( 'shared' ) ) {\n                let compiledSheet;\n                if ( !( compiledSheet = oohtml.Style.compileCache.get( sourceHash ) ) ) {\n                    compiledSheet = createAdoptableStylesheet.call( window, style, null, supportsScope, scopeSelector );\n                    oohtml.Style.compileCache.set( sourceHash, compiledSheet );\n                }\n                // Run now!!!\n                Object.defineProperty( style, 'sheet', { value: compiledSheet, configurable: true } );\n                style.textContent = '\\n/*[ Shared style sheet ]*/\\n';\n            } else {\n                const transform = () => {\n                    const namespaceUUID = getNamespaceUUID( getOwnerNamespaceObject.call( window, scopeRoot ) );\n                    upgradeSheet.call( this, style.sheet, namespaceUUID, !supportsScope && scopeSelector );\n                };\n                if ( style.isConnected ) { transform(); }\n                else { setTimeout( () => { transform(); }, 0 ); }\n            }\n        } );\n    }, { id: 'scoped-css', live: true, subtree: 'cross-roots', timing: 'intercept', generation: 'entrants' } );\n    // ---\n}\n\nfunction createAdoptableStylesheet( style, namespaceUUID, supportsScope, scopeSelector ) {\n    const window = this, textContent = style.textContent;\n    let styleSheet, cssText = supportsScope && scopeSelector ? `@scope (${ scopeSelector }) {\\n${ textContent.trim() }\\n}` : textContent.trim();\n    try {\n        styleSheet = new window.CSSStyleSheet;\n        styleSheet.replaceSync( cssText );\n        upgradeSheet.call( this, styleSheet, namespaceUUID, !supportsScope && scopeSelector );\n        const adopt = () => style.getRootNode().adoptedStyleSheets.push( styleSheet );\n        if ( style.isConnected ) { adopt(); }\n        else { setTimeout( () => { adopt(); }, 0 ); }\n    } catch( e ) {\n        const styleCopy = window.document.createElement( 'style' );\n        style.after( styleCopy );\n        styleCopy.textContent = cssText;\n        styleSheet = styleCopy.sheet;\n        upgradeSheet.call( this, styleSheet, namespaceUUID, !supportsScope && scopeSelector );\n    }\n    return styleSheet;\n}\n\nfunction upgradeSheet( styleSheet, namespaceUUID, scopeSelector = null ) {\n    const l = styleSheet?.cssRules.length || -1;\n    for ( let i = 0; i < l; ++i ) {\n        const cssRule = styleSheet.cssRules[ i ];\n        if ( cssRule instanceof CSSImportRule ) {\n            // Handle imported stylesheets\n            //upgradeSheet( cssRule.styleSheet, namespaceUUID, scopeSelector );\n            continue;\n        }\n        upgradeRule.call( this, cssRule, namespaceUUID, scopeSelector );\n    }\n}\n\nfunction upgradeRule( cssRule, namespaceUUID, scopeSelector = null ) {\n    if ( cssRule instanceof CSSStyleRule ) {\n        // Resolve relative IDs and scoping (for non-@scope browsers)\n        upgradeSelector.call( this, cssRule, namespaceUUID, scopeSelector );\n        return;\n    }\n    if ( [ window.CSSScopeRule, window.CSSMediaRule, window.CSSContainerRule, window.CSSSupportsRule, window.CSSLayerBlockRule ].some( type => type && cssRule instanceof type ) ) {\n        // Parse @rule blocks\n        const l = cssRule.cssRules.length;\n        for ( let i = 0; i < l; ++i ) {\n            upgradeRule.call( this, cssRule.cssRules[ i ], namespaceUUID, scopeSelector );\n        }\n    }\n}\n\nfunction upgradeSelector( cssRule, namespaceUUID, scopeSelector = null ) {\n    const newSelectorText = rewriteSelector.call( this, cssRule.selectorText, namespaceUUID, scopeSelector, 1 );\n    cssRule.selectorText = newSelectorText;\n    // Parse nested blocks. (CSS nesting)\n    if ( cssRule.cssRules ) {\n        const l = cssRule.cssRules.length;\n        for ( let i = 0; i < l; ++i ) {\n            upgradeSelector.call( this, cssRule.cssRules[ i ], namespaceUUID, /* Nesting has nothing to do with scopeSelector */ );\n        }\n    }\n}", "\n/**\n * @imports\n */\nimport NamespacedHTML from './namespaced-html/index.js';\nimport ScopedJS, { idleCompiler as idleCompiler1 } from './scoped-js/index.js';\nimport DataBinding, { idleCompiler as idleCompiler2 } from './data-binding/index.js';\nimport BindingsAPI from './bindings-api/index.js';\nimport HTMLImports from './html-imports/index.js';\nimport ContextAPI from './context-api/index.js';\nimport ScopedCSS from './scoped-css/index.js';\n\n/**\n * @init\n */\nexport default function init( UseLive, configs = {} ) {\n    if ( !this.webqit ) { this.webqit = {}; }\n    Object.assign( this.webqit, UseLive );\n    // --------------\n    ContextAPI.call( this, ( configs.CONTEXT_API || {} ) );\n    BindingsAPI.call( this, ( configs.BINDINGS_API || {} ) ); // Depends on ContextAPI\n    // Imports must happen before the rest... structure must be flattened before the other things below which query the DOM\n    HTMLImports.call( this, { ...( configs.HTML_IMPORTS || {} ), idleCompilers: [ idleCompiler1, idleCompiler2 ] } ); // Depends on ContextAPI\n    NamespacedHTML.call( this, ( configs.NAMESPACED_HTML || {} ) ); // Depends on ContextAPI\n    DataBinding.call( this, ( configs.DATA_BINDING || {} ) ); // Depends on ContextAPI, BindingsAPI, HTMLImports\n    ScopedCSS.call( this, ( configs.SCOPED_CSS || {} ) ); // Depends on NamespacedHTML\n    ScopedJS.call( this, ( configs.SCOPED_JS || {} ) );\n}\n", "import * as UseLive from '@webqit/use-live/lite';\nimport init from './init.js';\n\ninit.call( window, UseLive );\n"],
  "mappings": "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",
  "names": []
}
