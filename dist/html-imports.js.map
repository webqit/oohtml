{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/js/wq.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../node_modules/@webqit/realdom/src/Scheduler.js", "../node_modules/@webqit/realdom/src/realtime/Util.js", "../node_modules/@webqit/realdom/src/realtime/DOMSpec.js", "../node_modules/@webqit/realdom/src/realtime/Realtime.js", "../node_modules/@webqit/realdom/src/realtime/AttrRealtime.js", "../node_modules/@webqit/realdom/src/realtime/DOMRealtime.js", "../node_modules/@webqit/realdom/src/polyfills.js", "../node_modules/@webqit/realdom/src/index.js", "../node_modules/@webqit/util/str/toTitle.js", "../src/util.js", "../src/html-imports/HTMLModule.js", "../src/context-api/_DOMContextRequestEvent.js", "../src/context-api/DOMContextResponse.js", "../src/context-api/DuplicateContextError.js", "../src/context-api/DOMContexts.js", "../src/context-api/DOMContext.js", "../src/html-imports/HTMLImportsContext.js", "../src/html-imports/_HTMLImportElement.js", "../src/html-imports/index.js", "../src/html-imports/targets.browser.js"],
  "sourcesContent": ["\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n", "\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.keys(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n", "\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n", "export default function wq(obj, ...namespaces) {\n    if (!obj || !['object', 'function'].includes(typeof obj)) {\n        throw new Error(`Argument #1 must be of type object`);\n    }\n    let wq = obj[Symbol.for('wq')];\n    if (!wq) {\n        wq = new WQInternals;\n        Object.defineProperty(obj, Symbol.for('wq'), {\n            value: wq,\n            // Defaults, but to be explicit...\n            enumerable: false,\n            configurable: false,\n            writable: false\n        });\n    }\n    if (!namespaces.length) {\n        return wq;\n    }\n    let _ns, _wq;\n    while ((_ns = namespaces.shift())) {\n        if ((_wq = wq) && !(wq = wq.get(_ns))) {\n            wq = new WQInternals;\n            _wq.set(_ns, wq);\n        }\n    }\n    return wq;\n}\n\nclass WQInternals extends Map {}", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isUndefined from '../js/isUndefined.js';\nimport _isNull from '../js/isNull.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Retrieves the value at the given path.\n *\n * A return value of undefined is ambiguous, and can mean either that the\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\n * know whether the path actually exists, pass an object as a third argument.\n * This object will have an \"exists\" key set to true/false.\n *\n * @param object \t\t\t\tctxt\n * @param array \t\t\t\tpath\n * @param object \t\t\t\ttrap\n * @param object \t\t\t\treciever\n *\n * @return mixed\n */\nexport default function(ctxt, path, trap = {}, reciever = {}) {\n\tpath = _arrFrom(path).slice();\n\tvar _ctxt = ctxt;\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\n\t\tvar _key = path.shift();\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\n\t\t\treciever.exists = false;\n\t\t\treturn;\n\t\t}\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\n\t}\n\treciever.exists = true;\n\treturn _ctxt;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isArray from '../js/isArray.js';\nimport _arrFrom from '../arr/from.js';\nimport _get from './get.js';\n\n/**\n * Sets a value to the given path.\n *\n * @param object \t\t\t\tobj\n * @param array \t\t\t\tpath\n * @param mixed \t\t\t\tval\n * @param object|function \t\tbuildTree\n * @param object \t\t\t\ttrap\n *\n * @return bool\n */\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\n\tconst _set = (target, key, val) => {\n\t\tif (trap.set) {\n\t\t\treturn trap.set(target, key, val);\n\t\t} else {\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\n\t\t\t\ttarget.push(val);\n\t\t\t} else {\n\t\t\t\ttarget[key] = val;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n\tpath = _arrFrom(path);\n\tvar target = obj;\n\tfor(var i = 0; i < path.length; i ++) {\n\t\tif (i < path.length - 1) {\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar branch = _get(target, path[i], trap);\n\t\t\tif (!_isTypeObject(branch)) {\n\t\t\t\tif (trap.buildTree === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\n\t\t\t\tif (!branchSuccess) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = branch;\n\t\t} else {\n\t\t\treturn _set(target, path[i], val);\n\t\t}\n\t}\n};\n", "\n/**\n * ---------------------------\n * Binds callbacks to requestAnimationFrame()\n * to create a central \"read/write\" phases for Ctxt access.\n * ---------------------------\n */\n\t\t\t\nexport default class Scheduler {\n\n\t/**\n\t * Starts the loop.\n\t *\n\t * @return this\n\t */\n\tconstructor( window, synthesis = false ) {\n\t\tObject.defineProperty( this, 'window', { value: window } );\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, '_synthesis', { value: 0, writable: true } );\n\t\tif ( !synthesis && this.window.requestAnimationFrame ) {\n\t\t\tthis._loop();\n\t\t} else { this._synthesis ++; }\n\t}\n\n\tget synthesis() { return this._synthesis; }\n\n\tasync synthesizeWhile( callback ) {\n\t\tthis._synthesis ++;\n\t\tthis._fulfill();\n\t\tconst returnValue = await callback();\n\t\tthis._synthesis --;\n\t\treturn returnValue;\n\t}\n\n\t_fulfill() {\n\t\tfor ( const callback of this.readCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.readCallbacks.delete( callback );\n\t\t}\n\t\tfor ( const callback of this.writeCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.writeCallbacks.delete( callback );\n\t\t}\n\t}\n\n\t_loop() {\n\t\tthis.window.requestAnimationFrame( () => {\n\t\t\tthis._fulfill();\n\t\t\tthis._loop();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"read\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonread( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.readCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.readCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"write\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonwrite( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.writeCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * A special construct for Ctxt manipulations that span\n\t * one or more read/write cycles.\n\t *\n\t * @param function \tread\n\t * @param function \twrite\n\t * @param mixed\t\tprevTransaction\n\t *\n\t * @return void|mixed\n\t */\n\tcycle( onread, onwrite, prevTransaction ) {\n\t\tthis.onread( () => {\n\t\t\t// Record initial values\n\t\t\tconst readReturn = onread( prevTransaction );\n\t\t\t// Call erite, the transation\n\t\t\tconst callWrite = ( readReturn ) => {\n\t\t\t\tif ( readReturn === undefined ) return;\n\t\t\t\tthis.onwrite( () => {\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\n\t\t\t\t\t// Repeat transaction\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\n\t\t\t\t\t} else {\n\t\t\t\t\t\trepeatTransaction( writeReturn );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t\t// ---------------------------------------\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\n\t\t\t// ---------------------------------------\n\t\t\tif ( readReturn instanceof Promise ) {\n\t\t\t\treadReturn.then( callWrite );\n\t\t\t} else {\n\t\t\t\tcallWrite( readReturn );\n\t\t\t}\n\t\t} );\n\t}\n\n}", "import { isShadowRoot } from '../index.js';\n\n\nexport function isXpath( expr ) { return ( expr = expr.trim() ) && expr.startsWith( '(' ) && expr.endsWith( ')' ) }\n\nexport function xpathQuery( window, context, expr, subtree = true ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', subtree ? '(.//' : '(./' ) ).join( '|' );\n    let nodes = [], node;\n    try {\n        // Throws in firefox and safari where context is a text node\n        const result = window.document.evaluate( expr, context, null, window.XPathResult.ANY_TYPE );\n        while ( node = result.iterateNext() ) nodes.push( node );\n    } catch( e ) {}\n    return nodes;\n}\n\nexport function xpathMatch( window, node, expr ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', '(self::' ) ).join( '|' );\n    try {\n        // Throws in firefox and safari where context is a text node and query isn't\n        return window.document.evaluate( `${ expr }`, node, null, window.XPathResult.BOOLEAN_TYPE ).booleanValue;\n    } catch( e ) {}\n}\n\nexport function containsNode( window, a, b, crossRoots = false, testCache = null ) {\n    const prevTest = testCache?.get( a )?.get( b );\n    if ( typeof prevTest !== 'undefined' ) return prevTest;\n    const response = val => {\n        if ( !testCache?.has( a ) ) testCache?.set( a, new WeakMap );\n        testCache?.get( a )?.set( b, val );\n        return val;\n    };\n    const rootNodeA = a.getRootNode();\n    const rootNodeB = b.getRootNode();\n    if ( rootNodeA === rootNodeB ) return response( a.contains( b ) );\n    if ( crossRoots && isShadowRoot(rootNodeB) ) return response( containsNode( window, a, rootNodeB.host, crossRoots, testCache ) );\n    return response( false );\n}\n\nexport function splitOuter( str, delim = '|' ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits, skip ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}", "\n/**\n * @imports\n */\nimport * as Util from './Util.js';\n\nexport default class DOMSpec {\n    constructor( content ) {\n        this.content = content;\n        this.type = typeof content === 'string' ? 'selector' : 'instance';\n        this.kind = this.type === 'instance' ? null : Util.isXpath( content ) ? 'xpath' : 'css';\n        if ( this.kind === 'xpath' ) {\n            this.isXpathAttr = Util.splitOuter( content.trim().slice( 1, -1 ), '@' ).length > 1;\n        }\n    }\n    toString() { return this.content; }\n}", "\n/**\n * @imports\n */\nimport { _isFunction, _isObject, _wq } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { isNode } from '../index.js';\nimport DOMSpec from './DOMSpec.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class Realtime\n */\nexport default class Realtime {\n\n\t/**\n\t * @constructor\n\t *\n\t * @param document|Element\tcontext\n\t */\n\tconstructor( context, namespace, window ) {\n\t\tthis.context = context;\n\t\tthis.namespace = namespace;\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\n\t\tthis.document = this.window.document;\n\t\tthis.webqit = this.window.webqit;\n\t\tObject.defineProperty( this, '#', { value: {} } );\n\t}\n\t\n\t/**\n\t * Resolves arguments\n\t * \n\t * @param Array \t\t\targs \n\t * \n\t * @returns Array\n\t */\n\tresolveArgs( args ) {\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\n\t\telse if ( _isObject( args[ 0 ] ) && !( args[ 0 ] instanceof DOMSpec ) && args.length === 1 ) {\n\t\t\targs = [ [], undefined, args[ 0 ] ];\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\n\t\tif ( args[ 0 ].filter( x => typeof x !== 'string' && !( x instanceof DOMSpec ) && !( isNode(x) ) ).length ) {\n\t\t\tthrow new Error( `Argument #2 must be either a string or a Node object, or a list of those.` );\n\t\t}\n\t\targs[ 0 ] = args[ 0 ].map( s => s instanceof DOMSpec ? s : new DOMSpec( s ) );\n\t\treturn args;\n\t}\n\n\t/**\n\t * @registry\n\t *\n\t * @param Array\t\t\t\t...args\n\t * \n\t * @returns Map\n\t */\n\tregistry( ...args ) {\n\t\treturn _wq( this.window, 'realdom', this.namespace, ...args );\n\t}\n\t\t\n\t/**\n\t * @createSignalGenerator\n\t * \n\t * @param Object \t\t\tmo \n\t * \n\t * @returns Object\n\t */\n\tcreateSignalGenerator() {\n\t\treturn {\n\t\t\tgenerate() {\n\t\t\t\t// Abort previous\n\t\t\t\tthis.lastController?.abort();\n\t\t\t\tthis.lastController = new AbortController;\n\t\t\t\tconst flags = { signal: this.lastController.signal };\n\t\t\t\treturn flags;\n\t\t\t},\n\t\t\tdisconnect() { this.lastController?.abort(); }\n\t\t}\n\t}\n\t\t\n\t/**\n\t * Loops through registration objects whose contexts match the event context.\n\t * \n\t * @param String \t\tinterceptionTiming\n\t * @param Object|Array \trecord_s\n\t * @param Function \t\tcallback \n\t * \n\t * @returns void\n\t */\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\n\t\tconst { window } = this, deferreds = new Set, testCache = new WeakMap;\n\t\tfor ( const [ registration, deferred ] of this.registry( interceptionTiming ) ) {\n\t\t\tlet $records = [].concat( record_s ).filter( record => Util.containsNode( window, registration.context, record.target, registration.params.subtree === 'cross-roots', testCache ) );\n\t\t\tif ( !$records.length ) continue;\n\t\t\tconst args = [ registration, Array.isArray( record_s ) ? $records : $records[ 0 ] ];\n\t\t\tif ( deferred ) deferreds.add( args ); else callback.call( window, ...args );\n\t\t}\n\t\tfor ( const args of deferreds ) callback.call( window, ...args );\n\t\tdeferreds.clear();\n\t}\n\n\t/**\n\t * @disconnectables\n\t * \n\t * @param AbortSignal \t\tsignal\n\t * @param Array \t\t\t...objects \n\t * \n\t * @returns Object\n\t */\n\tdisconnectables( signal, ...objects ) {\n\t\tconst disconnectable = { disconnect() {\n\t\t\tobjects.forEach( d => (\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \n\t\t\t\t|| _isFunction( d ) && d() \n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\n\t\t\t) );\n\t\t} };\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\n\t\treturn disconnectable;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _wq } from '@webqit/util/js/index.js';\nimport Realtime from './Realtime.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class AttrRealtime\n */\nexport default class AttrRealtime extends Realtime {\n\n\ttype = 'attr';\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'attr', ...args );\n\t}\n\t\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tget( spec, callback = undefined, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// -------------\n\t\tconst records = attrIntersection( context, spec );\n\t\tif ( !callback ) return records;\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\n\t\tif ( !originalFilterIsString ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( records, flags, context );\n\t\t} else {\n\t\t\tfor ( const record of records ) {\n\t\t\t\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\t\t\t\tcallback( record, flags, context );\n\t\t\t}\n\t\t}\n\t\t// -------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( originalFilterIsString ? spec[ 0 ] : spec, callback, { newValue: true, ...params } );\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\n\t\t}\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( originalFilterIsString ? spec[ 0 ] : spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails && !webqit.realdom.attrInterceptionHooks?.intercepting ) {\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => {\n\t\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\t\tdispatch.call( window, registration, records, context );\n\t\t} );\n\t\t// ------------------\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree && true };\n\t\tif ( spec.length ) { $params.attributeFilter = spec.map( a => a + '' ); }\n\t\tdisconnectable.observe( context, $params );\n\t\t// -------------\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\n\t\t\t} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() { registry.delete( registration ); } };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Deduplicates records.\n * \n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction dedupAndIgnoreInternals( records ) {\n\treturn records.reduce( ( rcds, rcd, i ) => {\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\n\t\tif ( _wq( rcd.target, 'realdom', 'internalAttrInteractions' ).get( rcd.attributeName ) ) return rcds;\n\t\treturn rcds.concat( rcd );\n\t}, [] );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration\n * @param Array \t\t\trecords\n * \n * @returns Void\n */\nfunction dispatch( registration, records ) {\n\tconst { context, spec, callback, params, atomics, originalFilterIsString, signalGenerator } = registration;\n\tif (!params.subtree) {\n\t\trecords = records.filter((r) => {\n\t\t\treturn r.target === context;\n\t\t}); \n\t}\n\tif ( !records.length ) return;\n\tconst $spec = spec.map( a => a + '' );\n\tif ( params.atomic && !atomics.size ) {\n\t\trecords = attrIntersection( context, spec, records );\n\t} else if ( params.timing !== 'async' && spec.length ) {\n\t\trecords = records.filter( r => $spec.includes( r.name ) );\n\t}\n\tif ( !records.length ) return;\n\t// Should we care about old / new values being present?\n\tif ( !( params.newValue === null && params.oldValue === null && params.eventDetails ) ) {\n\t\trecords = records.map( rcd => {\n\t\t\tlet exclusion;\n\t\t\tif ( !params.eventDetails ) {\n\t\t\t\t( { event: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.oldValue && ( 'oldValue' in rcd ) ) {\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.newValue && ( 'value' in rcd ) ) {\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\n\t\t\t\trcd = {  ...rcd, value: internalAttrInteraction( rcd.target, rcd.name, () => rcd.target.getAttribute( rcd.name ) ) };\n\t\t\t}\n\t\t\treturn rcd;\n\t\t} );\n\t}\n\tif ( params.atomic ) {\n\t\trecords.forEach( record => atomics.set( record.name, record ) );\n\t\trecords = Array.from( atomics.entries() ).map( ( [ , value ] ) => value );\n\t}\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\n\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\tcallback( record_s, flags, context );\n}\n\n/**\n */\nfunction internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = _wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t_wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\n/**\n * Helper to determining which records to deliver.\n * \n * @param Object \t\t\tcontext\n * @param Array \t\t\tspec\n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction attrIntersection( context, spec, records = [] ) {\n\tconst _type = { event: null, type: 'attribute' };\n\tif ( spec.length ) {\n\t\treturn spec.map( attrName => {\n\t\t\tattrName = attrName + '';\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: internalAttrInteraction( context, attrName, () => context.getAttribute( attrName ) ), ..._type };\n\t\t} );\n\t}\n\tconst attrs = Array.from( context.attributes );\n\treturn attrs.map( attr => {\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: internalAttrInteraction( context, attr.nodeName, () => attr.nodeValue ), ..._type };\n\t} );\n}\n\n/**\n * Determines the event for an attr mutation record.\n * \n * @param MutationRecord \t{ target, attributeName }\n * \n * @returns Object\n */\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\n\tconst window = this, registry = window.webqit.realdom.attrInterceptionRecords?.get( target ) || {};\n\tconst event = registry[ attributeName ]?.[ 0 ] || 'mutation';\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\n\treturn record;\n}\n\n/**\n * Attributes intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction attrInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Element } = window;\n\tif ( !webqit.realdom.attrInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'attrInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.attrInterceptionHooks.has( timing ) ) { webqit.realdom.attrInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.attrInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.attrInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.attrInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\n\twebqit.realdom.attrInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'attrInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst attrIntercept = ( record, defaultAction ) => {\n\t\tif ( !webqit.realdom.attrInterceptionRecords.has( record.target ) ) { webqit.realdom.attrInterceptionRecords.set( record.target, {} ); }\n\t\tconst registry = webqit.realdom.attrInterceptionRecords.get( record.target );\n\t\t// ------------------\n\t\tregistry[ record.name ] = registry[ record.name ] || [];\n\t\tregistry[ record.name ].unshift( record.event );\n\t\tif ( _wq( record.target, 'realdom', 'internalAttrInteractions' ).get( record.name ) ) return defaultAction();\n\t\t// ------------------\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\n\t\treturn returnValue;\n\t};\n\n\t// Interception observer WILL need to know non-API-based mutations\n\tconst mo = new window.MutationObserver( records => {\n\t\trecords = records.filter( rcd => {\n\t\t\tconst registry = window.webqit.realdom.attrInterceptionRecords?.get( rcd.target ) || {};\n\t\t\treturn !registry[ rcd.attributeName ]?.shift();\n\t\t} );\n\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\tif ( !records.length ) return;\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\n\t} );\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\n\n\t// Intercept DOM attr mutation methods\n\tconst originalApis = Object.create( null );\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\n\t\tElement.prototype[ apiName ] = function( ...args ) {\n\t\t\tlet value, oldValue = internalAttrInteraction( this, args[ 0 ], () => this.getAttribute( args[ 0 ] ) );\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\n\t\t\t\tvalue = oldValue === null ? true : false;\n\t\t\t}\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\treturn attrIntercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\n/**\n * @imports\n */\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { isNodeInterface, isShadowRoot } from '../index.js';\nimport AttrRealtime from './AttrRealtime.js';\nimport Realtime from './Realtime.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class DOMRealtime\n */\nexport default class DOMRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor(context, ...args) {\n\t\tsuper(context, 'tree', ...args);\n\t}\n\n\t/**\n\t * Alias for ( new AttrRealtime() ).all( ... )\n\t */\n\tattr(filter, callback = undefined, params = {}) {\n\t\tconst { context, window } = this;\n\t\treturn (new AttrRealtime(context, window)).get(...arguments);\n\t}\n\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tquery(spec, callback = undefined, params = {}) {\n\t\t[spec, callback = undefined, params = {}] = this.resolveArgs(arguments);\n\t\tconst { context } = this;\n\t\t// ------------------\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif (!records.has(target)) { records.set(target, { target, entrants: [], exits: [], type: 'query', event: null }); }\n\t\t\treturn records.get(target);\n\t\t};\n\t\t// ------------------\n\t\tif (!params.generation || params.generation === 'entrants') {\n\t\t\tif (!spec.length) {\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\n\t\t\t\t[...context.children].forEach(node => getRecord(context).entrants.push(node));\n\t\t\t} else if (spec.every(s => s.type === 'selector')) {\n\t\t\t\tconst [cssSelectors, xpathQueries] = spec.reduce(([css, xpath], s) => {\n\t\t\t\t\treturn s.kind === 'xpath' ? [css, xpath.concat(s)] : [css.concat(s), xpath];\n\t\t\t\t}, [[], []]);\n\t\t\t\tconst matches = [];\n\t\t\t\tif (params.subtree) {\n\t\t\t\t\tif (cssSelectors.length) { matches.push(...context.querySelectorAll(cssSelectors.join(','))); }\n\t\t\t\t\tif (xpathQueries.length) { matches.push(...Util.xpathQuery(this.window, context, xpathQueries)); }\n\t\t\t\t} else {\n\t\t\t\t\tif (cssSelectors.length) { matches.push(...[...context.children].filter(node => node.matches(cssSelectors))); }\n\t\t\t\t\tif (xpathQueries.length) { matches.push(...Util.xpathQuery(this.window, context, xpathQueries, false)); }\n\t\t\t\t}\n\t\t\t\tmatches.forEach(node => getRecord(node.parentNode || context).entrants.push(node));\n\t\t\t}\n\t\t}\n\t\t// ------------------\n\t\tif (!callback) return records;\n\t\tconst disconnectable = { disconnected: false };\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\n\t\tfor (const [, record] of records) {\n\t\t\tif (disconnectable.disconnected) break;\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback(record, flags, context);\n\t\t}\n\t\t// ------------------\n\t\tif (params.live) {\n\t\t\tif (signalGenerator) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe(spec, callback, params);\n\t\t\treturn this.disconnectables(params.signal, disconnectable, disconnectable_live);\n\t\t}\n\t\treturn this.disconnectables(params.signal, disconnectable, signalGenerator);\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: false } )\n\t */\n\tchildren(spec, callback = undefined, params = {}) {\n\t\t[spec, callback = undefined, params = {}] = this.resolveArgs(arguments);\n\t\treturn this.query(spec, callback, { ...params, subtree: false });\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: true } )\n\t */\n\tsubtree(spec, callback = undefined, params = {}) {\n\t\t[spec, callback = undefined, params = {}] = this.resolveArgs(arguments);\n\t\treturn this.query(spec, callback, { ...params, subtree: true });\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve(spec, callback, params = {}) {\n\t\t[spec, callback, params = {}] = this.resolveArgs(arguments);\n\t\t// ------------------------\n\t\tif (['sync', 'intercept'].includes(params.timing)) return this.observeSync(spec, callback, params);\n\t\tif (params.timing && params.timing !== 'async') throw new Error(`Timing option \"${params.timing}\" invalid.`);\n\t\t// ------------------------\n\t\tconst { context, window, webqit, document } = this;\n\t\t// ------------------\n\t\tif (params.eventDetails) { webqit.realdom.domInterceptionRecordsAlwaysOn = true; }\n\t\tif ((document.readyState === 'loading' || webqit.realdom.domInterceptionRecordsAlwaysOn) && !webqit.realdom.domInterceptionHooks?.intercepting) {\n\t\t\tdomInterception.call(window, 'sync', () => { });\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver(records => records.forEach(record => {\n\t\t\tdispatch.call(window, registration, withEventDetails.call(window, record), context);\n\t\t}));\n\t\tdisconnectable.observe(context, { childList: true, subtree: params.subtree && true, });\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tif (params.staticSensitivity) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call(window, registration);\n\t\t\treturn this.disconnectables(params.signal, disconnectable, signalGenerator, disconnectable_attr);\n\t\t}\n\t\treturn this.disconnectables(params.signal, disconnectable, signalGenerator);\n\t}\n\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync(spec, callback, params = {}) {\n\t\t[spec, callback, params = {}] = this.resolveArgs(arguments);\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif (params.timing && !['sync', 'intercept'].includes(params.timing)) throw new Error(`Timing option \"${params.timing}\" invalid.`);\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif (!this.registry(interceptionTiming).size) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tdomInterception.call(window, interceptionTiming, record => {\n\t\t\t\tthis.forEachMatchingContext(interceptionTiming, record, dispatch);\n\t\t\t});\n\t\t}\n\t\tconst mo = new window.MutationObserver(records => records.forEach(record => {\n\t\t\tif (Array.isArray((record = withEventDetails.call(window, record)).event)) return;\n\t\t\tdispatch.call(window, registration, record, context);\n\t\t}));\n\t\tmo.observe(context, { childList: true, subtree: params.subtree && true });\n\t\t// -------------\n\t\tconst disconnectable = {\n\t\t\tdisconnect() {\n\t\t\t\tregistry.delete(registration);\n\t\t\t\tmo.disconnect();\n\t\t\t}\n\t\t};\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\tconst registry = this.registry(interceptionTiming);\n\t\tregistry.set(registration, !!registration.params.deferred);\n\t\t// -------------\n\t\tif (params.staticSensitivity) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call(window, registration);\n\t\t\treturn this.disconnectables(params.signal, disconnectable, signalGenerator, disconnectable_attr);\n\t\t}\n\t\treturn this.disconnectables(params.signal, disconnectable, signalGenerator);\n\t}\n\n\t/**\n\t * Tracks the connectedness of element references.\n\t *\n\t * @param array|Element\t\t\t\telements\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable\n\t */\n\ttrack(elements, callback, params = {}) {\n\t\tparams = { subtree: true, ...params };\n\t\treturn this.observe(elements, record => {\n\t\t\tif (record.entrants.length) callback(true, Array.isArray(elements) ? record.entrants : record.entrants[0]);\n\t\t\tif (record.exits.length) callback(false, Array.isArray(elements) ? record.exits : record.exits[0]);\n\t\t}, params);\n\t}\n}\n\n/**\n * Sensitivty for attribute changes for attribute spec.\n * \n * @param object registration\n * \n * @returns Disconnectable\n */\nfunction staticSensitivity(registration) {\n\tconst window = this;\n\tconst { context, spec, callback, params, signalGenerator } = registration;\n\tconst cssSelectors = spec.filter(s => s.kind === 'css');\n\tconst parseDot = selector => selector.match(/\\.([\\w-]+)/g)?.length ? ['class'] : [];\n\tconst parseHash = selector => selector.match(/#([\\w-]+)/g)?.length ? ['id'] : [];\n\tconst parse = selector => [...selector.matchAll(/\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g)].map(x => x[1]).concat(parseDot(selector)).concat(parseHash(selector));\n\tif (!(registration.$attrs = Array.from(new Set(cssSelectors.filter(s => (s + '').includes('[')).reduce((attrs, selector) => attrs.concat(parse(selector + '')), [])))).length) return;\n\t// ---------\n\tconst entrants = new Set, exits = new Set;\n\tentrants.push = val => (exits.delete(val), entrants.add(val));\n\texits.push = val => (entrants.delete(val), exits.add(val));\n\tregistration.$deliveryCache = { entrants, exits };\n\t// ---------\n\treturn (new AttrRealtime(context, window)).observe(registration.$attrs, _records => {\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif (!records.has(target)) { records.set(target, { target, entrants: [], exits: [], type: 'static', event: null }); }\n\t\t\treturn records.get(target);\n\t\t};\n\t\t// ---------\n\t\tconst matchesCache = new WeakMap;\n\t\tconst matches = node => {\n\t\t\tif (!matchesCache.has(node)) { matchesCache.set(node, cssSelectors.some(s => node.matches(s + ''))); }\n\t\t\treturn matchesCache.get(node);\n\t\t};\n\t\t// ---------\n\t\tfor (const _record of _records) {\n\t\t\t['entrants', 'exits'].forEach(generation => {\n\t\t\t\tif (params.generation && generation !== params.generation) return;\n\t\t\t\tif (registration.$deliveryCache[generation].has(_record.target) || (generation === 'entrants' ? !matches(_record.target) : matches(_record.target))) return;\n\t\t\t\tregistration.$deliveryCache[generation].push(_record.target);\n\t\t\t\tgetRecord(_record.target)[generation].push(_record.target);\n\t\t\t\tgetRecord(_record.target).event = _record.event;\n\t\t\t});\n\t\t}\n\t\t// ---------\n\t\tfor (const [, record] of records) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback(record, flags, context);\n\t\t}\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails });\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration \n * @param Object \t\t\trecord \n * \n * @returns Void\n */\nfunction dispatch(registration, _record) {\n\tconst { context, spec, callback, params, signalGenerator, $deliveryCache } = registration;\n\t// ---------\n\tconst record = { ..._record, entrants: [], exits: [] };\n\tif (!params.eventDetails) { delete record.event; }\n\t['entrants', 'exits'].forEach(generation => {\n\t\tif (params.generation && generation !== params.generation) return;\n\t\tif (spec.length) {\n\t\t\trecord[generation] = nodesIntersection.call(this, spec, params.subtree === 'cross-roots', _record[generation], _record.event !== 'parse');\n\t\t} else {\n\t\t\trecord[generation] = [..._record[generation]];\n\t\t}\n\t\tif (!$deliveryCache) return;\n\t\tfor (const node of record[generation]) {\n\t\t\t$deliveryCache[generation].push(node);\n\t\t}\n\t});\n\t// ---------\n\tif (!record.entrants.length && !record.exits.length) return;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback(record, flags, context);\n}\n\n/**\n * Aggregates instances of els in sources\n * \n * @param Array \t\t\tspec \n * @param Bool \t\t\t\tcrossRoots \n * @param Array \t\t\tsources \n * @param Bool \t\t\t\tdeepIntersect \n * \n * @returns \n */\nfunction nodesIntersection(spec, crossRoots, sources, deepIntersect) {\n\tsources = Array.isArray(sources) ? sources : [...sources];\n\tconst match = (sources, s) => {\n\t\t// Filter out text nodes\n\t\tif (s.type === 'selector') {\n\t\t\t// Is directly mutated...\n\t\t\tlet matches = s.isXpathAttr ? [] : sources.filter(source => s.kind === 'xpath' ? Util.xpathMatch(this, source, s + '') : source.matches && source.matches(s + ''));\n\t\t\t// Is contextly mutated...\n\t\t\tif (deepIntersect || s.isXpathAttr) {\n\t\t\t\tmatches = sources.reduce((collection, source) => {\n\t\t\t\t\tif (s.kind === 'xpath') { return [...collection, ...Util.xpathQuery(this, source, s, deepIntersect)]; }\n\t\t\t\t\treturn source.querySelectorAll ? [...collection, ...source.querySelectorAll(s + '')] : collection;\n\t\t\t\t}, matches);\n\t\t\t}\n\t\t\tif (matches.length) return matches;\n\t\t} else {\n\t\t\t// Is directly mutated...\n\t\t\tif (sources.includes(s.content) || (\n\t\t\t\tdeepIntersect && sources.some(source => Util.containsNode(this/* window */, source, s.content, crossRoots))\n\t\t\t)) { return [s.content]; }\n\t\t}\n\t};\n\t// Search can be expensive...\n\t// Multiple listeners searching the same thing in the same list?\n\tif (!sources.$$searchCache) { sources.$$searchCache = new Map; }\n\treturn spec.reduce((matches, s) => {\n\t\tlet _matches;\n\t\tif (sources.$$searchCache.has(s.content)) {\n\t\t\t_matches = sources.$$searchCache.get(s.content);\n\t\t} else {\n\t\t\t_matches = match(sources, s) || [];\n\t\t\tif (s.type === 'instance') {\n\t\t\t\tsources.$$searchCache.set(s.content, _matches);\n\t\t\t}\n\t\t}\n\t\treturn matches.concat(_matches);\n\t}, []);\n}\n\n/**\n * Determines the event for a mutation record\n * \n * @param MutationRecord \t{ target, entrants, exits }\n * \n * @returns Object\n */\nfunction withEventDetails({ target, addedNodes, removedNodes }) {\n\tlet window = this, event;\n\tevent = _arrFrom(addedNodes).reduce((prev, node) => prev || window.webqit.realdom.domInterceptionRecords?.get(node), null);\n\tevent = _arrFrom(removedNodes).reduce((prev, node) => prev || window.webqit.realdom.domInterceptionRecords?.get(node), event);\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\n}\n\n/**\n * DOM intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction domInterception(timing, callback) {\n\tconst window = this;\n\tconst { webqit, document, Node, CharacterData, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\n\tif (!webqit.realdom.domInterceptionHooks) { Object.defineProperty(webqit.realdom, 'domInterceptionHooks', { value: new Map }); }\n\tif (!webqit.realdom.domInterceptionNoRecurse) { Object.defineProperty(webqit.realdom, 'domInterceptionNoRecurse', { value: new Map }); }\n\tif (!webqit.realdom.domInterceptionHooks.has(timing)) { webqit.realdom.domInterceptionHooks.set(timing, new Set); }\n\twebqit.realdom.domInterceptionHooks.get(timing).add(callback);\n\tconst rm = () => webqit.realdom.domInterceptionHooks.get(timing).delete(callback);\n\tif (webqit.realdom.domInterceptionHooks?.intercepting) return rm;\n\tconsole.warn(`DOM mutation APIs are now being intercepted.`);\n\twebqit.realdom.domInterceptionHooks.intercepting = true;\n\tObject.defineProperty(webqit.realdom, 'domInterceptionRecords', { value: new Map });\n\n\t// No recursion helper\n\tconst noRecurse = (node, method, callback) => {\n\t\twebqit.realdom.domInterceptionNoRecurse.set(node, method);\n\t\tconst returnValue = callback();\n\t\twebqit.realdom.domInterceptionNoRecurse.delete(node);\n\t\treturn returnValue;\n\t};\n\n\t// Interception hooks\n\tconst intercept = (record, defaultAction) => {\n\t\trecord.entrants.concat(record.exits).forEach(node => {\n\t\t\tclearTimeout(webqit.realdom.domInterceptionRecords.get(node)?.timeout); // Clear any previous that's still active\n\t\t\twebqit.realdom.domInterceptionRecords.set(node, record.event); // Main: set event details... and next to timeout details\n\t\t\tconst timeout = setTimeout(() => { webqit.realdom.domInterceptionRecords.delete(node); }, 0);\n\t\t\tObject.defineProperty(record.event, 'timeout', { value: timeout, configurable: true });\n\t\t});\n\t\twebqit.realdom.domInterceptionHooks.get('intercept')?.forEach(callback => callback(record));\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.domInterceptionHooks.get('sync')?.forEach(callback => callback(record));\n\t\treturn returnValue;\n\t};\n\n\t// Intercept DOM mutation methods\n\tconst _apiNames = {\n\t\t// Note the order\n\t\tShadowRoot: ['innerHTML', 'setHTMLUnsafe'],\n\t\tDocumentFragment: ['replaceChildren', 'append', 'prepend'],\n\t\tDocument: ['replaceChildren', 'append', 'prepend'],\n\t\tHTMLElement: ['outerText', 'innerText'],\n\t\tElement: ['append', 'prepend', 'before', 'after', 'insertAdjacentElement', 'insertAdjacentHTML', 'remove', 'replaceChildren', 'replaceWith', 'setHTMLUnsafe', 'innerHTML', 'outerHTML'],\n\t\tCharacterData: ['before', 'after', 'remove', 'replaceWith'],\n\t\tNode: ['insertBefore', 'replaceChild', 'removeChild', 'appendChild', 'textContent', 'nodeValue'],\n\t};\n\tconst _apiOriginals = {\n\t\t// Note the order\n\t\tShadowRoot: Object.create(null), // extends DocumentFragment\n\t\tDocumentFragment: Object.create(null), // extends Node\n\t\tDocument: Object.create(null), // extends Node\n\t\tHTMLElement: Object.create(null), // extends Element,\n\t\tElement: Object.create(null), // extends Node\n\t\tCharacterData: Object.create(null), // extends Node\n\t\tNode: Object.create(null),\n\t};\n\n\tconst _apiNamesUnique = new Set(Object.values(_apiNames).reduce((all, apis) => all.concat(apis), []));\n\t_apiNamesUnique.forEach(apiName => {\n\n\t\tObject.keys(_apiNames).forEach(DOMClassName => {\n\t\t\tif (!_apiNames[DOMClassName].includes(apiName)) return;\n\t\t\tconst _apiOriginal = Object.getOwnPropertyDescriptor(window[DOMClassName].prototype, apiName);\n\t\t\tif (!_apiOriginal) return; // Typically: Element:setHTMLUnsafe\n\t\t\tObject.defineProperty(window[DOMClassName].prototype, apiName, 'value' in _apiOriginal ? { ..._apiOriginal, value: method } : { ..._apiOriginal, set: setter });\n\t\t\t_apiOriginals[DOMClassName][apiName] = _apiOriginal;\n\t\t});\n\n\t\tfunction method(...args) {\n\t\t\tconst DOMClassName = Object.keys(_apiOriginals).find(name => isNodeInterface(this, name) && (apiName in _apiOriginals[name]));\n\t\t\tconst $apiOriginals = _apiOriginals[DOMClassName];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[apiName].value.call(this, ...args);\n\t\t\tif (webqit.realdom.domInterceptionNoRecurse.get(this) === apiName) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif (['insertBefore'].includes(apiName)) {\n\t\t\t\tentrants = [args[0]];\n\t\t\t} else if (['insertAdjacentElement', 'insertAdjacentHTML'].includes(apiName)) {\n\t\t\t\tentrants = [args[1]];\n\t\t\t\tif (['beforebegin', 'afterend'].includes(args[0])) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t} else if (['setHTMLUnsafe', 'replaceChildren'].includes(apiName)) {\n\t\t\t\texits = [...this.childNodes];\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [...args] : [args[0]];\n\t\t\t} else if (['replaceWith', 'remove'].includes(apiName)) {\n\t\t\t\texits = [this];\n\t\t\t\tentrants = apiName === 'replaceWith' ? [...args] : [];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else if (['replaceChild'].includes(apiName)) {\n\t\t\t\texits = [args[1]];\n\t\t\t\tentrants = [args[0]];\n\t\t\t} else if (['removeChild'].includes(apiName)) {\n\t\t\t\texits = [...args];\n\t\t\t} else {\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\n\t\t\t\tentrants = [...args];\n\t\t\t\tif (['before', 'after'].includes(apiName)) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to entrants\n\t\t\tlet apiNameFinal = apiName;\n\t\t\tif (['insertAdjacentHTML', 'setHTMLUnsafe'].includes(apiName)) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif (apiName === 'insertAdjacentHTML' && ['beforebegin', 'afterend'].includes(args[0])) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif (!this.parentNode) return $apiOriginals[apiName].value.call(this, ...args);\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement(tempNodeName.includes('-')/* custom-element | #document-fragment */ ? 'div' : tempNodeName);\n\t\t\t\t$apiOriginals.setHTMLUnsafe.value.call(temp, entrants[0], apiName === 'setHTMLUnsafe' ? args[1] : {});\n\t\t\t\tentrants = [...temp.childNodes];\n\t\t\t\t// --------------  \n\t\t\t\tif (apiName === 'insertAdjacentHTML') {\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\n\t\t\t\t\targs[1] = new DocumentFragment;\n\t\t\t\t\tnoRecurse(args[1], 'append', () => args[1].append(...temp.childNodes));\n\t\t\t\t} else {\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\n\t\t\t\t\targs = [...temp.childNodes];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tif (!target) return exec();\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [this, apiName] };\n\t\t\treturn intercept(record, () => {\n\t\t\t\treturn $apiOriginals[apiNameFinal].value.call(this, ...args);\n\t\t\t});\n\t\t}\n\n\t\tfunction setter(value) {\n\t\t\tconst DOMClassName = Object.keys(_apiOriginals).find(name => isNodeInterface(this, name) && (apiName in _apiOriginals[name]));\n\t\t\tconst $apiOriginals = _apiOriginals[DOMClassName];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[apiName].set.call(this, value);\n\t\t\tif (isNodeInterface(this, 'HTMLScriptElement') || webqit.realdom.domInterceptionNoRecurse.get(this) === apiName) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif (['outerHTML', 'outerText'].includes(apiName)) {\n\t\t\t\texits = [this];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else {\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\n\t\t\t\tif (isNodeInterface(this, 'HTMLTemplateElement')) {\n\t\t\t\t\ttarget = this.content;\n\t\t\t\t\texits = [...this.content.childNodes];\n\t\t\t\t} else {\n\t\t\t\t\texits = [...this.childNodes];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to nodes\n\t\t\tif (['outerHTML', 'innerHTML'].includes(apiName)) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif (apiName === 'outerHTML') {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif (!this.parentNode) return exec();\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement(tempNodeName.includes('-')/* custom-element | #document-fragment */ ? 'div' : tempNodeName);\n\t\t\t\tnoRecurse(temp, apiName, () => temp[apiName] = value);\n\t\t\t\tentrants = isNodeInterface(this, 'HTMLTemplateElement') ? [...temp.content.childNodes] : [...temp.childNodes];\n\t\t\t\tif ((isNodeInterface(this, 'HTMLTemplateElement') && this.hasAttribute('src')) || isShadowRoot(this)) {\n\t\t\t\t\tconst getScripts = nodes => nodes.reduce((scripts, el) => {\n\t\t\t\t\t\tif (isNodeInterface(el, 'HTMLScriptElement')) return scripts.concat(el);\n\t\t\t\t\t\tif (isNodeInterface(el, 'HTMLTemplateElement')) return scripts.concat(getScripts([el.content]));\n\t\t\t\t\t\tscripts = scripts.concat(getScripts([...(el.querySelectorAll?.('template') || [])].map(t => t.content)));\n\t\t\t\t\t\treturn scripts.concat(...(el.querySelectorAll?.('script') || []));\n\t\t\t\t\t}, []);\n\t\t\t\t\tfor (const script of getScripts(entrants)) {\n\t\t\t\t\t\tif (isShadowRoot(this)) {\n\t\t\t\t\t\t\tscript.setAttribute('data-handling', 'manual');\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst $script = document.createElement('script');\n\t\t\t\t\t\t[...script.attributes].forEach(attr => $script.setAttribute(attr.name, attr.value));\n\t\t\t\t\t\t$script.textContent = script.textContent;\n\t\t\t\t\t\tnoRecurse(script, 'replaceWith', () => script.replaceWith($script));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// -------------- \n\t\t\t\tif (apiName === 'outerHTML') {\n\t\t\t\t\tvalue = new DocumentFragment;\n\t\t\t\t\tnoRecurse(value, 'append', () => value.append(...entrants));\n\t\t\t\t\texec = () => noRecurse(this, 'replaceWith', () => Element.prototype.replaceWith.call(this, value));\n\t\t\t\t} else {\n\t\t\t\t\tif (isNodeInterface(this, 'HTMLTemplateElement')) {\n\t\t\t\t\t\texec = () => noRecurse(this.content, 'replaceChildren', () => this.content.replaceChildren(...entrants));\n\t\t\t\t\t} else {\n\t\t\t\t\t\texec = () => noRecurse(this, 'replaceChildren', () => Element.prototype.replaceChildren.call(this, ...entrants));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [this, apiName] };\n\t\t\treturn intercept(record, exec);\n\t\t}\n\t});\n\n\treturn rm;\n}\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString, _isFunction } from '@webqit/util/js/index.js';\r\nimport { _set } from '@webqit/util/obj/index.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function () {\r\n    const window = this;\r\n    if (!window.webqit) window.webqit = {};\r\n    if (window.webqit.realdom) return window.webqit.realdom;\r\n    window.webqit.realdom = {};\r\n    polyfill.call(window);\r\n    // ------\r\n    window.webqit.realdom.meta = (...args) => meta.call(window, ...args);\r\n    window.webqit.realdom.ready = (...args) => ready.call(window, ...args);\r\n    // ------\r\n    window.webqit.realdom.realtime = (context, namespace = 'dom') => {\r\n        if (namespace === 'dom') return new DOMRealtime(context, window);\r\n        if (namespace === 'attr') return new AttrRealtime(context, window);\r\n    };\r\n    // ------\r\n    const scheduler = new Scheduler(window);\r\n    window.webqit.realdom.schedule = (type, ...args) => {\r\n        return scheduler[`on${type}`](...args);\r\n    };\r\n    window.webqit.realdom.synthesizeWhile = (...args) => {\r\n        return scheduler.synthesizeWhile(...args);\r\n    };\r\n    // ------\r\n    return window.webqit.realdom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready(...args) {\r\n    let timing = 'interactive', callback;\r\n    if (_isString(args[0])) {\r\n        timing = args[0];\r\n        if (_isFunction(args[1])) { callback = args[1]; }\r\n    } else if (_isFunction(args[0])) { callback = args[0]; }\r\n    // --------------\r\n    const timings = { interactive: ['interactive', 'complete'], complete: ['complete'], };\r\n    if (!timings[timing]) throw new Error(`Invalid ready-state timing: ${timing}.`);\r\n    const window = this;\r\n    // --------------\r\n    if (!callback) {\r\n        if (!window.webqit.realdom.readyStatePromises) {\r\n            window.webqit.realdom.readyStatePromises = {\r\n                interactive: new Promise(res => ready.call(this, 'interactive', res)),\r\n                complete: new Promise(res => ready.call(this, 'complete', res)),\r\n            };\r\n        }\r\n        return window.webqit.realdom.readyStatePromises[timing];\r\n    }\r\n    // --------------\r\n    if (timings[timing].includes(window.document.readyState)) return callback(window);\r\n    if (!window.webqit.realdom.readyStateCallbacks) {\r\n        window.webqit.realdom.readyStateCallbacks = { interactive: [], complete: [] };\r\n        window.document.addEventListener('readystatechange', () => {\r\n            const state = window.document.readyState;\r\n            for (const callback of window.webqit.realdom.readyStateCallbacks[state].splice(0)) {\r\n                callback(window);\r\n            }\r\n        }, false);\r\n    }\r\n    window.webqit.realdom.readyStateCallbacks[timing].push(callback);\r\n}\r\n\r\n/**\r\n * A webqit's meta tag props reader.\r\n *  \r\n * @param String name\r\n * \r\n * @return Object\r\n */\r\nfunction meta(name) {\r\n    const window = this;\r\n    let _content = {}, _el;\r\n    if (_el = window.document.querySelector(`meta[name=\"${name}\"]`)) {\r\n        _content = (_el.content || '').split(';').filter(v => v).reduce((_metaVars, directive) => {\r\n            const directiveSplit = directive.split('=').map(d => d.trim());\r\n            _set(_metaVars, directiveSplit[0].split('.'), directiveSplit[1] === 'true' ? true : (directiveSplit[1] === 'false' ? false : (\r\n                _isNumeric(directiveSplit[1]) ? parseInt(directiveSplit[1]) : directiveSplit[1]\r\n            ))\r\n            );\r\n            return _metaVars;\r\n        }, {});\r\n    }\r\n    return {\r\n        get name() { return name; }, get content() { return _el.content; }, json() {\r\n            return JSON.parse(JSON.stringify(_content));\r\n        }\r\n    };\r\n}\r\n\r\nexport function isNode(value) {\r\n    return (\r\n        value !== null &&\r\n        typeof value === 'object' &&\r\n        typeof value.nodeType === 'number' &&\r\n        typeof value.nodeName === 'string'\r\n    );\r\n}\r\n\r\nexport function isNodeName(value, nodeName) {\r\n    return isNode(value) && value.nodeName === nodeName.toUpperCase();\r\n}\r\n\r\nexport function isElement(value) {\r\n    return value?.nodeType === 1; // ELEMENT_NODE\r\n}\r\n\r\nexport function isShadowRoot(value) {\r\n    return (\r\n        value?.nodeType === 11 && // DOCUMENT_FRAGMENT_NODE\r\n        Object.prototype.toString.call(value) === '[object ShadowRoot]'\r\n    );\r\n}\r\n\r\nexport function isDocument(value) {\r\n    return (\r\n        value?.nodeType === 9 && // DOCUMENT_NODE\r\n        Object.prototype.toString.call(value) === '[object Document]'\r\n    );\r\n}\r\n\r\nexport function isCharacterData(value) {\r\n    const toStringValue = Object.prototype.toString.call(value);\r\n    return toStringValue === '[object Text]' || toStringValue === '[object Comment]' || toStringValue === '[object CDATASection]' || toStringValue === '[object ProcessingInstruction]';\r\n}\r\n\r\nexport function isNodeInterface(value, interfaceName) {\r\n    if (!isNode(value)) return false;\r\n\r\n    if (interfaceName === 'ShadowRoot') {\r\n        return isShadowRoot(value);HTMLUnknownElement\r\n    }\r\n\r\n    const toStringValue = Object.prototype.toString.call(value);\r\n    if (toStringValue === `[object ${interfaceName}]`) return true;\r\n\r\n    if (interfaceName === 'DocumentFragment' && isShadowRoot(value)) return true;\r\n\r\n    if (interfaceName === 'CharacterData' && isCharacterData(value)) return true;\r\n\r\n    return (interfaceName === 'Node' || interfaceName === 'Element' || interfaceName === 'HTMLElement') && isElement(value)\r\n        || interfaceName === 'Node' && isNode(value);\r\n}\r\n", "\n/**\n * Converts a string to title case.\n *\n * @param string \tstr\n * @param bool \t\tstrict\n *\n * @return string\n */\nexport default function(str, strict) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\n};\n", "\n/**\n * @imports\n */\nimport realdomInit from '@webqit/realdom';\nimport { _wq as __wq } from '@webqit/util/js/index.js';\nimport { _merge } from '@webqit/util/obj/index.js';\nimport { _toTitle } from '@webqit/util/str/index.js';\n\nexport const _wq = ( target, ...args ) => __wq( target, 'oohtml', ...args );\n\nexport const env = {};\n\nexport function _init( name, $config, $defaults ) {\n    const window = this, realdom = realdomInit.call( window );\n    env.window = window;\n    if ( !window.webqitConfig ) {\n        window.webqitConfig = realdom.meta( 'webqit' ).json();\n    }\n    window.webqit || ( window.webqit = {} );\n    window.webqit.oohtml || ( window.webqit.oohtml = {} );\n    window.webqit.oohtml.configs || ( window.webqit.oohtml.configs = {} );\n    // ---------------------\n    const configKey = name.toUpperCase().replace( '-', '_' );\n    if ( !window.webqit.oohtml.configs[ configKey ] ) {\n        window.webqit.oohtml.configs[ configKey ] =  {};\n        const config = window.webqit.oohtml.configs[ configKey ];\n        _merge( 2, config, $defaults, $config, realdom.meta( name ).json() );\n        if ( window.webqitConfig.prefix ) {\n            Object.keys( config ).forEach( main => {\n                Object.keys( config[ main ] ).forEach( key => {\n                    if ( main === 'api' && typeof config[ main ][ key ] === 'string' ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }${ _toTitle( config[ main ][ key ] ) }`\n                    } else if ( [ 'attr', 'elements' ].includes( main ) && config[ main ][ key ]?.startsWith( 'data-' ) === false ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }-${ config[ main ][ key ] }`\n                    }\n                } );\n            } );\n        }\n    }\n    // ---------------------\n    return { config: window.webqit.oohtml.configs[ configKey ], realdom, window };\n}\n\nexport function getInternalAttrInteraction( node, attrName ) {\n\treturn __wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n}\nexport function internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = __wq( node, 'realdom', 'internalAttrInteractions' ).get( attrName );\n\t__wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t__wq( node, 'realdom', 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\nexport function _compare( a, b, depth = 1, objectSizing = false ) {\n    if ( depth && typeof a === 'object' && a && typeof b === 'object' && b && ( !objectSizing || Object.keys( a ).length === Object.keys( b ).length ) ) {\n        for ( let key in a ) {\n            if ( !_compare( a[ key ], b[ key ], depth - 1, objectSizing ) ) return false;\n        }\n        return true;\n    }\n    if ( Array.isArray( a ) && Array.isArray( b ) && a.length === b.length ) {\n        return ( b = b.slice( 0 ).sort() ) && a.slice( 0 ).sort().every( ( valueA, i ) => valueA === b[ i ] );\n    }\n    return a === b;\n}\n\nexport function _splitOuter( str, delim ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}\n\n// Unique ID generator\nexport const _uniqId = () => ( 0 | Math.random() * 9e6 ).toString( 36 );\n\n// Hash of anything generator\nconst hashTable = new Map;\nexport function _toHash( val ) {\n    let hash;\n    if ( !( hash = hashTable.get( val ) ) ) {\n        hash = _uniqId();\n        hashTable.set( val, hash );\n    }\n    return hash;\n}\n\n// Value of any hash\nexport function _fromHash( hash ) {\n    let val;\n    hashTable.forEach( ( _hash, _val ) => {\n        if ( _hash === hash ) val = _val;\n    } );\n    return val;\n}", "\n/**\n * @imports\n */\nimport { getDefs } from './index.js';\nimport { _wq, env } from '../util.js';\n\nexport default class HTMLModule {\n\n    /**\n     * @instance\n     */\n    static instance(host) {\n        return _wq(host).get('defsmanager::instance') || new this(host);\n    }\n\n    /**\n     * @constructor\n     */\n    constructor(host, parent = null, level = 0) {\n        const { window } = env, { webqit: { realdom, oohtml: { configs } } } = window;\n        _wq(host).get(`defsmanager::instance`)?.dispose();\n        _wq(host).set(`defsmanager::instance`, this);\n        this.window = window;\n        this.host = host;\n        this.config = configs.HTML_IMPORTS;\n        this.parent = parent;\n        this.level = level;\n        this.defs = getDefs(this.host);\n        this.defId = (this.host.getAttribute(this.config.attr.def) || '').trim();\n        this.validateDefId(this.defId);\n        // ----------\n        this.realtimeA = realdom.realtime(this.host.content).children(record => {\n            this.expose(record.exits, false); // Must come first\n            this.expose(record.entrants, true);\n        }, { live: true, timing: 'sync' });\n        // ----------\n        this.realtimeB = realdom.realtime(this.host).attr(['src', 'loading'], (...args) => this.evaluateLoading(...args), {\n            live: true,\n            atomic: true,\n            timing: 'sync',\n            lifecycleSignals: true\n        });\n        // ----------\n        this.realtimeC = this.evalInheritance();\n        // ----------\n    }\n\n    /**\n     * Validates export ID.\n     * \n     * @param String     defId\n     *\n     * @returns Void\n     */\n    validateDefId(defId) {\n        if (['@', '/', '*', '#'].some(token => defId.includes(token))) {\n            throw new Error(`The export ID \"${defId}\" contains an invalid character.`);\n        }\n    }\n\n    /**\n     * Maps module contents as defs.\n     * \n     * @param Array     entries\n     * @param Bool      isConnected\n     *\n     * @returns Void\n     */\n    expose(entries, isConnected) {\n        const { window } = env, { webqit: { Observer } } = window;\n        let dirty, allFragments = this.defs['#'] || [];\n        entries.forEach(entry => {\n            if (!entry || entry.nodeType !== 1) return;\n            const isTemplate = entry.matches(this.config.templateSelector);\n            const defId = (entry.getAttribute(isTemplate ? this.config.attr.def : this.config.attr.fragmentdef) || '').trim();\n            if (isConnected) {\n                if (isTemplate && defId) {\n                    new HTMLModule(entry, this.host, this.level + 1);\n                } else {\n                    allFragments.push(entry);\n                    dirty = true;\n                    if (typeof requestIdleCallback === 'function') {\n                        requestIdleCallback(() => {\n                            this.config.idleCompilers?.forEach(callback => callback.call(this.window, entry));\n                        });\n                    }\n                }\n                if (defId) {\n                    this.validateDefId(defId);\n                    Observer.set(this.defs, (!isTemplate && '#' || '') + defId, entry);\n                }\n            } else {\n                if (isTemplate && defId) { HTMLModule.instance(entry).dispose(); }\n                else {\n                    allFragments = allFragments.filter(x => x !== entry);\n                    dirty = true;\n                }\n                if (defId) Observer.deleteProperty(this.defs, (!isTemplate && '#' || '') + defId);\n            }\n        });\n        if (dirty) Observer.set(this.defs, '#', allFragments);\n    }\n\n    /**\n     * Evaluates remote content loading.\n     *\n     * @param AbortSignal   signal\n     * \n     * @returns Void\n     */\n    evaluateLoading([record1, record2], { signal }) {\n        const { window: { webqit: { Observer } } } = env;\n        const src = (record1.value || '').trim();\n        if (!src) return;\n        let $loadingPromise, loadingPromise = promise => {\n            if (!promise) return $loadingPromise; // Get\n            $loadingPromise = promise.then(() => interception.remove()); // Set\n        };\n        const loading = (record2.value || '').trim();\n        const interception = Observer.intercept(this.defs, 'get', async (descriptor, recieved, next) => {\n            if (loading === 'lazy') { loadingPromise(this.load(src, true)); }\n            await loadingPromise();\n            return next();\n        }, { signal });\n        if (loading !== 'lazy') { loadingPromise(this.load(src)); }\n    }\n\n    /**\n     * Fetches a module's \"src\".\n     *\n     * @param String src\n     *\n     * @return Promise\n     */\n    #fetchedURLs = new Set;\n    #fetchInFlight;\n    load(src) {\n        const { window } = env;\n        if (this.#fetchedURLs.has(src)) {\n            // Cache busting is needed to \n            return Promise.resolve();\n        }\n        this.#fetchedURLs.add(src);\n        if (this.#fetchedURLs.size === 1 && this.host.content.children.length) {\n            return Promise.resolve();\n        }\n        // Ongoing request?\n        this.#fetchInFlight?.controller.abort();\n        // The promise\n        const controller = new AbortController();\n        const fire = (type, detail) => this.host.dispatchEvent(new window.CustomEvent(type, { detail }));\n        const request = window.fetch(src, { signal: controller.signal, element: this.host }).then(response => {\n            return response.ok ? response.text() : Promise.reject(response.statusText);\n        }).then(content => {\n            this.host.innerHTML = content.trim(); // IMPORTANT: .trim()\n            fire('load');\n            return this.host;\n        }).catch(e => {\n            console.error(`Error fetching the bundle at \"${src}\": ${e.message}`);\n            this.#fetchInFlight = null;\n            fire('loaderror');\n            return this.host;\n        });\n        this.#fetchInFlight = { request, controller };\n        return request;\n    }\n\n    /**\n     * Evaluates module inheritance.\n     *\n     * @returns Void|AbortController\n     */\n    evalInheritance() {\n        if (!this.parent) return [];\n        const { window: { webqit: { Observer } } } = env;\n        let extendedId = (this.host.getAttribute(this.config.attr.extends) || '').trim();\n        let inheritedIds = (this.host.getAttribute(this.config.attr.inherits) || '').trim().split(' ').map(id => id.trim()).filter(x => x);\n        const handleInherited = records => {\n            records.forEach(record => {\n                if (Observer.get(this.defs, record.key) !== record.oldValue) return;\n                if (['get'/*initial get*/, 'set', 'def'].includes(record.type)) {\n                    Observer[record.type.replace('get', 'set')](this.defs, record.key, record.value);\n                } else if (record.type === 'delete') {\n                    Observer.deleteProperty(this.defs, record.key);\n                }\n            });\n        };\n        const realtimes = [];\n        const parentDefsObj = getDefs(this.parent);\n        if (extendedId) {\n            realtimes.push(Observer.reduce(parentDefsObj, [extendedId, this.config.api.defs, Infinity], Observer.get, handleInherited, { live: true }));\n        }\n        if (inheritedIds.length) {\n            realtimes.push(Observer.get(parentDefsObj, inheritedIds.includes('*') ? Infinity : inheritedIds, handleInherited, { live: true }));\n        }\n        return realtimes;\n    }\n\n    /**\n     * Disposes the instance and its processes.\n     *\n     * @returns Void\n     */\n    dispose() {\n        this.realtimeA.disconnect();\n        this.realtimeB.disconnect();\n        this.realtimeC.forEach(r => (r instanceof Promise ? r.then(r => r.abort()) : r.abort()));\n        Object.entries(this.defs).forEach(([key, entry]) => {\n            if (key.startsWith('#')) return;\n            HTMLModule.instance(entry).dispose();\n        });\n    }\n}\n", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default function() {\n    const { window } = env, { webqit } = window;\n    if ( webqit.DOMContextRequestEvent ) return webqit.DOMContextRequestEvent;\n    class DOMContextRequestEvent extends window.Event {\n        /**\n         * @constructor\n         */\n        constructor( ...args ) {\n            const callback = args.pop();\n            if ( typeof callback !== 'function' ) throw new Error( `Callback must be provided.` );\n            const options = args.pop();\n            if ( !options?.kind ) throw new Error( `\"options.kind\" must be specified.` );\n            const eventNames = [ 'contextrequest', 'contextclaim' ];\n            const type = args.pop() || eventNames[ 0 ];\n            if ( !eventNames.includes( type ) ) throw new Error( `Invalid event type. Must be one of: ${ eventNames.join( ',' ) }` );\n            // -------------\n            const { kind, detail, targetContext, live, signal, diff, ...otherOpts } = options;\n            super( type, { ...otherOpts, bubbles: otherOpts.bubbles !== false  } );\n            // -------------\n            Object.defineProperty( this, 'callback', { get: () => callback } );\n            Object.defineProperty( this, 'kind', { get: () => kind } );\n            Object.defineProperty( this, 'targetContext', { get: () => targetContext } );\n            Object.defineProperty( this, 'detail', { get: () => detail } );\n            Object.defineProperty( this, 'live', { get: () => live } );\n            Object.defineProperty( this, 'signal', { get: () => signal } );\n            Object.defineProperty( this, 'diff', { get: () => diff } );\n            Object.defineProperty( this, 'options', { get: () => otherOpts } );\n            Object.defineProperty( this, 'meta', { value: {} } );\n        }\n\n        get target() { return super.target || this.meta.target; }\n        get answered() { return this.meta.answered || false; }\n\n        /**\n         * @respondWith\n         */\n        respondWith( response ) {\n            this.meta.answered = true;\n            if ( this.diff ) {\n                if ( '_prevValue' in this && this._prevValue === response ) return;\n                Object.defineProperty( this, '_prevValue', { value: response, configurable: true } );\n            }\n            return this.callback( response );\n        }\n    }\n    webqit.DOMContextRequestEvent = DOMContextRequestEvent;\n    return DOMContextRequestEvent;\n}", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default class DOMContextResponse extends AbortController {\n    constructor( callback ) {\n        super();\n        callback( response => {\n            const { window: { webqit: { Observer } } } = env;\n            Observer.defineProperty( this, 'value', { value: response, configurable: true, enumerable: true } );\n        }, this );\n    }\n}", "\nexport default class DuplicateContextError extends Error {}", "\n/**\n * @imports\n */\nimport _DOMContextRequestEvent from './_DOMContextRequestEvent.js';\nimport DOMContextResponse from './DOMContextResponse.js';\nimport DOMContext from './DOMContext.js';\nimport DuplicateContextError from './DuplicateContextError.js';\nimport { _wq } from '../util.js';\n\nconst waitListMappings = new Map;\nexport default class DOMContexts {\n\n    /**\n     * @instance\n     */\n    static instance( host ) {\n        return _wq( host ).get( 'contexts::instance' ) || new this( host );;\n    }\n\n    /**\n     * @constructor\n     */\n    constructor( host ) {\n        _wq( host ).get( `contexts::instance` )?.dispose();\n        _wq( host ).set( `contexts::instance`, this );\n        const priv = { host, contexts: new Set };\n        Object.defineProperty( this, '#', { get: () => priv } );\n    }\n\n    /**\n     * @Symbol.iterator\n     */\n    [ Symbol.iterator ] () { return this[ '#' ].contexts[ Symbol.iterator ](); }\n\n    /**\n     * @length\n     */\n    get length() { return this[ '#' ].contexts.size; }\n\n    /**\n     * @find()\n     */\n    find( ...args ) {\n        return [ ...this[ '#' ].contexts ].find( ctx => {\n            if ( typeof args[ 0 ] === 'function' ) return args[ 0 ]( ctx );\n            return ctx.constructor.kind === args[ 0 ] && ( !args[ 1 ] || ctx.detail === args[ 1 ] );\n        } );\n    }\n\n    /**\n     * @attach()\n     */\n    attach( ctx ) {\n        if ( !( ctx instanceof DOMContext) ) throw new TypeError( `Context is not a valid DOMContext instance.` );\n        if ( this.find( ctx.constructor.kind, ctx.detail ) ) {\n            throw new DuplicateContextError( `Context of same kind \"${ ctx.constructor.kind }\"${ ctx.detail ? ` and detail \"${ ctx.detail }\"` : '' } already exists.` );\n        }\n        this[ '#' ].contexts.add( ctx );\n        ctx.initialize( this[ '#' ].host );\n    }\n\n    /**\n     * @detach()\n     */\n    detach( ctx ) {\n        ctx.dispose( this[ '#' ].host );\n        this[ '#' ].contexts.delete( ctx );\n    }\n\n    /**\n     * @request()\n     */\n    request( ...args ) {\n        return new DOMContextResponse( ( emitter, responseInstance ) => {\n            if ( typeof args[ args.length - 1 ] !== 'function' ) {\n                if ( !args[ args.length - 1 ] ) { args[ args.length - 1 ] = emitter; }\n                else { args.push( emitter ); }\n            }\n\n            let options;\n            if ( ( options = args.find( arg => typeof arg === 'object' && arg ) ) && options.live ) {\n                if ( options.signal ) options.signal.addEventListener( 'abort', () => responseInstance.abort() );\n                args[ args.indexOf( options ) ] = { ...options, signal: responseInstance.signal };\n            }\n            const event = new ( _DOMContextRequestEvent() )( ...args );\n            this[ '#' ].host.dispatchEvent( event );\n        } );\n    }\n\n}", "\n/**\n * @imports\n */\nimport { isDocument, isShadowRoot } from '@webqit/realdom';\nimport DOMContexts from './DOMContexts.js';\nimport { env } from '../util.js';\n\nexport default class DOMContext {\n\n    /**\n     * To be implemented by subclasses\n     */\n    static kind;\n\n    /**\n     * @createRequest\n     */\n    static createRequest() { return { kind: this.kind }; }\n    \n    /**\n     * @constructor\n     */\n    constructor( detail = null ) {\n        Object.defineProperty( this, 'detail', { get: () => detail } );\n        Object.defineProperty( this, 'subscriptions', { value: new Set } );\n    }\n\n    /**\n     * @configs\n     */\n    get configs() {\n        const { window: { webqit: { oohtml: { configs } } } } = env;\n        return configs;\n    }\n\n    /**\n     * @name\n     */\n    get name() { return isDocument(this.host) || isShadowRoot(this.host) ? Infinity : this.host.getAttribute( this.configs.CONTEXT_API.attr.contextname ); }\n\n    /**\n     * @subscribed()\n     */\n    subscribed( event ) {}\n\n    /**\n     * @handle()\n     */\n    handle( event ) {}\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) {}\n\n    /**\n     * @matchEvent\n     */\n    matchEvent( event ) {\n        return event.kind === this.constructor.kind\n        && ( !event.targetContext || event.targetContext === this.name );\n    }\n\n    /**\n     * @handleEvent()\n     */\n    handleEvent( event ) {\n        if ( this.disposed || typeof event.respondWith !== 'function'  ) return;\n        if ( event.type === 'contextclaim' ) {\n            if ( !( event.detail instanceof DOMContext ) || event.target === this.host ) return;\n            const claims = new Set;\n            this.subscriptions.forEach( subscriptionEvent => {\n                if ( !event.target.contains( subscriptionEvent.target ) || !event.detail.matchEvent( subscriptionEvent ) ) return;\n                this.subscriptions.delete( subscriptionEvent );\n                this.unsubscribed( subscriptionEvent );\n                claims.add( subscriptionEvent );\n            } );\n            if ( claims.size ) { return event.respondWith( claims ); }\n        }\n        if ( event.type === 'contextrequest' ) {\n            if ( !this.matchEvent( event ) ) return;\n            if ( event.live ) {\n                this.subscriptions.add( event );\n                this.subscribed( event );\n                event.signal?.addEventListener( 'abort', () => {\n                    this.subscriptions.delete( event );\n                    this.unsubscribed( event );\n                } );\n            }\n            event.stopPropagation();\n            return this.handle( event );\n        }\n    }\n\n    /**\n     * @initialize()\n     */\n    initialize( host ) {\n        this.host = host;\n        this.disposed = false;\n        host.addEventListener( 'contextrequest', this );\n        host.addEventListener( 'contextclaim', this );\n        const { value: claims } = DOMContexts.instance( host ).request( 'contextclaim', { kind: this.constructor.kind, detail: this } );\n        claims?.forEach( subscriptionEvent => {\n            this.subscriptions.add( subscriptionEvent );\n            this.subscribed( subscriptionEvent );\n            this.handle( subscriptionEvent );\n        } );\n        return this;\n    }\n     \n    /**\n     * @dispose()\n     */\n    dispose( host ) {\n        this.disposed = true;\n        host.removeEventListener( 'contextrequest', this );\n        host.removeEventListener( 'contextclaim', this );\n        this.subscriptions.forEach( subscriptionEvent => {\n            this.subscriptions.delete( subscriptionEvent );\n            this.unsubscribed( subscriptionEvent );\n            const { target } = subscriptionEvent;\n            subscriptionEvent.meta.answered = false;\n            target.dispatchEvent( subscriptionEvent );\n        } );\n        return this;\n    }\n\n}", "\n/**\n * @imports\n */\nimport DOMContext from '../context-api/DOMContext.js';\nimport { getDefs } from './index.js';\nimport { env } from '../util.js';\n\nexport default class HTMLImportsContext extends DOMContext {\n\n    /**\n     * @kind\n     */\n    static kind = 'html-imports';\n\n    /**\n     * @createRequest\n     */\n    static createRequest(detail = null) {\n        const request = super.createRequest();\n        if (detail?.startsWith('/')) {\n            request.detail = detail;\n            request.targetContext = Infinity;\n        } else if (detail?.startsWith('@')) {\n            const [targetContext, ..._detail] = detail.slice(1).split(/(?<=\\w)(?=\\/|#)/).map(s => s.trim());\n            request.targetContext = targetContext;\n            request.detail = _detail.join('');\n        } else { request.detail = detail; }\n        return request;\n    }\n\n    /**\n     * @localModules\n     */\n    get localModules() { return getDefs(this.host); }\n    get inheritedModules() { return this.#inheritedModules; }\n    #inheritedModules = {};\n\n    /**\n     * @handle()\n     */\n\n    handle(event) {\n        const { window: { webqit: { Observer } } } = env;\n        // Any existing event.meta.controller? Abort!\n        event.meta.controller?.abort();\n        // Parse and translate detail\n        let path = (event.detail || '').split(/\\/|(?<=\\w)(?=#)/g).map(x => x.trim()).filter(x => x);\n        if (!path.length) return event.respondWith();\n        path = path.join(`/${this.configs.HTML_IMPORTS.api.defs}/`)?.split('/').map(x => x === '*' ? Infinity : x) || [];\n        // We'll now fulfill request\n        const options = { live: event.live, sig_nal: event.signal, descripted: true };\n        event.meta.controller = Observer.reduce(this.#modules, path, Observer.get, (m) => {\n            if (Array.isArray(m)) {\n                if (!m.length) {\n                    event.respondWith();\n                    return;\n                }\n                // Paths with wildcard\n                for (const n of m) {\n                    event.respondWith(n);\n                }\n            } else {\n                event.respondWith(m.value);\n            }\n        }, options);\n    }\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed(event) { event.meta.controller?.abort(); }\n\n    /**\n     * @initialize()\n     */\n    #modules;\n    #controller1;\n    #controller2;\n    initialize(host) {\n        this.host = host;\n        const { window: { webqit: { Observer } } } = env;\n        // ----------------\n        // Resolve\n        const resolve = () => {\n            for (const key of new Set([...Object.keys(this.localModules), ...Object.keys(this.inheritedModules), ...Object.keys(this.#modules)])) {\n                if (!Observer.has(this.localModules, key) && !Observer.has(this.inheritedModules, key)) {\n                    Observer.deleteProperty(this.#modules, key);\n                } else if (key === '#' && Observer.has(this.localModules, key) && Observer.has(this.inheritedModules, key)) {\n                    Observer.set(this.#modules, key, [...Observer.get(this.localModules, key), ...Observer.get(this.inheritedModules, key)]);\n                } else {\n                    const _module = Observer.get(this.localModules, key) || Observer.get(this.inheritedModules, key);\n                    if (Observer.get(this.#modules, key) !== _module) {\n                        Observer.set(this.#modules, key, _module);\n                    }\n                }\n            }\n        };\n        // ----------------\n        // Observe local\n        this.#modules = { ...this.localModules };\n        this.#controller1?.abort();\n        this.#controller1 = Observer.observe(this.localModules, () => resolve('local'), { timing: 'sync' });\n        // ----------------\n        // If host has importscontext attr, compute that\n        const $config = this.configs.HTML_IMPORTS;\n        if (this.host.matches && $config.attr.importscontext) {\n            const realdom = this.host.ownerDocument.defaultView.webqit.realdom;\n            let prevRef;\n            this.#controller2?.disconnect();\n            this.#controller2 = realdom.realtime(this.host).attr($config.attr.importscontext, (record, { signal }) => {\n                const moduleRef = (record.value || '').trim();\n                prevRef = moduleRef;\n                // This superModules contextrequest is automatically aborted by the injected signal below\n                this.#inheritedModules = {};\n                const request = { ...this.constructor.createRequest(moduleRef ? `${moduleRef}/*` : '*'), live: true, signal, diff: true };\n                this.host.parentNode[this.configs.CONTEXT_API.api.contexts].request(request, (m) => {\n                    if (!m) {\n                        this.#inheritedModules = {};\n                        resolve('inherited');\n                    } else if (m.type === 'delete') {\n                        delete this.#inheritedModules[m.key];\n                        if (!Reflect.has(this.localModules, m.key)) {\n                            Observer.deleteProperty(this.#modules, m.key);\n                        }\n                    } else {\n                        this.#inheritedModules[m.key] = m.value;\n                        if (!Reflect.has(this.localModules, m.key) && Reflect.get(this.#modules, m.key) !== m.value) {\n                            Observer.set(this.#modules, m.key, m.value);\n                        }\n                    }\n                });\n                resolve('inherited');\n            }, { live: true, timing: 'sync', oldValue: true, lifecycleSignals: true });\n        }\n        // ----------------\n        return super.initialize(host);\n    }\n\n    /**\n     * @dispose()\n     */\n    dispose(host) {\n        // Stop listening for sources\n        this.#controller1?.abort();\n        this.#controller2?.disconnect();\n        // Now, stop listening for contextrequest and contextclaim events\n        // And relinquish own subscribers to owner context\n        return super.dispose(host);\n    }\n}\n", "\n/**\n * @imports\n */\nimport { isNodeInterface } from '@webqit/realdom';\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport { _wq, env } from '../util.js';\n\n/**\n * Creates the HTMLImportElement class.\n * \n * @param Object config \n * \n * @return HTMLImportElement\n */\nexport default function () {\n    const { window } = env, { webqit } = window, { realdom, oohtml: { configs } } = webqit;\n    if (webqit.HTMLImportElement) return webqit.HTMLImportElement;\n    const BaseElement = configs.HTML_IMPORTS.elements.import.includes('-') ? window.HTMLElement : class { };\n    class HTMLImportElement extends BaseElement {\n\n        /**\n         * @instance\n         * \n         * @param HTMLElement node\n         * \n         * @returns \n         */\n        static instance(node) {\n            if (configs.HTML_IMPORTS.elements.import.includes('-') && (node.nodeName === this.nodeName)) return node;\n            return _wq(node).get('import::instance') || new this(node);\n        }\n\n        /**\n         * @constructor\n         */\n        constructor(...args) {\n            super();\n            // --------\n            const el = args[0] || this;\n            _wq(el).set('import::instance', this);\n            Object.defineProperty(this, 'el', { get: () => el, configurable: false });\n\n            const priv = {};\n            Object.defineProperty(this, '#', { get: () => priv, configurable: false });\n            priv.slottedElements = new Set;\n\n            priv.setAnchorNode = anchorNode => {\n                priv.anchorNode = anchorNode;\n                return anchorNode;\n            };\n\n            priv.live = callback => {\n                if (priv.liveImportsRealtime) throw new Error(`Import element already in live mode.`);\n                const parentNode = this.el.isConnected ? this.el.parentNode : priv.anchorNode.parentNode;\n                priv.liveImportsRealtime = realdom.realtime(this.el).attr(configs.HTML_IMPORTS.attr.ref, (record, { signal }) => {\n                    priv.moduleRef = record.value;\n                    const moduleRef = priv.moduleRef.includes('#') ? priv.moduleRef : `${priv.moduleRef}#`/* for live children */;\n                    const request = { ...HTMLImportsContext.createRequest(moduleRef), live: signal && true, signal, diff: !moduleRef.endsWith('#') };\n                    parentNode[configs.CONTEXT_API.api.contexts].request(request, response => {\n                        callback((isNodeInterface(response, 'HTMLTemplateElement') ? [...response.content.children] : (\n                            Array.isArray(response) ? response : response && [response]\n                        )) || []);\n                    });\n                }, { live: true, timing: 'sync', lifecycleSignals: true });\n                priv.autoDestroyRealtime = realdom.realtime(window.document).track(parentNode, () => {\n                    priv.die();\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' });\n            };\n\n            priv.die = () => {\n                priv.autoDestroyRealtime?.disconnect();\n                priv.liveImportsRealtime?.disconnect();\n                priv.liveImportsRealtime = null;\n            };\n\n            priv.hydrate = (anchorNode, slottedElements) => {\n                anchorNode.replaceWith(priv.setAnchorNode(this.createAnchorNode()));\n                priv.live(fragments => {\n                    // The default action\n                    if (priv.originalsRemapped) return this.fill(fragments);\n                    // Initial remap action\n                    const identifiersMap = fragments.map((fragment, i) => ({ el: fragment, fragmentDef: fragment.getAttribute(configs.HTML_IMPORTS.attr.fragmentdef) || '', tagName: fragment.tagName, i }));\n                    slottedElements.forEach((slottedElement, i) => {\n                        const tagName = slottedElement.tagName, fragmentDef = slottedElement.getAttribute(configs.HTML_IMPORTS.attr.fragmentdef) || '';\n                        const originalsMatch = (i++, identifiersMap.find(fragmentIdentifiers => fragmentIdentifiers.tagName === tagName && fragmentIdentifiers.fragmentDef === fragmentDef && fragmentIdentifiers.i === i));\n                        if (originalsMatch) _wq(slottedElement).set('original@imports', originalsMatch.el); // Or should we throw integrity error here?\n                        _wq(slottedElement).set('slot@imports', this.el);\n                        priv.slottedElements.add(slottedElement);\n                    });\n                    priv.originalsRemapped = true;\n                    priv.autoRestore();\n                });\n            };\n\n            priv.autoRestore = (callback = null) => {\n                priv.autoRestoreRealtime?.disconnect();\n                if (callback) callback();\n                const restore = () => {\n                    if (this.el.isConnected) return;\n                    this.el.setAttribute('data-nodecount', 0);\n                    priv.internalMutation = true;\n                    priv.anchorNode.replaceWith(this.el);\n                    priv.internalMutation = false;\n                    priv.setAnchorNode(null);\n                };\n                if (!priv.slottedElements.size) return restore();\n                const autoRestoreRealtime = realdom.realtime(priv.anchorNode.parentNode).observe([...priv.slottedElements], record => {\n                    record.exits.forEach(outgoingNode => {\n                        _wq(outgoingNode).delete('slot@imports');\n                        priv.slottedElements.delete(outgoingNode);\n                    });\n                    if (!priv.slottedElements.size) {\n                        autoRestoreRealtime.disconnect();\n                        // At this point, ignore if this is a removal involving the whole parent node\n                        if (!record.target.isConnected) return;\n                        restore();\n                    }\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' });\n                priv.autoRestoreRealtime = autoRestoreRealtime;\n            };\n\n            priv.connectedCallback = () => {\n                if (priv.internalMutation) return;\n                priv.live(fragments => this.fill(fragments));\n            };\n\n            priv.disconnectedCallback = () => {\n                if (priv.internalMutation) return;\n                priv.die();\n            };\n        }\n\n        /**\n         * Creates the slot's anchor node.\n         *\n         * @return Element\n         */\n        createAnchorNode() {\n            if (window.webqit.env !== 'server') { return window.document.createTextNode('') }\n            const escapeElement = window.document.createElement('div');\n            escapeElement.textContent = this.el.outerHTML;\n            const anchorNode = window.document.createComment(escapeElement.innerHTML);\n            _wq(anchorNode).set('isAnchorNode', true);\n            return anchorNode;\n        }\n\n        /**\n         * Fills the slot with slottableElements\n         *\n         * @param Iterable  slottableElements\n         *\n         * @return void\n         */\n        fill(slottableElements, r) {\n            if (!this.el.isConnected && (!this['#'].anchorNode || !this['#'].anchorNode.isConnected)) {\n                // LiveImports must be responding to an event that just removed the subtree from DOM\n                return;\n            }\n            if (Array.isArray(slottableElements)) { slottableElements = new Set(slottableElements) }\n            // This state must be set before the diffing below and the serialization done at createAnchorNode()\n            this.el.setAttribute('data-nodecount', slottableElements.size);\n            this['#'].autoRestore(() => {\n                this['#'].slottedElements.forEach(slottedElement => {\n                    const slottedElementOriginal = _wq(slottedElement).get('original@imports');\n                    // If still available in source, simply leave unchanged\n                    // otherwise remove it from slot... to reflect this change\n                    if (slottableElements.has(slottedElementOriginal)) {\n                        slottableElements.delete(slottedElementOriginal);\n                    } else {\n                        this['#'].slottedElements.delete(slottedElement);\n                        // This removal will not be caught\n                        slottedElement.remove();\n                    }\n                });\n                // Make sure anchor node is what's in place...\n                // not the import element itslef - but all only when we have slottableElements.size\n                if (slottableElements.size && this.el.isConnected) {\n                    const newAnchorNode = this['#'].setAnchorNode(this.createAnchorNode());\n                    this['#'].internalMutation = true;\n                    this.el.replaceWith(newAnchorNode);\n                    this['#'].internalMutation = false;\n                }\n                // Insert slottables now\n                slottableElements.forEach(slottableElement => {\n                    // Clone each slottable element and give it a reference to its original\n                    const slottableElementClone = slottableElement.cloneNode(true);\n                    // The folllowing references must be set before adding to DODM\n                    if (!slottableElementClone.hasAttribute(configs.HTML_IMPORTS.attr.fragmentdef)) {\n                        slottableElementClone.toggleAttribute(configs.HTML_IMPORTS.attr.fragmentdef, true);\n                    }\n                    _wq(slottableElementClone).set('original@imports', slottableElement);\n                    _wq(slottableElementClone).set('slot@imports', this.el);\n                    this['#'].slottedElements.add(slottableElementClone);\n                    this['#'].anchorNode.before(slottableElementClone);\n                });\n            });\n        }\n\n        /**\n         * Empty slot.\n         *\n         * @return void\n         */\n        empty() { this['#'].slottedElements.forEach(slottedElement => slottedElement.remove()); }\n\n        /**\n         * Returns the slot's anchorNode.\n         *\n         * @return array\n         */\n        get anchorNode() { return this['#'].anchorNode; }\n\n        /**\n         * Returns the slot's module reference, if any.\n         *\n         * @return string\n         */\n        get moduleRef() { return this['#'].moduleRef; }\n\n        /**\n         * Returns the slot's slotted elements.\n         *\n         * @return array\n         */\n        get slottedElements() { return this['#'].slottedElements; }\n    }\n    if (configs.HTML_IMPORTS.elements.import.includes('-')) { customElements.define(configs.HTML_IMPORTS.elements.import, HTMLImportElement); }\n    webqit.HTMLImportElement = HTMLImportElement;\n    return HTMLImportElement;\n}", "\n/**\n * @imports\n */\nimport HTMLModule from './HTMLModule.js';\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport _HTMLImportElement from './_HTMLImportElement.js';\nimport { _wq, _init } from '../util.js';\n\n/**\n * Initializes HTML Modules.\n * \n * @param $config  Object\n *\n * @return Void\n */\nexport default function init($config = {}) {\n    const { config, window } = _init.call(this, 'html-imports', $config, {\n        elements: { import: 'import', },\n        attr: { def: 'def', extends: 'extends', inherits: 'inherits', ref: 'ref', importscontext: 'importscontext', },\n        api: { def: 'def', defs: 'defs', import: 'import' },\n    });\n    if (!config.attr.fragmentdef) { config.attr.fragmentdef = config.attr.def; }\n    config.templateSelector = `template[${window.CSS.escape(config.attr.def)}]`;\n    config.importsContextSelector = `[${window.CSS.escape(config.attr.importscontext)}]`;\n    config.slottedElementsSelector = `[${window.CSS.escape(config.attr.fragmentdef)}]:not(template)`;\n    const anchorNodeMatch = (start, end) => {\n        const starting = `starts-with(., \"${start}\")`;\n        const ending = `substring(., string-length(.) - string-length(\"${end}\") + 1) = \"${end}\"`;\n        return `${starting} and ${ending}`;\n    }\n    config.anchorNodeSelector = `comment()[${anchorNodeMatch(`&lt;${config.elements.import}`, `&lt;/${config.elements.import}&gt;`)}]`;\n    window.webqit.HTMLImportsContext = HTMLImportsContext;\n    window.webqit.HTMLImportElement = _HTMLImportElement();\n    exposeAPIs.call(window, config);\n    realtime.call(window, config);\n}\n\n/**\n * Returns the \"defs\" object associated with the given node.\n *\n * @param Element       node\n * @param Bool          autoCreate\n *\n * @return Object\n */\nexport function getDefs(node, autoCreate = true) {\n    if (!_wq(node).has('defs') && autoCreate) {\n        const defs = Object.create(null);\n        _wq(node).set('defs', defs);\n    }\n    return _wq(node).get('defs');\n}\n\n/**\n * Exposes HTML Modules with native APIs.\n *\n * @param Object        config\n *\n * @return Void\n */\nfunction exposeAPIs(config) {\n    const window = this, { webqit: { oohtml: { configs } } } = window;\n    // The \"def\" & \"defs\" properties\n    if (config.api.def in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.def}\" API!`); }\n    if (config.api.defs in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.defs}\" API!`); }\n    // No-conflict assertions\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.def, {\n        get: function () {\n            return this.getAttribute(config.attr.def);\n        }\n    });\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.defs, {\n        get: function () {\n            return getDefs(this);\n        }\n    });\n    // The \"scoped\" property\n    Object.defineProperty(window.HTMLTemplateElement.prototype, 'scoped', {\n        configurable: true,\n        get() { return this.hasAttribute('scoped'); },\n        set(value) { this.toggleAttribute('scoped', value); },\n    });\n    // The Import API\n    [window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype].forEach(prototype => {\n        // No-conflict assertions\n        const type = prototype === window.Document.prototype ? 'Document' : (prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element');\n        if (config.api.import in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.import}\" API!`); }\n        if (config.api.defs in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.defs}\" API!`); }\n        // Definitions\n        Object.defineProperty(prototype, config.api.defs, {\n            get: function () {\n                return getDefs(this);\n            }\n        });\n        Object.defineProperty(prototype, config.api.import, {\n            value: function (ref, live = false, callback = null) {\n                return importRequest(this, ...arguments);\n            }\n        });\n    });\n    function importRequest(context, ref, live = false, callback = null) {\n        let options = {};\n        if (typeof live === 'function') {\n            callback = live;\n            live = false;\n        } else if (typeof live === 'object' && live) {\n            options = { ...live, ...options };\n        } else { options = { live }; }\n        const request = { ...HTMLImportsContext.createRequest(ref), ...options };\n        return context[configs.CONTEXT_API.api.contexts].request(request, callback);\n    }\n}\n\n/**\n * Performs realtime capture of elements and their attributes\n * and their module query results; then resolves the respective import elements.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime(config) {\n    const window = this, { webqit: { Observer, realdom, oohtml: { configs }, HTMLImportElement, HTMLImportsContext } } = window;\n\n    // ------------\n    // MODULES\n    // ------------\n    const attachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        if (!contextsApi.find(HTMLImportsContext.kind)) {\n            contextsApi.attach(new HTMLImportsContext);\n        }\n    };\n    const detachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        const ctx = contextsApi.find(HTMLImportsContext.kind);\n        if (ctx && ( /* disconnect? */!host.isConnected || /* not inheriting && no localModules? */(\n            !host.matches?.(config.importsContextSelector) && !Object.keys(ctx.localModules).length\n        ))) {\n            contextsApi.detach(ctx);\n        }\n    };\n    // ------------\n    realdom.realtime(window.document).query([config.templateSelector, config.importsContextSelector], record => {\n        record.entrants.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                htmlModule.ownerContext = entry.scoped ? entry.parentNode : entry.getRootNode();\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId) { Observer.set(ownerContextModulesObj, htmlModule.defId, entry); }\n                // The ownerContext's defs - ownerContextModulesObj - has to be populated\n                // Before attaching a context instance to it, to give the just created context something to use for\n                // fullfiling reclaimed requests.\n                attachImportsContext(htmlModule.ownerContext);\n            } else {\n                attachImportsContext(entry);\n            }\n        });\n        record.exits.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                //if (!htmlModule.ownerContext) return; // JSDOM sometimes\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId && htmlModule.ownerContext.isConnected) { Observer.deleteProperty(ownerContextModulesObj, htmlModule.defId); }\n                detachImportsContext(htmlModule.ownerContext);\n            } else {\n                detachImportsContext(entry);\n            }\n        });\n    }, { id: 'imports:template/importscontext', live: true, subtree: 'cross-roots', timing: 'sync', staticSensitivity: true, eventDetails: true });\n\n    // ------------\n    // IMPORTS\n    // ------------\n    realdom.realtime(window.document).query(config.elements.import, record => {\n        record.entrants.forEach(node => handleRealtime(node, true, record));\n        record.exits.forEach(node => handleRealtime(node, false, record));\n    }, { id: 'imports:import', live: true, subtree: 'cross-roots', timing: 'sync', deferred: true });\n    function handleRealtime(entry, connectedState) {\n        const elInstance = HTMLImportElement.instance(entry);\n        if (connectedState) { elInstance['#'].connectedCallback(); }\n        else { elInstance['#'].disconnectedCallback(); }\n    }\n    // Hydration\n    if (window.webqit.env === 'server') return;\n    realdom.realtime(window.document).query(`(${config.anchorNodeSelector})`, record => {\n        record.entrants.forEach(anchorNode => {\n            if (_wq(anchorNode).get('isAnchorNode')) return; // Doubling up on the early return above! Ignoring every just created anchorNode\n            const reviver = window.document.createElement('div');\n            reviver.innerHTML = anchorNode.nodeValue;\n            reviver.innerHTML = reviver.firstChild.textContent;\n            const importEl = reviver.firstChild;\n            let nodecount = parseInt(importEl.getAttribute('data-nodecount'));\n            const slottedElements = new Set;\n            let slottedElement = anchorNode;\n            while ((slottedElement = slottedElement.previousElementSibling) && slottedElement.matches(config.slottedElementsSelector) && nodecount--) {\n                slottedElements.add(slottedElement);\n            }\n            HTMLImportElement.instance(importEl)['#'].hydrate(anchorNode, slottedElements);\n        });\n    }, { id: 'imports:hydration', live: true, subtree: 'cross-roots', timing: 'sync' });\n}", "\n/**\n * @imports\n */\nimport init from './index.js';\n\n/**\n * @init\n */\ninit.call( window );"],
  "mappings": "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",
  "names": ["obj", "wq", "_wq", "target", "val", "window", "readReturn", "writeReturn", "window", "window", "window", "callback", "window", "dispatch", "sources", "callback", "window", "window", "callback", "window", "window", "r", "window", "window", "window", "HTMLImportsContext"]
}
