{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/arr/intersect.js", "../node_modules/@webqit/util/js/internals.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../node_modules/@webqit/realdom/src/Scheduler.js", "../node_modules/@webqit/realdom/src/realtime/Util.js", "../node_modules/@webqit/realdom/src/realtime/DOMSpec.js", "../node_modules/@webqit/realdom/src/realtime/Realtime.js", "../node_modules/@webqit/realdom/src/realtime/AttrRealtime.js", "../node_modules/@webqit/realdom/src/realtime/DOMRealtime.js", "../node_modules/@webqit/realdom/src/polyfills.js", "../node_modules/@webqit/realdom/src/index.js", "../node_modules/@webqit/util/str/toTitle.js", "../src/util.js", "../src/html-imports/HTMLModule.js", "../src/context-api/_DOMContextRequestEvent.js", "../src/context-api/DOMContextResponse.js", "../src/context-api/DuplicateContextError.js", "../src/context-api/DOMContexts.js", "../src/context-api/DOMContext.js", "../src/html-imports/HTMLImportsContext.js", "../src/html-imports/_HTMLImportElement.js", "../src/html-imports/index.js", "../src/html-imports/targets.browser.js"],
  "sourcesContent": ["\r\n/**\r\n * Tells if val is pure object.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"array\".\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the intersection of two arrays;\r\n * optionally using a custom matching function.\r\n *\r\n * @param array \tarr\r\n * @param array\t \tarr2\r\n * @param function \tcallback\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, arr2, callback = null) {\r\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \r\n\t\t? arr2.filter(val2 => callback(val1, val2)).length \r\n\t\t: arr2.indexOf(val1) !== -1\r\n\t);\r\n};\r\n", "/**\r\n * @imports\r\n */\r\nimport _intersect from '../arr/intersect.js';\r\n\r\n/**\r\n * Creates and/or returns an \"internals\" object for the given object.\r\n * \r\n * @param Any obj\r\n * @param String namespace\r\n * \r\n * @return Object\r\n */\r\nexport default function internals(obj, ...namespaces) {\r\n    if (!globalThis.webqit) { globalThis.webqit = {}; }\r\n    if (!globalThis.webqit.refs) {\r\n        Object.defineProperty(globalThis.webqit, 'refs', {value: new ObservableMap})\r\n    }\r\n    if (!arguments.length) return globalThis.webqit.refs;\r\n    let itnls = globalThis.webqit.refs.get(obj);\r\n    if (!itnls) {\r\n        itnls = new ObservableMap;\r\n        globalThis.webqit.refs.set(obj, itnls);\r\n    }\r\n    let _ns, _itnls;\r\n    while ((_ns = namespaces.shift())) {\r\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\r\n            itnls = new ObservableMap;\r\n            _itnls.set(_ns, itnls);\r\n        }\r\n    }\r\n    return itnls;\r\n}\r\n\r\nclass ObservableMap extends Map {\r\n    constructor( ...args ) {\r\n        super( ...args );\r\n        this.observers = new Set;\r\n    }\r\n    set( key, value ) {\r\n        let returnValue = super.set( key, value );\r\n        this.fire( 'set', key, value, key );\r\n        return returnValue;\r\n    }\r\n    delete( key ) {\r\n        let returnValue = super.delete( key );\r\n        this.fire( 'delete', key );\r\n        return returnValue;\r\n    }\r\n    has( key ) {\r\n        this.fire( 'has', key );\r\n        return super.has( key );\r\n    }\r\n    get( key ) {\r\n        this.fire( 'get', key );\r\n        return super.get( key );\r\n    }\r\n    keyNames() { return Array.from( super.keys() ); }\r\n    observe( type, key, callback ) {\r\n        const entry = { type, key, callback };\r\n        this.observers.add( entry );\r\n        return () => this.observers.delete( entry );\r\n    }\r\n    unobserve( type, key, callback ) {\r\n        if ( Array.isArray( type ) || Array.isArray( key ) ) {\r\n            throw new Error( `The \"type\" and \"key\" arguments can only be strings.` );\r\n        }\r\n        for ( let entry of this.observers ) {\r\n            if ( !( _intersection( [ type, '*' ], entry.type ) && _intersection( [ key, '*' ], entry.key ) && entry.callback === callback ) ) continue;\r\n            this.observers.delete( entry );\r\n        }\r\n    }\r\n    fire( type, key, ...args ) {\r\n        // IMPORTANT: Array.from() must be used so that new additions to this.observers\r\n        // during the loop aren't picked up!\r\n        for ( let entry of this.observers ) {\r\n            if ( !( _intersection( [ type, '*' ], entry.type ) && _intersection( [ key, '*' ], entry.key ) ) ) continue;\r\n            entry.callback( ...args );\r\n        }\r\n    }\r\n}\r\n\r\nconst _intersection = ( a, b ) => {\r\n    if ( Array.isArray( b ) ) return _intersect( a, b ).length;\r\n    return a.includes( b );\r\n}\r\n", "\r\n/**\r\n * Tells if val is of type \"function\".\r\n * This holds true for both regular functions and classes.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'function';\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is null.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === null || val === '';\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is of type \"undefined\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"object\".\r\n * This holds true for anything object, including built-ins.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from './isNull.js';\r\nimport _isUndefined from './isUndefined.js';\r\nimport _isTypeObject from './isTypeObject.js';\r\n\r\n/**\r\n * Tells if val is empty in its own type.\r\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\r\n * objects without keys, empty arrays.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \r\n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"function\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"number\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof Number || (typeof val === 'number');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNumber from './isNumber.js';\r\n/**\r\n * Tells if val is of type \"string\" or a numeric string.\r\n * This holds true for both numbers and numeric strings.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"string\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isString from './isString.js';\r\nimport _isUndefined from './isUndefined.js';\r\n\r\n/**\r\n * Tells if val is \"array-like\".\r\n * This holds true for anything that has a length property.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !_isString(val) && !_isUndefined(val.length);\r\n};\r\n", "\r\n/**\r\n * Adds an item if not already exist.\r\n *\r\n * @param array \tarr\r\n * @param array\t \t...itms\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, ...items) {\r\n\titems.forEach(itm => {\r\n\t\tif (arr.indexOf(itm) < 0) {\r\n\t\t\tarr.push(itm);\r\n\t\t}\r\n\t});\r\n\treturn arr;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the prototype chain.\r\n *\r\n * @param object \t\tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, until) {\r\n\tuntil = until || Object.prototype;\r\n\tuntil = until && !_isArray(until) ? [until] : until;\r\n\t// We get the chain of inheritance\r\n\tvar prototypalChain = [];\r\n\tvar obj = obj;\r\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\r\n\t\tprototypalChain.push(obj);\r\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\r\n\t}\r\n\treturn prototypalChain;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _pushUnique from '../arr/pushUnique.js';\r\nimport _getPrototypeChain from './getPrototypeChain.js';\r\n\r\n/**\r\n * Eagerly retrieves object members all down the prototype chain.\r\n *\r\n * @param object\t \tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return array\r\n */\r\nexport default function(obj, until) {\r\n\tvar keysAll = [];\r\n\t_getPrototypeChain(obj, until).forEach(obj => {\r\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\r\n\t});\r\n\treturn keysAll;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isObject from '../js/isObject.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _getAllPropertyNames from './getAllPropertyNames.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\r\n\tvar depth = 0;\r\n\tvar obj1 = objs.shift();\r\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\r\n\t\tdepth = obj1;\r\n\t\tobj1 = objs.shift();\r\n\t}\r\n\tif (!objs.length) {\r\n\t\tthrow new Error('_merge() requires two or more array/objects.');\r\n\t}\r\n\tobjs.forEach((obj2, i) => {\r\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.keys(obj2)).forEach(key => {\r\n\t\t\tif (!callback(key, obj1, obj2, i)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar valAtObj1 = obj1[key];\r\n\t\t\tvar valAtObj2 = obj2[key];\r\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \r\n\t\t\t&& (depth === true || depth > 0)) {\r\n\t\t\t\t// RECURSE...\r\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\r\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\r\n\t\t\t} else {\r\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\r\n\t\t\t\t\tif (isReplace) {\r\n\t\t\t\t\t\tobj1[key] = valAtObj2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj1.push(valAtObj2);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// In case we're setting a read-only property\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (withSymbols) {\r\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\treturn obj1;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _mergeCallback from './mergeCallback.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function(...objs) {\r\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\r\n\t\treturn true;\r\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isTypeArray from '../js/isTypeArray.js';\r\nimport _isEmpty from '../js/isEmpty.js';\r\nimport _isObject from '../js/isObject.js';\r\n\r\n/**\r\n * Casts an array-like object to an array.\r\n *\r\n * @param mixed \tval\r\n * @param bool\t \tcastObject\r\n *\r\n * @return array\r\n */\r\nexport default function(val, castObject = true) {\r\n\tif (_isArray(val)) {\r\n\t\treturn val;\r\n\t};\r\n\tif (!castObject && _isObject(val)) {\r\n\t\treturn [val];\r\n\t};\r\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\r\n\t\treturn [];\r\n\t};\r\n\tif (_isTypeArray(val)) {\r\n\t\treturn Array.prototype.slice.call(val);\r\n\t};\r\n\tif (_isObject(val)) {\r\n\t\treturn Object.values(val);\r\n\t};\r\n\treturn [val];\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isUndefined from '../js/isUndefined.js';\r\nimport _isNull from '../js/isNull.js';\r\nimport _arrFrom from '../arr/from.js';\r\n\r\n/**\r\n * Retrieves the value at the given path.\r\n *\r\n * A return value of undefined is ambiguous, and can mean either that the\r\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\r\n * know whether the path actually exists, pass an object as a third argument.\r\n * This object will have an \"exists\" key set to true/false.\r\n *\r\n * @param object \t\t\t\tctxt\r\n * @param array \t\t\t\tpath\r\n * @param object \t\t\t\ttrap\r\n * @param object \t\t\t\treciever\r\n *\r\n * @return mixed\r\n */\r\nexport default function(ctxt, path, trap = {}, reciever = {}) {\r\n\tpath = _arrFrom(path).slice();\r\n\tvar _ctxt = ctxt;\r\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\r\n\t\tvar _key = path.shift();\r\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\r\n\t\t\treciever.exists = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\r\n\t}\r\n\treciever.exists = true;\r\n\treturn _ctxt;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _isArray from '../js/isArray.js';\r\nimport _arrFrom from '../arr/from.js';\r\nimport _get from './get.js';\r\n\r\n/**\r\n * Sets a value to the given path.\r\n *\r\n * @param object \t\t\t\tobj\r\n * @param array \t\t\t\tpath\r\n * @param mixed \t\t\t\tval\r\n * @param object|function \t\tbuildTree\r\n * @param object \t\t\t\ttrap\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\r\n\tconst _set = (target, key, val) => {\r\n\t\tif (trap.set) {\r\n\t\t\treturn trap.set(target, key, val);\r\n\t\t} else {\r\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\r\n\t\t\t\ttarget.push(val);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[key] = val;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\tpath = _arrFrom(path);\r\n\tvar target = obj;\r\n\tfor(var i = 0; i < path.length; i ++) {\r\n\t\tif (i < path.length - 1) {\r\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar branch = _get(target, path[i], trap);\r\n\t\t\tif (!_isTypeObject(branch)) {\r\n\t\t\t\tif (trap.buildTree === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\r\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\r\n\t\t\t\tif (!branchSuccess) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget = branch;\r\n\t\t} else {\r\n\t\t\treturn _set(target, path[i], val);\r\n\t\t}\r\n\t}\r\n};\r\n", "\n/**\n * ---------------------------\n * Binds callbacks to requestAnimationFrame()\n * to create a central \"read/write\" phases for Ctxt access.\n * ---------------------------\n */\n\t\t\t\nexport default class Scheduler {\n\n\t/**\n\t * Starts the loop.\n\t *\n\t * @return this\n\t */\n\tconstructor( window, synthesis = false ) {\n\t\tObject.defineProperty( this, 'window', { value: window } );\n\t\tObject.defineProperty( this, 'readCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, 'writeCallbacks', { value: new Set } );\n\t\tObject.defineProperty( this, '_synthesis', { value: 0, writable: true } );\n\t\tif ( !synthesis && this.window.requestAnimationFrame ) {\n\t\t\tthis._loop();\n\t\t} else { this._synthesis ++; }\n\t}\n\n\tget synthesis() { return this._synthesis; }\n\n\tasync synthesizeWhile( callback ) {\n\t\tthis._synthesis ++;\n\t\tthis._fulfill();\n\t\tconst returnValue = await callback();\n\t\tthis._synthesis --;\n\t\treturn returnValue;\n\t}\n\n\t_fulfill() {\n\t\tfor ( const callback of this.readCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.readCallbacks.delete( callback );\n\t\t}\n\t\tfor ( const callback of this.writeCallbacks ) {\n\t\t\tcallback();\n\t\t\tthis.writeCallbacks.delete( callback );\n\t\t}\n\t}\n\n\t_loop() {\n\t\tthis.window.requestAnimationFrame( () => {\n\t\t\tthis._fulfill();\n\t\t\tthis._loop();\n\t\t} );\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"read\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonread( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.readCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.readCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * Binds a callback to the \"write\" phase.\n\t *\n\t * @param function \tcallback\n\t * @param bool\t\twithPromise\n\t *\n\t * @return void\n\t */\n\tonwrite( callback, withPromise = false ) {\n\t\tif ( withPromise ) {\n\t\t\treturn new Promise( resolve => {\n\t\t\t\tif ( this.synthesis ) {\n\t\t\t\t\tresolve( callback() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.writeCallbacks.add( () => {\n\t\t\t\t\t\tresolve( callback() );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tif ( this.synthesis ) {\n\t\t\tPromise.resolve().then( callback );\n\t\t} else {\n\t\t\tthis.writeCallbacks.add( callback );\n\t\t}\n\t}\n\t\n\t/**\n\t * A special construct for Ctxt manipulations that span\n\t * one or more read/write cycles.\n\t *\n\t * @param function \tread\n\t * @param function \twrite\n\t * @param mixed\t\tprevTransaction\n\t *\n\t * @return void|mixed\n\t */\n\tcycle( onread, onwrite, prevTransaction ) {\n\t\tthis.onread( () => {\n\t\t\t// Record initial values\n\t\t\tconst readReturn = onread( prevTransaction );\n\t\t\t// Call erite, the transation\n\t\t\tconst callWrite = ( readReturn ) => {\n\t\t\t\tif ( readReturn === undefined ) return;\n\t\t\t\tthis.onwrite( () => {\n\t\t\t\t\tconst writeReturn = onwrite( readReturn, prevTransaction );\n\t\t\t\t\t// Repeat transaction\n\t\t\t\t\tconst repeatTransaction = ( writeReturn ) => {\n\t\t\t\t\t\tif ( writeReturn === undefined ) return;\n\t\t\t\t\t\tthis.cycle( onread, onwrite, writeReturn );\n\t\t\t\t\t};\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\n\t\t\t\t\t// ---------------------------------------\n\t\t\t\t\tif ( writeReturn instanceof Promise ) {\n\t\t\t\t\t\twriteReturn.then( repeatTransaction );\n\t\t\t\t\t} else {\n\t\t\t\t\t\trepeatTransaction( writeReturn );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t\t// ---------------------------------------\n\t\t\t// If \"read\" returns a promise, we wait until it is resolved\n\t\t\t// ---------------------------------------\n\t\t\tif ( readReturn instanceof Promise ) {\n\t\t\t\treadReturn.then( callWrite );\n\t\t\t} else {\n\t\t\t\tcallWrite( readReturn );\n\t\t\t}\n\t\t} );\n\t}\n\n}", "\n\nexport function isXpath( expr ) { return ( expr = expr.trim() ) && expr.startsWith( '(' ) && expr.endsWith( ')' ) }\n\nexport function xpathQuery( window, context, expr, subtree = true ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', subtree ? '(.//' : '(./' ) ).join( '|' );\n    let nodes = [], node;\n    try {\n        // Throws in firefox and safari where context is a text node\n        const result = window.document.evaluate( expr, context, null, window.XPathResult.ANY_TYPE );\n        while ( node = result.iterateNext() ) nodes.push( node );\n    } catch( e ) {}\n    return nodes;\n}\n\nexport function xpathMatch( window, node, expr ) {\n    expr = ( Array.isArray( expr ) ? expr : [ expr ] ).map( x => ( x + '' ).replace( '(', '(self::' ) ).join( '|' );\n    try {\n        // Throws in firefox and safari where context is a text node and query isn't\n        return window.document.evaluate( `${ expr }`, node, null, window.XPathResult.BOOLEAN_TYPE ).booleanValue;\n    } catch( e ) {}\n}\n\nexport function containsNode( window, a, b, crossRoots = false, testCache = null ) {\n    const prevTest = testCache?.get( a )?.get( b );\n    if ( typeof prevTest !== 'undefined' ) return prevTest;\n    const response = val => {\n        if ( !testCache?.has( a ) ) testCache?.set( a, new WeakMap );\n        testCache?.get( a )?.set( b, val );\n        return val;\n    };\n    const rootNodeA = a.getRootNode();\n    const rootNodeB = b.getRootNode();\n    if ( rootNodeA === rootNodeB ) return response( a.contains( b ) );\n    if ( crossRoots && rootNodeB instanceof window.ShadowRoot ) return response( containsNode( window, a, rootNodeB.host, crossRoots, testCache ) );\n    return response( false );\n}\n\nexport function splitOuter( str, delim = '|' ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits, skip ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}", "\n/**\n * @imports\n */\nimport * as Util from './Util.js';\n\nexport default class DOMSpec {\n    constructor( content ) {\n        this.content = content;\n        this.type = typeof content === 'string' ? 'selector' : 'instance';\n        this.kind = this.type === 'instance' ? null : Util.isXpath( content ) ? 'xpath' : 'css';\n        if ( this.kind === 'xpath' ) {\n            this.isXpathAttr = Util.splitOuter( content.trim().slice( 1, -1 ), '@' ).length > 1;\n        }\n    }\n    toString() { return this.content; }\n}", "\n/**\n * @imports\n */\nimport { _isFunction, _isObject, _internals } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport DOMSpec from './DOMSpec.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class Realtime\n */\nexport default class Realtime {\n\n\t/**\n\t * @constructor\n\t *\n\t * @param document|Element\tcontext\n\t */\n\tconstructor( context, namespace, window ) {\n\t\tthis.context = context;\n\t\tthis.namespace = namespace;\n\t\tthis.window = context.defaultView || context.ownerDocument?.defaultView || window;\n\t\tthis.document = this.window.document;\n\t\tthis.webqit = this.window.webqit;\n\t\tObject.defineProperty( this, '#', { value: {} } );\n\t}\n\t\n\t/**\n\t * Resolves arguments\n\t * \n\t * @param Array \t\t\targs \n\t * \n\t * @returns Array\n\t */\n\tresolveArgs( args ) {\n\t\tif ( _isFunction( args[ 0 ] ) ) { args = [ [], ...args ]; }\n\t\telse if ( _isObject( args[ 0 ] ) && !( args[ 0 ] instanceof DOMSpec ) && args.length === 1 ) {\n\t\t\targs = [ [], undefined, args[ 0 ] ];\n\t\t} else if ( _isObject( args[ 1 ] ) && args.length === 2 ) {\n\t\t\targs = [ _arrFrom( args[ 0 ], false/*castObject*/ ), undefined, args[ 1 ] ];\n\t\t} else { args[ 0 ] = _arrFrom( args[ 0 ], false/*castObject*/ ); }\n\t\tif ( args[ 0 ].filter( x => typeof x !== 'string' && !( x instanceof DOMSpec ) && !( x instanceof this.window.Node ) ).length ) {\n\t\t\tthrow new Error( `Argument #2 must be either a string or a Node object, or a list of those.` );\n\t\t}\n\t\targs[ 0 ] = args[ 0 ].map( s => s instanceof DOMSpec ? s : new DOMSpec( s ) );\n\t\treturn args;\n\t}\n\n\t/**\n\t * @registry\n\t *\n\t * @param Array\t\t\t\t...args\n\t * \n\t * @returns Map\n\t */\n\tregistry( ...args ) {\n\t\treturn _internals( 'realdom.realtime', this.window, this.namespace, ...args );\n\t}\n\t\t\n\t/**\n\t * @createSignalGenerator\n\t * \n\t * @param Object \t\t\tmo \n\t * \n\t * @returns Object\n\t */\n\tcreateSignalGenerator() {\n\t\treturn {\n\t\t\tgenerate() {\n\t\t\t\t// Abort previous\n\t\t\t\tthis.lastController?.abort();\n\t\t\t\tthis.lastController = new AbortController;\n\t\t\t\tconst flags = { signal: this.lastController.signal };\n\t\t\t\treturn flags;\n\t\t\t},\n\t\t\tdisconnect() { this.lastController?.abort(); }\n\t\t}\n\t}\n\t\t\n\t/**\n\t * Loops through registration objects whose contexts match the event context.\n\t * \n\t * @param String \t\tinterceptionTiming\n\t * @param Object|Array \trecord_s\n\t * @param Function \t\tcallback \n\t * \n\t * @returns void\n\t */\n\tforEachMatchingContext( interceptionTiming, record_s, callback ) {\n\t\tconst { window } = this, deferreds = new Set, testCache = new WeakMap;\n\t\tfor ( const [ registration, deferred ] of this.registry( interceptionTiming ) ) {\n\t\t\tlet $records = [].concat( record_s ).filter( record => Util.containsNode( window, registration.context, record.target, registration.params.subtree === 'cross-roots', testCache ) );\n\t\t\tif ( !$records.length ) continue;\n\t\t\tconst args = [ registration, Array.isArray( record_s ) ? $records : $records[ 0 ] ];\n\t\t\tif ( deferred ) deferreds.add( args ); else callback.call( window, ...args );\n\t\t}\n\t\tfor ( const args of deferreds ) callback.call( window, ...args );\n\t\tdeferreds.clear();\n\t}\n\n\t/**\n\t * @disconnectables\n\t * \n\t * @param AbortSignal \t\tsignal\n\t * @param Array \t\t\t...objects \n\t * \n\t * @returns Object\n\t */\n\tdisconnectables( signal, ...objects ) {\n\t\tconst disconnectable = { disconnect() {\n\t\t\tobjects.forEach( d => (\n\t\t\t\td && _isFunction( d.disconnect ) && d.disconnect() \n\t\t\t\t|| _isFunction( d ) && d() \n\t\t\t\t|| _isObject( d ) && ( d.disconnected = true )\n\t\t\t) );\n\t\t} };\n\t\tif ( signal ) signal.addEventListener( 'abort', () => disconnectable.disconnect() );\n\t\treturn disconnectable;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _internals } from '@webqit/util/js/index.js';\nimport Realtime from './Realtime.js';\nimport DOMSpec from './DOMSpec.js';\n\n/**\n *\n * @class AttrRealtime\n */\nexport default class AttrRealtime extends Realtime {\n\n\ttype = 'attr';\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'attr', ...args );\n\t}\n\t\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tget( spec, callback = undefined, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// -------------\n\t\tconst records = attrIntersection( context, spec );\n\t\tif ( !callback ) return records;\n\t\tconst signalGenerator = params.lifecycleSignals && this.createSignalGenerator();\n\t\tif ( !originalFilterIsString ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( records, flags, context );\n\t\t} else {\n\t\t\tfor ( const record of records ) {\n\t\t\t\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\t\t\t\tcallback( record, flags, context );\n\t\t\t}\n\t\t}\n\t\t// -------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( originalFilterIsString ? spec[ 0 ] : spec, callback, { newValue: true, ...params } );\n\t\t\treturn this.disconnectables( params.signal, disconnectable_live );\n\t\t}\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec = [], callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( originalFilterIsString ? spec[ 0 ] : spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails && !webqit.realdom.attrInterceptionHooks?.intercepting ) {\n\t\t\tattrInterception.call( window, 'intercept', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => {\n\t\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\t\tdispatch.call( window, registration, records, context );\n\t\t} );\n\t\t// ------------------\n\t\tconst $params = { attributes: true, attributeOldValue: params.oldValue, subtree: params.subtree && true };\n\t\tif ( spec.length ) { $params.attributeFilter = spec.map( a => a + '' ); }\n\t\tdisconnectable.observe( context, $params );\n\t\t// -------------\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|string\t\t\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\tconst originalFilterIsString = typeof spec === 'string' || spec instanceof DOMSpec;\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tattrInterception.call( window, interceptionTiming, records => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, records, dispatch );\n\t\t\t} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() { registry.delete( registration ); } };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, atomics: new Map, originalFilterIsString, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n}\n\n/**\n * Deduplicates records.\n * \n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction dedupAndIgnoreInternals( records ) {\n\treturn records.reduce( ( rcds, rcd, i ) => {\n\t\tif ( rcds[ i - 1 ]?.attributeName === rcd.attributeName ) return rcds;\n\t\tif ( _internals( rcd.target, 'internalAttrInteractions' ).get( rcd.attributeName ) ) return rcds;\n\t\treturn rcds.concat( rcd );\n\t}, [] );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration\n * @param Array \t\t\trecords\n * \n * @returns Void\n */\nfunction dispatch( registration, records ) {\n\tconst { context, spec, callback, params, atomics, originalFilterIsString, signalGenerator } = registration;\n\tif (!params.subtree) {\n\t\trecords = records.filter((r) => {\n\t\t\treturn r.target === context;\n\t\t}); \n\t}\n\tif ( !records.length ) return;\n\tconst $spec = spec.map( a => a + '' );\n\tif ( params.atomic && !atomics.size ) {\n\t\trecords = attrIntersection( context, spec, records );\n\t} else if ( params.timing !== 'async' && spec.length ) {\n\t\trecords = records.filter( r => $spec.includes( r.name ) );\n\t}\n\tif ( !records.length ) return;\n\t// Should we care about old / new values being present?\n\tif ( !( params.newValue === null && params.oldValue === null && params.eventDetails ) ) {\n\t\trecords = records.map( rcd => {\n\t\t\tlet exclusion;\n\t\t\tif ( !params.eventDetails ) {\n\t\t\t\t( { event: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.oldValue && ( 'oldValue' in rcd ) ) {\n\t\t\t\t( { oldValue: exclusion, ...rcd } = rcd );\n\t\t\t}\n\t\t\tif ( !params.newValue && ( 'value' in rcd ) ) {\n\t\t\t\t( { value: exclusion, ...rcd } = rcd );\n\t\t\t} else if ( params.newValue && typeof rcd.value === 'undefined' ) {\n\t\t\t\trcd = {  ...rcd, value: internalAttrInteraction( rcd.target, rcd.name, () => rcd.target.getAttribute( rcd.name ) ) };\n\t\t\t}\n\t\t\treturn rcd;\n\t\t} );\n\t}\n\tif ( params.atomic ) {\n\t\trecords.forEach( record => atomics.set( record.name, record ) );\n\t\trecords = Array.from( atomics.entries() ).map( ( [ , value ] ) => value );\n\t}\n\tconst record_s = originalFilterIsString ? records[ 0 ] : records;\n\tconst flags = signalGenerator ? signalGenerator.generate() : {};\n\tcallback( record_s, flags, context );\n}\n\n/**\n */\nfunction internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = _internals( node, 'internalAttrInteractions' ).get( attrName );\n\t_internals( node, 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t_internals( node, 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\n/**\n * Helper to determining which records to deliver.\n * \n * @param Object \t\t\tcontext\n * @param Array \t\t\tspec\n * @param Array \t\t\trecords\n * \n * @returns Array\n */\nfunction attrIntersection( context, spec, records = [] ) {\n\tconst _type = { event: null, type: 'attribute' };\n\tif ( spec.length ) {\n\t\treturn spec.map( attrName => {\n\t\t\tattrName = attrName + '';\n\t\t\treturn records.find( r => r.name === attrName ) || { target: context, name: attrName, value: internalAttrInteraction( context, attrName, () => context.getAttribute( attrName ) ), ..._type };\n\t\t} );\n\t}\n\tconst attrs = Array.from( context.attributes );\n\treturn attrs.map( attr => {\n\t\treturn records.find( r => r.name === attr.nodeName ) || { target: context, name: attr.nodeName, value: internalAttrInteraction( context, attr.nodeName, () => attr.nodeValue ), ..._type };\n\t} );\n}\n\n/**\n * Determines the event for an attr mutation record.\n * \n * @param MutationRecord \t{ target, attributeName }\n * \n * @returns Object\n */\nfunction withAttrEventDetails( { target, attributeName, value, oldValue } ) {\n\tconst window = this, registry = window.webqit.realdom.attrInterceptionRecords?.get( target ) || {};\n\tconst event = registry[ attributeName ]?.[ 0 ] || 'mutation';\n\tconst record = { target, name: attributeName, value, oldValue, type: 'observation', event };\n\treturn record;\n}\n\n/**\n * Attributes intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction attrInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Element } = window;\n\tif ( !webqit.realdom.attrInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'attrInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.attrInterceptionHooks.has( timing ) ) { webqit.realdom.attrInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.attrInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.attrInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.attrInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `Attr mutation APIs are now being intercepted.` );\n\twebqit.realdom.attrInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'attrInterceptionRecords', { value: new Map } );\n\n\t// Interception hooks\n\tconst attrIntercept = ( record, defaultAction ) => {\n\t\tif ( !webqit.realdom.attrInterceptionRecords.has( record.target ) ) { webqit.realdom.attrInterceptionRecords.set( record.target, {} ); }\n\t\tconst registry = webqit.realdom.attrInterceptionRecords.get( record.target );\n\t\t// ------------------\n\t\tregistry[ record.name ] = registry[ record.name ] || [];\n\t\tregistry[ record.name ].unshift( record.event );\n\t\tif ( _internals( record.target, 'internalAttrInteractions' ).get( record.name ) ) return defaultAction();\n\t\t// ------------------\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( [ record ] ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( [ record ] ) );\n\t\treturn returnValue;\n\t};\n\n\t// Interception observer WILL need to know non-API-based mutations\n\tconst mo = new window.MutationObserver( records => {\n\t\trecords = records.filter( rcd => {\n\t\t\tconst registry = window.webqit.realdom.attrInterceptionRecords?.get( rcd.target ) || {};\n\t\t\treturn !registry[ rcd.attributeName ]?.shift();\n\t\t} );\n\t\trecords = dedupAndIgnoreInternals( records ).map( rcd => withAttrEventDetails.call( window, rcd ) );\n\t\tif ( !records.length ) return;\n\t\twebqit.realdom.attrInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( records ) );\n\t\twebqit.realdom.attrInterceptionHooks.get( 'sync' )?.forEach( callback => callback( records ) );\n\t} );\n\tmo.observe( document, { attributes: true, subtree: true, attributeOldValue: true } );\n\n\t// Intercept DOM attr mutation methods\n\tconst originalApis = Object.create( null );\n\t[ 'setAttribute', 'removeAttribute', 'toggleAttribute', ].forEach( apiName => {\n\t\toriginalApis[ apiName ] = Element.prototype[ apiName ];\n\t\tElement.prototype[ apiName ] = function( ...args ) {\n\t\t\tlet value, oldValue = internalAttrInteraction( this, args[ 0 ], () => this.getAttribute( args[ 0 ] ) );\n\t\t\tif ( [ 'setAttribute', 'toggleAttribute' ].includes( apiName ) ) { value = args[ 1 ]; }\n\t\t\tif ( apiName === 'toggleAttribute' && value === undefined ) {\n\t\t\t\tvalue = oldValue === null ? true : false;\n\t\t\t}\n\t\t\tconst record = { target: this, name: args[ 0 ], value, oldValue, type: 'interception', event: [ this, apiName ] };\n\t\t\tconst exec = () => originalApis[ apiName ].call( this, ...args );\n\t\t\treturn attrIntercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\n/**\n * @imports\n */\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport AttrRealtime from './AttrRealtime.js';\nimport Realtime from './Realtime.js';\nimport * as Util from './Util.js';\n\n/**\n *\n * @class DOMRealtime\n */\nexport default class DOMRealtime extends Realtime {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor( context, ...args ) {\n\t\tsuper( context, 'tree', ...args );\n\t}\n\n\t/**\n\t * Alias for ( new AttrRealtime() ).all( ... )\n\t */\n\tattr( filter, callback = undefined, params = {} ) {\n\t\tconst { context, window } = this;\n\t\treturn ( new AttrRealtime( context, window ) ).get( ...arguments );\n\t}\n\n\t/**\n\t * Runs a query.\n\t *\n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable|Void\n\t */\n\tquery( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context } = this;\n\t\t// ------------------\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'query', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ------------------\n\t\tif ( !params.generation || params.generation === 'entrants' ) {\n\t\t\tif ( !spec.length ) {\n\t\t\t\t//if ( params.subtree ) throw new Error( `The subtree option requires a selector to work.` );\n\t\t\t\t[ ...context.children ].forEach( node => getRecord( context ).entrants.push( node ) );\n\t\t\t} else if ( spec.every( s => s.type === 'selector' ) ) {\n\t\t\t\tconst [ cssSelectors, xpathQueries ] = spec.reduce( ( [ css, xpath ], s ) => {\n\t\t\t\t\treturn s.kind === 'xpath' ? [ css, xpath.concat( s ) ] : [ css.concat( s ), xpath ];\n\t\t\t\t}, [ [], [] ] );\n\t\t\t\tconst matches = [];\n\t\t\t\tif ( params.subtree ) {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...context.querySelectorAll( cssSelectors.join( ',' ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries ) ); }\n\t\t\t\t} else {\n\t\t\t\t\tif ( cssSelectors.length ) { matches.push( ...[ ...context.children ].filter( node => node.matches( cssSelectors ) ) ); }\n\t\t\t\t\tif ( xpathQueries.length ) { matches.push( ...Util.xpathQuery( this.window, context, xpathQueries, false ) ); }\n\t\t\t\t}\n\t\t\t\tmatches.forEach( node => getRecord( node.parentNode || context ).entrants.push( node ) );\n\t\t\t}\n\t\t}\n\t\t// ------------------\n\t\tif ( !callback ) return records;\n\t\tconst disconnectable = { disconnected: false };\n\t\tconst signalGenerator = callback && params.lifecycleSignals && this.createSignalGenerator();\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tif ( disconnectable.disconnected ) break;\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t\t// ------------------\n\t\tif ( params.live ) {\n\t\t\tif ( signalGenerator ) { params = { ...params, signalGenerator }; }\n\t\t\tconst disconnectable_live = this.observe( spec, callback, params );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, disconnectable_live );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: false } )\n\t */\n\tchildren( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: false } );\n\t}\n\n\t/**\n\t * Alias for query( ..., { subtree: true } )\n\t */\n\tsubtree( spec, callback = undefined, params = {} ) {\n\t\t[ spec, callback = undefined, params = {} ] = this.resolveArgs( arguments );\n\t\treturn this.query( spec, callback, { ...params, subtree: true } );\n\t}\n\n\t/**\n\t * Mutation Observer\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserve( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\t// ------------------------\n\t\tif ( [ 'sync', 'intercept' ].includes( params.timing ) ) return this.observeSync( spec, callback, params );\n\t\tif ( params.timing && params.timing !== 'async' ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\t// ------------------------\n\t\tconst { context, window, webqit, document } = this;\n\t\t// ------------------\n\t\tif ( params.eventDetails ) { webqit.realdom.domInterceptionRecordsAlwaysOn = true; }\n\t\tif ( ( document.readyState === 'loading' || webqit.realdom.domInterceptionRecordsAlwaysOn ) && !webqit.realdom.domInterceptionHooks?.intercepting ) {\n\t\t\tdomInterception.call( window, 'sync', () => {} );\n\t\t}\n\t\t// -------------\n\t\tconst disconnectable = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tdispatch.call( window, registration, withEventDetails.call( window, record ), context );\n\t\t} ) );\n\t\tdisconnectable.observe( context, { childList: true, subtree: params.subtree && true, } );\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\t\n\t/**\n\t * Mutation Interceptor\n\t * \n\t * @param array|Element|string\t\tspec\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t * \n\t * @returns Disconnectable\n\t */\n\tobserveSync( spec, callback, params = {} ) {\n\t\t[ spec, callback, params = {} ] = this.resolveArgs( arguments );\n\t\tconst { context, window } = this;\t\t\n\t\t// -------------\n\t\tif ( params.timing && ![ 'sync', 'intercept' ].includes( params.timing ) ) throw new Error( `Timing option \"${ params.timing }\" invalid.` );\n\t\tconst interceptionTiming = params.timing === 'intercept' ? 'intercept' : 'sync';\n\t\tif ( !this.registry( interceptionTiming ).size ) {\n\t\t\t// One handler per intercept/sync registry\n\t\t\tdomInterception.call( window, interceptionTiming, record => {\n\t\t\t\tthis.forEachMatchingContext( interceptionTiming, record, dispatch );\n\t\t\t} );\n\t\t}\n\t\tconst mo = new window.MutationObserver( records => records.forEach( record => {\n\t\t\tif ( Array.isArray( ( record = withEventDetails.call( window, record ) ).event ) ) return;\n\t\t\tdispatch.call( window, registration, record, context );\n\t\t} ) );\n\t\tmo.observe( context, { childList: true, subtree: params.subtree && true } );\n\t\t// -------------\n\t\tconst disconnectable = { disconnect() {\n\t\t\tregistry.delete( registration );\n\t\t\tmo.disconnect();\n\t\t} };\n\t\tconst signalGenerator = params.signalGenerator || params.lifecycleSignals && this.createSignalGenerator();\n\t\tconst registration = { context, spec, callback, params, signalGenerator, disconnectable };\n\t\tconst registry = this.registry( interceptionTiming );\n\t\tregistry.set( registration, !!registration.params.deferred );\n\t\t// -------------\n\t\tif ( params.staticSensitivity ) {\n\t\t\tconst disconnectable_attr = staticSensitivity.call( window, registration );\n\t\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator, disconnectable_attr );\n\t\t}\n\t\treturn this.disconnectables( params.signal, disconnectable, signalGenerator );\n\t}\n\n\t/**\n\t * Tracks the connectedness of element references.\n\t *\n\t * @param array|Element\t\t\t\telements\n\t * @param function\t\t\t\t\tcallback\n\t * @param object\t\t\t\t\tparams\n\t *\n\t * @return Disconnectable\n\t */\n\ttrack( elements, callback, params = {} ) {\n\t\tparams = { subtree: true, ...params };\n\t\treturn this.observe( elements, record => {\n\t\t\tif ( record.entrants.length ) callback( true, Array.isArray( elements ) ? record.entrants : record.entrants[ 0 ] );\n\t\t\tif ( record.exits.length ) callback( false, Array.isArray( elements ) ? record.exits : record.exits[ 0 ] );\n\t\t}, params );\n\t}\n}\n\n/**\n * Sensitivty for attribute changes for attribute spec.\n * \n * @param object registration\n * \n * @returns Disconnectable\n */\nfunction staticSensitivity( registration ) {\n\tconst window = this;\n\tconst { context, spec, callback, params, signalGenerator } = registration;\n\tconst cssSelectors = spec.filter( s => s.kind === 'css' );\n\tconst parseDot = selector => selector.match( /\\.([\\w-]+)/g )?.length ? [ 'class' ] : [];\n\tconst parseHash = selector => selector.match( /#([\\w-]+)/g )?.length ? [ 'id' ] : [];\n\tconst parse = selector => [ ...selector.matchAll( /\\[([^\\=\\]]+)(\\=[^\\]]+)?\\]/g ) ].map( x => x[ 1 ] ).concat( parseDot( selector ) ).concat( parseHash( selector ) );\n\tif ( !( registration.$attrs = Array.from( new Set( cssSelectors.filter( s => ( s + '' ).includes( '[' ) ).reduce( ( attrs, selector ) => attrs.concat( parse( selector + '' ) ), [] ) ) ) ).length ) return;\n\t// ---------\n\tconst entrants = new Set, exits = new Set;\n\tentrants.push = val => ( exits.delete( val ), entrants.add( val ) );\n\texits.push = val => ( entrants.delete( val ), exits.add( val ) );\n\tregistration.$deliveryCache = { entrants, exits };\n\t// ---------\n\treturn ( new AttrRealtime( context, window ) ).observe( registration.$attrs, _records => {\n\t\tconst records = new Map, getRecord = target => {\n\t\t\tif ( !records.has( target ) ) { records.set( target, { target, entrants: [], exits: [], type: 'static', event: null } ); }\n\t\t\treturn records.get( target );\n\t\t};\n\t\t// ---------\n\t\tconst matchesCache = new WeakMap;\n\t\tconst matches = node => {\n\t\t\tif ( !matchesCache.has( node ) ) { matchesCache.set( node, cssSelectors.some( s => node.matches( s + '' ) ) ); }\n\t\t\treturn matchesCache.get( node );\n\t\t};\n\t\t// ---------\n\t\tfor ( const _record of _records ) {\n\t\t\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\t\t\tif ( params.generation && generation !== params.generation ) return;\n\t\t\t\tif ( registration.$deliveryCache[ generation ].has( _record.target ) || ( generation === 'entrants' ? !matches( _record.target ) : matches( _record.target ) ) ) return;\n\t\t\t\tregistration.$deliveryCache[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target )[ generation ].push( _record.target );\n\t\t\t\tgetRecord( _record.target ).event = _record.event;\n\t\t\t} );\n\t\t}\n\t\t// ---------\n\t\tfor ( const [ , record ] of records ) {\n\t\t\tconst flags = signalGenerator?.generate() || {};\n\t\t\tcallback( record, flags, context );\n\t\t}\n\t}, { subtree: params.subtree, timing: params.timing, eventDetails: params.eventDetails } );\n}\n\n/**\n * Dispatches a mutation record if it matches the observed.\n * \n * @param Object \t\t\tregistration \n * @param Object \t\t\trecord \n * \n * @returns Void\n */\nfunction dispatch( registration, _record ) {\n\tconst { context, spec, callback, params, signalGenerator, $deliveryCache } = registration;\n\t// ---------\n\tconst record = { ..._record, entrants: [], exits: [] };\n\tif ( !params.eventDetails ) { delete record.event; }\n\t[ 'entrants', 'exits' ].forEach( generation => {\n\t\tif ( params.generation && generation !== params.generation ) return;\n\t\tif ( spec.length ) {\n\t\t\trecord[ generation ] = nodesIntersection.call( this, spec, params.subtree === 'cross-roots', _record[ generation ], _record.event !== 'parse' );\n\t\t} else {\n\t\t\trecord[ generation ] = [ ..._record[ generation ] ];\n\t\t}\n\t\tif ( !$deliveryCache ) return;\n\t\tfor ( const node of record[ generation ] ) {\n\t\t\t$deliveryCache[ generation ].push( node );\n\t\t}\n\t} );\n\t// ---------\n\tif ( !record.entrants.length && !record.exits.length ) return;\n\tconst flags = signalGenerator?.generate() || {};\n\tcallback( record, flags, context );\n}\n\n/**\n * Aggregates instances of els in sources\n * \n * @param Array \t\t\tspec \n * @param Bool \t\t\t\tcrossRoots \n * @param Array \t\t\tsources \n * @param Bool \t\t\t\tdeepIntersect \n * \n * @returns \n */\nfunction nodesIntersection( spec, crossRoots, sources, deepIntersect ) {\n\tsources = Array.isArray( sources ) ? sources : [ ...sources ];\n\tconst match = ( sources, s ) => {\n\t\t// Filter out text nodes\n\t\tif ( s.type === 'selector' ) {\n\t\t\t// Is directly mutated...\n\t\t\tlet matches = s.isXpathAttr ? [] : sources.filter( source => s.kind === 'xpath' ? Util.xpathMatch( this, source, s + '' ) : source.matches && source.matches( s + '' ) );\n\t\t\t// Is contextly mutated...\n\t\t\tif ( deepIntersect || s.isXpathAttr ) {\n\t\t\t\tmatches = sources.reduce( ( collection, source ) => {\n\t\t\t\t\tif ( s.kind === 'xpath' ) { return [ ...collection, ...Util.xpathQuery( this, source, s, deepIntersect ) ]; }\n\t\t\t\t\treturn source.querySelectorAll ? [ ...collection, ...source.querySelectorAll( s + '' ) ] : collection;\n\t\t\t\t}, matches );\n\t\t\t}\n\t\t\tif ( matches.length ) return matches;\n\t\t} else {\n\t\t\t// Is directly mutated...\n\t\t\tif ( sources.includes( s.content ) || (\n\t\t\t\tdeepIntersect && sources.some( source => Util.containsNode( this/* window */, source, s.content, crossRoots ) )\n\t\t\t) ) { return [ s.content ]; }\n\t\t}\n\t};\n\t// Search can be expensive...\n\t// Multiple listeners searching the same thing in the same list?\n\tif ( !sources.$$searchCache ) { sources.$$searchCache = new Map; }\n\treturn spec.reduce( ( matches, s ) => {\n\t\tlet _matches;\n\t\tif ( sources.$$searchCache.has( s.content ) ) {\n\t\t\t_matches = sources.$$searchCache.get( s.content );\n\t\t} else {\n\t\t\t_matches = match( sources, s ) || [];\n\t\t\tif ( s.type === 'instance' ) {\n\t\t\t\tsources.$$searchCache.set( s.content, _matches );\n\t\t\t}\n\t\t}\n\t\treturn matches.concat( _matches );\n\t}, [] );\n}\n\n/**\n * Determines the event for a mutation record\n * \n * @param MutationRecord \t{ target, entrants, exits }\n * \n * @returns Object\n */\nfunction withEventDetails( { target, addedNodes, removedNodes } ) {\n\tlet window = this, event;\n\tevent = _arrFrom( addedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), null );\n\tevent = _arrFrom( removedNodes ).reduce( ( prev, node ) => prev || window.webqit.realdom.domInterceptionRecords?.get( node ), event );\n\tevent = event || window.document.readyState === 'loading' && 'parse' || 'mutation';\n\treturn { target, entrants: addedNodes, exits: removedNodes, type: 'observation', event };\n}\n\n/**\n * DOM intersection engine.\n * \n * @param String \t\t\ttiming \n * @param Function \t\t\tcallback \n * \n * @returns \n */\nfunction domInterception( timing, callback ) {\n\tconst window = this;\n\tconst { webqit, document, Node, CharacterData, Element, HTMLElement, HTMLTemplateElement, DocumentFragment } = window;\n\tif ( !webqit.realdom.domInterceptionHooks ) { Object.defineProperty( webqit.realdom, 'domInterceptionHooks', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionNoRecurse ) { Object.defineProperty( webqit.realdom, 'domInterceptionNoRecurse', { value: new Map } ); }\n\tif ( !webqit.realdom.domInterceptionHooks.has( timing ) ) { webqit.realdom.domInterceptionHooks.set( timing, new Set ); }\n\twebqit.realdom.domInterceptionHooks.get( timing ).add( callback );\n\tconst rm = () => webqit.realdom.domInterceptionHooks.get( timing ).delete( callback );\n\tif ( webqit.realdom.domInterceptionHooks?.intercepting ) return rm;\n\tconsole.warn( `DOM mutation APIs are now being intercepted.` );\n\twebqit.realdom.domInterceptionHooks.intercepting = true;\n\tObject.defineProperty( webqit.realdom, 'domInterceptionRecords', { value: new Map } );\n\n\t// No recursion helper\n\tconst noRecurse = ( node, method, callback ) => {\n\t\twebqit.realdom.domInterceptionNoRecurse.set( node, method );\n\t\tconst returnValue = callback();\n\t\twebqit.realdom.domInterceptionNoRecurse.delete( node );\n\t\treturn returnValue;\n\t};\n\n\t// Interception hooks\n\tconst intercept = ( record, defaultAction ) => {\n\t\trecord.entrants.concat( record.exits ).forEach( node => {\n\t\t\tclearTimeout( webqit.realdom.domInterceptionRecords.get( node )?.timeout ); // Clear any previous that's still active\n\t\t\twebqit.realdom.domInterceptionRecords.set( node, record.event ); // Main: set event details... and next to timeout details\n\t\t\tconst timeout = setTimeout( () => { webqit.realdom.domInterceptionRecords.delete( node ); }, 0 );\n\t\t\tObject.defineProperty( record.event, 'timeout', { value: timeout, configurable: true } );\n\t\t} );\n\t\twebqit.realdom.domInterceptionHooks.get( 'intercept' )?.forEach( callback => callback( record ) );\n\t\tconst returnValue = defaultAction();\n\t\twebqit.realdom.domInterceptionHooks.get( 'sync' )?.forEach( callback => callback( record ) );\n\t\treturn returnValue;\n\t};\n\n\t// Intercept DOM mutation methods\n\tconst _apiNames = {\n\t\t// Note the order\n\t\tShadowRoot: [ 'innerHTML', 'setHTMLUnsafe' ],\n\t\tDocumentFragment: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tDocument: [ 'replaceChildren', 'append', 'prepend' ],\n\t\tHTMLElement: [ 'outerText', 'innerText' ],\n\t\tElement: [ 'append', 'prepend', 'before', 'after', 'insertAdjacentElement', 'insertAdjacentHTML', 'remove', 'replaceChildren', 'replaceWith', 'setHTMLUnsafe', 'innerHTML', 'outerHTML' ],\n\t\tCharacterData: [ 'before', 'after', 'remove', 'replaceWith' ],\n\t\tNode: [ 'insertBefore', 'replaceChild', 'removeChild', 'appendChild', 'textContent', 'nodeValue' ],\n\t};\n\tconst _apiOriginals = {\n\t\t// Note the order\n\t\tShadowRoot: Object.create( null ), // extends DocumentFragment\n\t\tDocumentFragment: Object.create( null ), // extends Node\n\t\tDocument: Object.create( null ), // extends Node\n\t\tHTMLElement: Object.create( null ), // extends Element,\n\t\tElement: Object.create( null ), // extends Node\n\t\tCharacterData: Object.create( null ), // extends Node\n\t\tNode: Object.create( null ),\n\t};\n\n\tconst _apiNamesUnique = new Set( Object.values( _apiNames ).reduce( ( all, apis ) => all.concat( apis ), [] ) );\n\t_apiNamesUnique.forEach( apiName => {\n\t\t\n\t\tObject.keys( _apiNames ).forEach( DOMClassName => {\n\t\t\tif ( !_apiNames[ DOMClassName ].includes( apiName ) ) return;\n\t\t\tconst _apiOriginal = Object.getOwnPropertyDescriptor( window[ DOMClassName ].prototype, apiName );\n\t\t\tif ( !_apiOriginal ) return; // Typically: Element:setHTMLUnsafe\n\t\t\tObject.defineProperty( window[ DOMClassName ].prototype, apiName, 'value' in _apiOriginal ? { ..._apiOriginal, value: method } : { ..._apiOriginal, set: setter } );\n\t\t\t_apiOriginals[ DOMClassName ][ apiName ] = _apiOriginal;\n\t\t} );\n\n\t\tfunction method( ...args ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\tif ( webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'insertBefore' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'insertAdjacentElement', 'insertAdjacentHTML' ].includes( apiName ) ) {\n\t\t\t\tentrants = [ args[ 1 ] ];\n\t\t\t\tif ( [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t} else if ( [ 'setHTMLUnsafe', 'replaceChildren' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\tentrants = apiName === 'replaceChildren' ? [ ...args ] : [ args[ 0 ] ];\n\t\t\t} else if ( [ 'replaceWith', 'remove' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\tentrants = apiName === 'replaceWith' ? [ ...args ] : [];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else if ( [ 'replaceChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ args[ 1 ] ];\n\t\t\t\tentrants = [ args[ 0 ] ];\n\t\t\t} else if ( [ 'removeChild' ].includes( apiName ) ) {\n\t\t\t\texits = [ ...args ];\n\t\t\t} else {\n\t\t\t\t// 'before', 'after', 'append', 'prepend', 'appendChild'\n\t\t\t\tentrants = [ ...args ];\n\t\t\t\tif ( [ 'before', 'after' ].includes( apiName ) ) {\n\t\t\t\t\ttarget = this.parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to entrants\n\t\t\tlet apiNameFinal = apiName;\n\t\t\tif ( [ 'insertAdjacentHTML', 'setHTMLUnsafe' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'insertAdjacentHTML' && [ 'beforebegin', 'afterend' ].includes( args[ 0 ] ) ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return $apiOriginals[ apiName ].value.call( this, ...args );\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\t$apiOriginals.setHTMLUnsafe.value.call( temp, entrants[ 0 ], apiName === 'setHTMLUnsafe' ? args[ 1 ] : {} );\n\t\t\t\tentrants = [ ...temp.childNodes ];\n\t\t\t\t// --------------  \n\t\t\t\tif ( apiName === 'insertAdjacentHTML' ) {\n\t\t\t\t\tapiNameFinal = 'insertAdjacentElement';\n\t\t\t\t\targs[ 1 ] = new DocumentFragment;\n\t\t\t\t\tnoRecurse( args[ 1 ], 'append', () => args[ 1 ].append( ...temp.childNodes ) );\n\t\t\t\t} else {\n\t\t\t\t\tapiNameFinal = 'replaceChildren';\n\t\t\t\t\targs = [ ...temp.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, () => {\n\t\t\t\treturn $apiOriginals[ apiNameFinal ].value.call( this, ...args );\n\t\t\t} );\n\t\t}\n\n\t\tfunction setter( value ) {\n\t\t\tconst DOMClassName = Object.keys( _apiOriginals ).find( name => this instanceof window[ name ] && ( apiName in _apiOriginals[ name ] ) );\n\t\t\tconst $apiOriginals = _apiOriginals[ DOMClassName ];\n\t\t\t// Instance of Node interface? Abort!\n\t\t\tlet exec = () => $apiOriginals[ apiName ].set.call( this, value );\n\t\t\tif ( this instanceof HTMLScriptElement || webqit.realdom.domInterceptionNoRecurse.get( this ) === apiName ) return exec();\n\t\t\t// --------------\n\t\t\t// Obtain exits and entrants\n\t\t\tlet exits = [], entrants = [], target = this;\n\t\t\tif ( [ 'outerHTML', 'outerText' ].includes( apiName ) ) {\n\t\t\t\texits = [ this ];\n\t\t\t\ttarget = this.parentNode;\n\t\t\t} else {\n\t\t\t\t// 'innerHTML', 'innerText', 'textContent', 'nodeValue'\n\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\ttarget = this.content;\n\t\t\t\t\texits = [ ...this.content.childNodes ];\n\t\t\t\t} else {\n\t\t\t\t\texits = [ ...this.childNodes ];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\t// Parse HTML to nodes\n\t\t\tif ( [ 'outerHTML', 'innerHTML' ].includes( apiName ) ) {\n\t\t\t\tlet tempNodeName = this.nodeName;\n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\t// We can't handle this... and this is going to throw afterall\n\t\t\t\t\tif ( !this.parentNode ) return exec();\n\t\t\t\t\ttempNodeName = this.parentNode.nodeName;\n\t\t\t\t}\n\t\t\t\tconst temp = document.createElement( tempNodeName.includes( '-' )/* custom-element | #document-fragment */ ? 'div' : tempNodeName );\n\t\t\t\tnoRecurse( temp, apiName, () => temp[ apiName ] = value );\n\t\t\t\tentrants = this instanceof HTMLTemplateElement ? [ ...temp.content.childNodes ] : [ ...temp.childNodes ];\n\t\t\t\tif ( ( this instanceof HTMLTemplateElement && this.hasAttribute( 'src' ) ) || this instanceof ShadowRoot ) {\n\t\t\t\t\tconst getScripts = nodes => nodes.reduce( ( scripts, el ) => {\n\t\t\t\t\t\tif ( el instanceof HTMLScriptElement ) return scripts.concat( el );\n\t\t\t\t\t\tif ( el instanceof HTMLTemplateElement ) return scripts.concat( getScripts( [ el.content ] ) );\n\t\t\t\t\t\tscripts = scripts.concat( getScripts( [ ...( el.querySelectorAll?.( 'template' ) || [] ) ].map( t => t.content ) ) );\n\t\t\t\t\t\treturn scripts.concat( ...( el.querySelectorAll?.( 'script' ) || [] ) );\n\t\t\t\t\t}, [] );\n\t\t\t\t\tfor ( const script of getScripts( entrants ) ) {\n\t\t\t\t\t\tif (this instanceof ShadowRoot) {\n\t\t\t\t\t\t\tscript.setAttribute('data-handling', 'manual');\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst $script = document.createElement( 'script' );\n\t\t\t\t\t\t[ ...script.attributes ].forEach( attr => $script.setAttribute( attr.name, attr.value ) );\n\t\t\t\t\t\t$script.textContent = script.textContent;\n\t\t\t\t\t\tnoRecurse( script, 'replaceWith', () => script.replaceWith( $script ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// -------------- \n\t\t\t\tif ( apiName === 'outerHTML' ) {\n\t\t\t\t\tvalue = new DocumentFragment;\n\t\t\t\t\tnoRecurse( value, 'append', () => value.append( ...entrants ) );\n\t\t\t\t\texec = () => noRecurse( this, 'replaceWith', () => Element.prototype.replaceWith.call( this, value ) );\n\t\t\t\t} else {\n\t\t\t\t\tif ( this instanceof HTMLTemplateElement ) {\n\t\t\t\t\t\texec = () => noRecurse( this.content, 'replaceChildren', () => this.content.replaceChildren( ...entrants ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\texec = () => noRecurse( this, 'replaceChildren', () => Element.prototype.replaceChildren.call( this, ...entrants ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// --------------\n\t\t\tconst record = { target, entrants, exits, type: 'interception', event: [ this, apiName ] };\n\t\t\treturn intercept( record, exec );\n\t\t}\n\t} );\n\n\treturn rm;\n}\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function() {\r\n    CSS_escape.call( this );\r\n    Node_isConnected.call( this );\r\n    Element_matches.call( this );\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape() {\r\n    const window = this;\r\n    if ( !window.CSS ) { window.CSS = {} }\r\n    if ( !window.CSS.escape ) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace( /([\\:@\\~\\$\\&])/g, '\\\\$1' );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected() {\r\n    const window = this;\r\n    if ( !( 'isConnected' in window.Node.prototype ) ) {\r\n        Object.defineProperty( window.Node.prototype, 'isConnected', { get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition( this )\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        } } );\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches() {\r\n    const window = this;\r\n    if ( !window.Element.prototype.matches ) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function( s ) {\r\n            var matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\r\n                i = matches.length;\r\n            while ( --i >= 0 && matches.item( i ) !== this ) {}\r\n            return i > -1;            \r\n        }\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString, _isFunction } from '@webqit/util/js/index.js';\r\nimport { _set } from '@webqit/util/obj/index.js';\r\nimport Scheduler from './Scheduler.js';\r\nimport DOMRealtime from './realtime/DOMRealtime.js';\r\nimport AttrRealtime from './realtime/AttrRealtime.js';\r\nimport polyfill from './polyfills.js';\r\n\r\nexport default function() {\r\n    const window = this;\r\n    if ( !window.webqit ) window.webqit = {};\r\n    if ( window.webqit.realdom ) return window.webqit.realdom;\r\n    window.webqit.realdom = {};\r\n    polyfill.call( window );\r\n    // ------\r\n    window.webqit.realdom.meta = ( ...args ) => meta.call( window, ...args );\r\n    window.webqit.realdom.ready = ( ...args ) => ready.call( window, ...args );\r\n    // ------\r\n    window.webqit.realdom.realtime = ( context, namespace = 'dom' ) => {\r\n        if ( namespace === 'dom' ) return new DOMRealtime( context, window );\r\n        if ( namespace === 'attr' ) return new AttrRealtime( context, window );\r\n    };\r\n    // ------\r\n    const scheduler = new Scheduler( window );\r\n    window.webqit.realdom.schedule = ( type, ...args ) => {\r\n        return scheduler[ `on${ type }` ]( ...args );\r\n    };\r\n    window.webqit.realdom.synthesizeWhile = ( ...args ) => {\r\n        return scheduler.synthesizeWhile( ...args );\r\n    };\r\n    // ------\r\n    return window.webqit.realdom;\r\n}\r\n\r\n\r\n/**\r\n * DOM-ready listeners.\r\n * \r\n * @param Function\t    \t\tcallback\r\n * \r\n * @return void\r\n */\r\nfunction ready( ...args ) {\r\n    let timing = 'interactive', callback;\r\n    if ( _isString( args[ 0 ] ) ) {\r\n        timing = args[ 0 ];\r\n        if ( _isFunction( args[ 1 ] ) ) { callback = args[ 1 ]; }\r\n    } else if ( _isFunction( args[ 0 ] ) ) { callback = args[ 0 ]; }\r\n    // --------------\r\n    const timings = { interactive: [ 'interactive', 'complete' ], complete: [ 'complete' ], };\r\n    if ( !timings[ timing ] ) throw new Error( `Invalid ready-state timing: ${ timing }.` );\r\n\tconst window = this;\r\n    // --------------\r\n    if ( !callback ) {\r\n        if ( !window.webqit.realdom.readyStatePromises ) {\r\n            window.webqit.realdom.readyStatePromises = {\r\n                interactive: new Promise( res => ready.call( this, 'interactive', res ) ),\r\n                complete: new Promise( res => ready.call( this, 'complete', res ) ),\r\n            };\r\n        }\r\n        return window.webqit.realdom.readyStatePromises[ timing ];\r\n    }\r\n    // --------------\r\n\tif ( timings[ timing ].includes( window.document.readyState ) ) return callback( window );\r\n    if ( !window.webqit.realdom.readyStateCallbacks ) {\r\n        window.webqit.realdom.readyStateCallbacks = { interactive: [], complete: [] };\r\n        window.document.addEventListener( 'readystatechange', () => {\r\n            const state = window.document.readyState;\r\n            for ( const callback of window.webqit.realdom.readyStateCallbacks[ state ].splice( 0 ) ) {\r\n                callback( window );\r\n            }\r\n        }, false );\r\n    }\r\n    window.webqit.realdom.readyStateCallbacks[ timing ].push( callback );\r\n}\r\n\r\n/**\r\n * A webqit's meta tag props reader.\r\n *  \r\n * @param String name\r\n * \r\n * @return Object\r\n */\r\nfunction meta( name ) {\r\n    const window = this;\r\n    let _content = {}, _el;\r\n    if ( _el = window.document.querySelector( `meta[name=\"${ name }\"]` ) ) {\r\n        _content = ( _el.content || '' ).split( ';' ).filter( v => v ).reduce( ( _metaVars, directive ) => {\r\n            const directiveSplit = directive.split( '=' ).map( d => d.trim() );\r\n            _set( _metaVars, directiveSplit[ 0 ].split( '.' ), directiveSplit[ 1 ] === 'true' ? true : (directiveSplit[ 1 ] === 'false' ? false : (\r\n                    _isNumeric( directiveSplit[ 1 ] ) ? parseInt( directiveSplit[ 1 ] ) : directiveSplit[ 1 ]\r\n                ) )\r\n            );\r\n            return _metaVars;\r\n        }, {} );\r\n    }\r\n    return { get name() { return name; }, get content() { return _el.content; }, json() {\r\n\t\treturn JSON.parse( JSON.stringify( _content ) );\r\n    } };\r\n}", "\r\n/**\r\n * Converts a string to title case.\r\n *\r\n * @param string \tstr\r\n * @param bool \t\tstrict\r\n *\r\n * @return string\r\n */\r\nexport default function(str, strict) {\r\n\tif (typeof str !== 'string') {\r\n\t\treturn str;\r\n\t}\r\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\r\n};\r\n", "\n/**\n * @imports\n */\nimport realdomInit from '@webqit/realdom';\nimport { _internals } from '@webqit/util/js/index.js';\nimport { _merge } from '@webqit/util/obj/index.js';\nimport { _toTitle } from '@webqit/util/str/index.js';\n\nexport const _ = ( ...args ) => _internals( 'oohtml', ...args );\n\nexport const env = {};\n\nexport function _init( name, $config, $defaults ) {\n    const window = this, realdom = realdomInit.call( window );\n    env.window = window;\n    if ( !window.webqitConfig ) {\n        window.webqitConfig = realdom.meta( 'webqit' ).json();\n    }\n    window.webqit || ( window.webqit = {} );\n    window.webqit.oohtml || ( window.webqit.oohtml = {} );\n    window.webqit.oohtml.configs || ( window.webqit.oohtml.configs = {} );\n    // ---------------------\n    const configKey = name.toUpperCase().replace( '-', '_' );\n    if ( !window.webqit.oohtml.configs[ configKey ] ) {\n        window.webqit.oohtml.configs[ configKey ] =  {};\n        const config = window.webqit.oohtml.configs[ configKey ];\n        _merge( 2, config, $defaults, $config, realdom.meta( name ).json() );\n        if ( window.webqitConfig.prefix ) {\n            Object.keys( config ).forEach( main => {\n                Object.keys( config[ main ] ).forEach( key => {\n                    if ( main === 'api' && typeof config[ main ][ key ] === 'string' ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }${ _toTitle( config[ main ][ key ] ) }`\n                    } else if ( [ 'attr', 'elements' ].includes( main ) && config[ main ][ key ]?.startsWith( 'data-' ) === false ) {\n                        config[ main ][ key ] = `${ window.webqitConfig.prefix }-${ config[ main ][ key ] }`\n                    }\n                } );\n            } );\n        }\n    }\n    // ---------------------\n    return { config: window.webqit.oohtml.configs[ configKey ], realdom, window };\n}\n\nexport function getInternalAttrInteraction( node, attrName ) {\n\treturn _internals( node, 'internalAttrInteractions' ).get( attrName );\n}\nexport function internalAttrInteraction( node, attrName, callback ) {\n\tconst savedAttrLocking = _internals( node, 'internalAttrInteractions' ).get( attrName );\n\t_internals( node, 'internalAttrInteractions' ).set( attrName, true );\n\tconst value = callback();\n\t_internals( node, 'internalAttrInteractions' ).set( attrName, savedAttrLocking );\n\treturn value;\n}\n\nexport function _compare( a, b, depth = 1, objectSizing = false ) {\n    if ( depth && typeof a === 'object' && a && typeof b === 'object' && b && ( !objectSizing || Object.keys( a ).length === Object.keys( b ).length ) ) {\n        for ( let key in a ) {\n            if ( !_compare( a[ key ], b[ key ], depth - 1, objectSizing ) ) return false;\n        }\n        return true;\n    }\n    if ( Array.isArray( a ) && Array.isArray( b ) && a.length === b.length ) {\n        return ( b = b.slice( 0 ).sort() ) && a.slice( 0 ).sort().every( ( valueA, i ) => valueA === b[ i ] );\n    }\n    return a === b;\n}\n\nexport function _splitOuter( str, delim ) {\n    return [ ...str ].reduce( ( [ quote, depth, splits ], x ) => {\n        if ( !quote && depth === 0 && ( Array.isArray( delim ) ? delim : [ delim ] ).includes( x ) ) {\n            return [ quote, depth, [ '' ].concat( splits ) ];\n        }\n        if ( !quote && [ '(', '[', '{' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth++;\n        if ( !quote && [ ')', ']', '}' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) depth--;\n        if ( [ '\"', \"'\", '`' ].includes( x ) && !splits[ 0 ].endsWith( '\\\\' ) ) {\n            quote = quote === x ? null : ( quote || x );\n        }\n        splits[ 0 ] += x;\n        return [ quote, depth, splits ]\n    }, [ null, 0, [ '' ] ] )[ 2 ].reverse();\n}\n\n// Unique ID generator\nexport const _uniqId = () => ( 0 | Math.random() * 9e6 ).toString( 36 );\n\n// Hash of anything generator\nconst hashTable = new Map;\nexport function _toHash( val ) {\n    let hash;\n    if ( !( hash = hashTable.get( val ) ) ) {\n        hash = _uniqId();\n        hashTable.set( val, hash );\n    }\n    return hash;\n}\n\n// Value of any hash\nexport function _fromHash( hash ) {\n    let val;\n    hashTable.forEach( ( _hash, _val ) => {\n        if ( _hash === hash ) val = _val;\n    } );\n    return val;\n}", "\n/**\n * @imports\n */\nimport { getDefs } from './index.js';\nimport { _, env } from '../util.js';\n\nexport default class HTMLModule {\n\n    /**\n     * @instance\n     */\n    static instance( host ) {\n        return _( host ).get( 'defsmanager::instance' ) || new this( host );\n    }\n\n    /**\n     * @constructor\n     */\n    constructor( host, parent = null, level = 0 ) {\n        const { window } = env, { webqit: { realdom, oohtml: { configs } } } = window;\n        _( host ).get( `defsmanager::instance` )?.dispose();\n        _( host ).set( `defsmanager::instance`, this );\n        this.window = window;\n        this.host = host;\n        this.config = configs.HTML_IMPORTS;\n        this.parent = parent;\n        this.level = level;\n        this.defs = getDefs( this.host );\n        this.defId = ( this.host.getAttribute( this.config.attr.def ) || '' ).trim();\n        this.validateDefId( this.defId );\n        // ----------\n        this.realtimeA = realdom.realtime( this.host.content ).children( record => {\n            this.expose( record.entrants, true );\n            this.expose( record.exits, false );\n        }, { live: true, timing: 'sync' } );\n        // ----------\n        this.realtimeB = realdom.realtime( this.host ).attr( [ 'src', 'loading' ], ( ...args ) => this.evaluateLoading( ...args ), {\n            live: true,\n            atomic: true,\n            timing: 'sync',\n            lifecycleSignals: true\n        } );\n        // ----------\n        this.realtimeC = this.evalInheritance();\n        // ----------\n    }\n\n    /**\n     * Validates export ID.\n     * \n     * @param String     defId\n     *\n     * @returns Void\n     */\n    validateDefId( defId ) {\n        if ( [ '@', '/', '*', '#' ].some( token => defId.includes( token ) ) ) {\n            throw new Error( `The export ID \"${ defId }\" contains an invalid character.` );\n        }\n    }\n\n    /**\n     * Maps module contents as defs.\n     * \n     * @param Array     entries\n     * @param Bool      isConnected\n     *\n     * @returns Void\n     */\n    expose( entries, isConnected ) {\n        const { window } = env, { webqit: { Observer } } = window;\n        let dirty, allFragments = this.defs[ '#' ] || [];\n        entries.forEach( entry => {\n            if ( entry.nodeType !== 1 ) return;\n            const isTemplate = entry.matches( this.config.templateSelector );\n            const defId = ( entry.getAttribute( isTemplate ? this.config.attr.def : this.config.attr.fragmentdef ) || '' ).trim();\n            if ( isConnected ) {\n                if ( isTemplate && defId ) {\n                    new HTMLModule( entry, this.host, this.level + 1 );\n                } else {\n                    allFragments.push( entry );\n                    dirty = true;\n                    if ( typeof requestIdleCallback === 'function' ) {\n                        requestIdleCallback( () => {\n                            this.config.idleCompilers?.forEach( callback => callback.call( this.window, entry ) );\n                        } );\n                    }\n                }\n                if ( defId ) {\n                    this.validateDefId( defId );\n                    Observer.set( this.defs, ( !isTemplate && '#' || '' ) + defId, entry );\n                }\n            } else {\n                if ( isTemplate && defId ) { HTMLModule.instance( entry ).dispose(); }\n                else {\n                    allFragments = allFragments.filter( x => x !== entry );\n                    dirty = true;\n                }\n                if ( defId ) Observer.deleteProperty( this.defs, ( !isTemplate && '#' || '' ) + defId );\n            }\n        } );\n        if ( dirty ) Observer.set( this.defs, '#', allFragments );\n    }\n\n    /**\n     * Evaluates remote content loading.\n     *\n     * @param AbortSignal   signal\n     * \n     * @returns Void\n     */\n    evaluateLoading( [ record1, record2 ], { signal } ) {\n        const { window: { webqit: { Observer } } } = env;\n        const src = ( record1.value || '' ).trim();\n        if ( !src ) return;\n        let $loadingPromise, loadingPromise = promise => {\n            if ( !promise ) return $loadingPromise; // Get\n            $loadingPromise = promise.then( () => interception.remove() ); // Set\n        };\n        const loading = ( record2.value || '' ).trim();\n        const interception = Observer.intercept( this.defs, 'get', async ( descriptor, recieved, next ) => {\n            if ( loading === 'lazy' ) { loadingPromise( this.load( src, true ) ); }\n            await loadingPromise();\n            return next();\n        }, { signal } );\n        if ( loading !== 'lazy' ) { loadingPromise( this.load( src ) ); }\n    }\n    \n    /**\n     * Fetches a module's \"src\".\n     *\n     * @param String src\n     *\n     * @return Promise\n     */\n    load( src ) {\n        const { window } = env;\n        if ( this.host.content.children.length ) return Promise.resolve();\n        // Ongoing request?\n        if ( this.fetchInFlight?.src === src ) return this.fetchInFlight.request;\n        this.fetchInFlight?.controller.abort();\n\n        // The promise\n        const controller = new AbortController();\n        const fire = ( type, detail ) => this.host.dispatchEvent( new window.CustomEvent( type, { detail } ) );\n        const request = window.fetch( src, { signal: controller.signal, element: this.host } ).then( response => {\n            return response.ok ? response.text() : Promise.reject( response.statusText );\n        } ).then( content => {\n            this.host.innerHTML = content.trim(); // IMPORTANT: .trim()\n            fire( 'load' );\n            return this.host;\n        } ).catch( e => {\n            console.error( `Error fetching the bundle at \"${ src }\": ${ e.message }` );\n            this.fetchInFlight = null;\n            fire( 'loaderror' );\n            return this.host;\n        } );\n        this.fetchInFlight = { src, request, controller };\n        return request;\n    }\n\n    /**\n     * Evaluates module inheritance.\n     *\n     * @returns Void|AbortController\n     */\n    evalInheritance( ) {\n        if ( !this.parent ) return [];\n        const { window: { webqit: { Observer } } } = env;\n        let extendedId = ( this.host.getAttribute( this.config.attr.extends ) || '' ).trim();\n        let inheritedIds = ( this.host.getAttribute( this.config.attr.inherits ) || '' ).trim().split( ' ' ).map( id => id.trim() ).filter( x => x );\n        const handleInherited = records => {\n            records.forEach( record => {\n                if ( Observer.get( this.defs, record.key ) !== record.oldValue ) return;\n                if ( [ 'get'/*initial get*/, 'set', 'def' ].includes( record.type ) ) {\n                    Observer[ record.type.replace( 'get', 'set' ) ]( this.defs, record.key, record.value );\n                } else if ( record.type === 'delete' ) {\n                    Observer.deleteProperty( this.defs, record.key );\n                }\n            } );\n        };\n        const realtimes = [];\n        const parentDefsObj = getDefs( this.parent );\n        if ( extendedId ) {\n            realtimes.push( Observer.reduce( parentDefsObj, [ extendedId, this.config.api.defs, Infinity ], Observer.get, handleInherited, { live: true } ) );\n        }\n        if ( inheritedIds.length ) {\n            realtimes.push( Observer.get( parentDefsObj, inheritedIds.includes( '*' ) ? Infinity : inheritedIds, handleInherited, { live: true } ) );\n        }\n        return realtimes;\n    }\n    \n    /**\n     * Disposes the instance and its processes.\n     *\n     * @returns Void\n     */\n    dispose() {\n        this.realtimeA.disconnect();\n        this.realtimeB.disconnect();\n        this.realtimeC.forEach( r => ( r instanceof Promise ? r.then( r => r.abort() ) : r.abort() ) );\n        Object.entries( this.defs ).forEach( ( [ key, entry ] ) => {\n            if ( key.startsWith( '#' ) ) return;\n            HTMLModule.instance( entry ).dispose();\n        } );\n    }\n}\n", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default function() {\n    const { window } = env, { webqit } = window;\n    if ( webqit.DOMContextRequestEvent ) return webqit.DOMContextRequestEvent;\n    class DOMContextRequestEvent extends window.Event {\n        /**\n         * @constructor\n         */\n        constructor( ...args ) {\n            const callback = args.pop();\n            if ( typeof callback !== 'function' ) throw new Error( `Callback must be provided.` );\n            const options = args.pop();\n            if ( !options?.kind ) throw new Error( `\"options.kind\" must be specified.` );\n            const eventNames = [ 'contextrequest', 'contextclaim' ];\n            const type = args.pop() || eventNames[ 0 ];\n            if ( !eventNames.includes( type ) ) throw new Error( `Invalid event type. Must be one of: ${ eventNames.join( ',' ) }` );\n            // -------------\n            const { kind, detail, targetContext, live, signal, diff, ...otherOpts } = options;\n            super( type, { ...otherOpts, bubbles: otherOpts.bubbles !== false  } );\n            // -------------\n            Object.defineProperty( this, 'callback', { get: () => callback } );\n            Object.defineProperty( this, 'kind', { get: () => kind } );\n            Object.defineProperty( this, 'targetContext', { get: () => targetContext } );\n            Object.defineProperty( this, 'detail', { get: () => detail } );\n            Object.defineProperty( this, 'live', { get: () => live } );\n            Object.defineProperty( this, 'signal', { get: () => signal } );\n            Object.defineProperty( this, 'diff', { get: () => diff } );\n            Object.defineProperty( this, 'options', { get: () => otherOpts } );\n            Object.defineProperty( this, 'meta', { value: {} } );\n        }\n\n        get target() { return super.target || this.meta.target; }\n        get answered() { return this.meta.answered || false; }\n\n        /**\n         * @respondWith\n         */\n        respondWith( response ) {\n            this.meta.answered = true;\n            if ( this.diff ) {\n                if ( '_prevValue' in this && this._prevValue === response ) return;\n                Object.defineProperty( this, '_prevValue', { value: response, configurable: true } );\n            }\n            return this.callback( response );\n        }\n    }\n    webqit.DOMContextRequestEvent = DOMContextRequestEvent;\n    return DOMContextRequestEvent;\n}", "\n/**\n * @imports\n */\nimport { env } from '../util.js';\n\nexport default class DOMContextResponse extends AbortController {\n    constructor( callback ) {\n        super();\n        callback( response => {\n            const { window: { webqit: { Observer } } } = env;\n            Observer.defineProperty( this, 'value', { value: response, configurable: true, enumerable: true } );\n        }, this );\n    }\n}", "\nexport default class DuplicateContextError extends Error {}", "\n/**\n * @imports\n */\nimport _DOMContextRequestEvent from './_DOMContextRequestEvent.js';\nimport DOMContextResponse from './DOMContextResponse.js';\nimport DOMContext from './DOMContext.js';\nimport DuplicateContextError from './DuplicateContextError.js';\nimport { _ } from '../util.js';\n\nconst waitListMappings = new Map;\nexport default class DOMContexts {\n\n    /**\n     * @instance\n     */\n    static instance( host ) {\n        return _( host ).get( 'contexts::instance' ) || new this( host );;\n    }\n\n    /**\n     * @constructor\n     */\n    constructor( host ) {\n        _( host ).get( `contexts::instance` )?.dispose();\n        _( host ).set( `contexts::instance`, this );\n        const priv = { host, contexts: new Set };\n        Object.defineProperty( this, '#', { get: () => priv } );\n    }\n\n    /**\n     * @Symbol.iterator\n     */\n    [ Symbol.iterator ] () { return this[ '#' ].contexts[ Symbol.iterator ](); }\n\n    /**\n     * @length\n     */\n    get length() { return this[ '#' ].contexts.size; }\n\n    /**\n     * @find()\n     */\n    find( ...args ) {\n        return [ ...this[ '#' ].contexts ].find( ctx => {\n            if ( typeof args[ 0 ] === 'function' ) return args[ 0 ]( ctx );\n            return ctx.constructor.kind === args[ 0 ] && ( !args[ 1 ] || ctx.detail === args[ 1 ] );\n        } );\n    }\n\n    /**\n     * @attach()\n     */\n    attach( ctx ) {\n        if ( !( ctx instanceof DOMContext) ) throw new TypeError( `Context is not a valid DOMContext instance.` );\n        if ( this.find( ctx.constructor.kind, ctx.detail ) ) {\n            throw new DuplicateContextError( `Context of same kind \"${ ctx.constructor.kind }\"${ ctx.detail ? ` and detail \"${ ctx.detail }\"` : '' } already exists.` );\n        }\n        this[ '#' ].contexts.add( ctx );\n        ctx.initialize( this[ '#' ].host );\n    }\n\n    /**\n     * @detach()\n     */\n    detach( ctx ) {\n        ctx.dispose( this[ '#' ].host );\n        this[ '#' ].contexts.delete( ctx );\n    }\n\n    /**\n     * @request()\n     */\n    request( ...args ) {\n        return new DOMContextResponse( ( emitter, responseInstance ) => {\n            if ( typeof args[ args.length - 1 ] !== 'function' ) {\n                if ( !args[ args.length - 1 ] ) { args[ args.length - 1 ] = emitter; }\n                else { args.push( emitter ); }\n            }\n\n            let options;\n            if ( ( options = args.find( arg => typeof arg === 'object' && arg ) ) && options.live ) {\n                if ( options.signal ) options.signal.addEventListener( 'abort', () => responseInstance.abort() );\n                args[ args.indexOf( options ) ] = { ...options, signal: responseInstance.signal };\n            }\n            const event = new ( _DOMContextRequestEvent() )( ...args );\n            this[ '#' ].host.dispatchEvent( event );\n        } );\n    }\n\n}", "\n/**\n * @imports\n */\nimport DOMContexts from './DOMContexts.js';\nimport { env } from '../util.js';\n\nexport default class DOMContext {\n\n    /**\n     * To be implemented by subclasses\n     */\n    static kind;\n\n    /**\n     * @createRequest\n     */\n    static createRequest() { return { kind: this.kind }; }\n    \n    /**\n     * @constructor\n     */\n    constructor( detail = null ) {\n        Object.defineProperty( this, 'detail', { get: () => detail } );\n        Object.defineProperty( this, 'subscriptions', { value: new Set } );\n    }\n\n    /**\n     * @configs\n     */\n    get configs() {\n        const { window: { webqit: { oohtml: { configs } } } } = env;\n        return configs;\n    }\n\n    /**\n     * @name\n     */\n    get name() { return [ env.window.Document, env.window.ShadowRoot ].some( x => this.host instanceof x ) ? Infinity : this.host.getAttribute( this.configs.CONTEXT_API.attr.contextname ); }\n\n    /**\n     * @subscribed()\n     */\n    subscribed( event ) {}\n\n    /**\n     * @handle()\n     */\n    handle( event ) {}\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) {}\n\n    /**\n     * @matchEvent\n     */\n    matchEvent( event ) {\n        return event.kind === this.constructor.kind\n        && ( !event.targetContext || event.targetContext === this.name );\n    }\n\n    /**\n     * @handleEvent()\n     */\n    handleEvent( event ) {\n        if ( this.disposed || typeof event.respondWith !== 'function'  ) return;\n        if ( event.type === 'contextclaim' ) {\n            if ( !( event.detail instanceof DOMContext ) || event.target === this.host ) return;\n            const claims = new Set;\n            this.subscriptions.forEach( subscriptionEvent => {\n                if ( !event.target.contains( subscriptionEvent.target ) || !event.detail.matchEvent( subscriptionEvent ) ) return;\n                this.subscriptions.delete( subscriptionEvent );\n                this.unsubscribed( subscriptionEvent );\n                claims.add( subscriptionEvent );\n            } );\n            if ( claims.size ) { return event.respondWith( claims ); }\n        }\n        if ( event.type === 'contextrequest' ) {\n            if ( !this.matchEvent( event ) ) return;\n            if ( event.live ) {\n                this.subscriptions.add( event );\n                this.subscribed( event );\n                event.signal?.addEventListener( 'abort', () => {\n                    this.subscriptions.delete( event );\n                    this.unsubscribed( event );\n                } );\n            }\n            event.stopPropagation();\n            return this.handle( event );\n        }\n    }\n\n    /**\n     * @initialize()\n     */\n    initialize( host ) {\n        this.host = host;\n        this.disposed = false;\n        host.addEventListener( 'contextrequest', this );\n        host.addEventListener( 'contextclaim', this );\n        const { value: claims } = DOMContexts.instance( host ).request( 'contextclaim', { kind: this.constructor.kind, detail: this } );\n        claims?.forEach( subscriptionEvent => {\n            this.subscriptions.add( subscriptionEvent );\n            this.subscribed( subscriptionEvent );\n            this.handle( subscriptionEvent );\n        } );\n        return this;\n    }\n     \n    /**\n     * @dispose()\n     */\n    dispose( host ) {\n        this.disposed = true;\n        host.removeEventListener( 'contextrequest', this );\n        host.removeEventListener( 'contextclaim', this );\n        this.subscriptions.forEach( subscriptionEvent => {\n            this.subscriptions.delete( subscriptionEvent );\n            this.unsubscribed( subscriptionEvent );\n            const { target } = subscriptionEvent;\n            subscriptionEvent.meta.answered = false;\n            target.dispatchEvent( subscriptionEvent );\n        } );\n        return this;\n    }\n\n}", "\n/**\n * @imports\n */\nimport DOMContext from '../context-api/DOMContext.js';\nimport { getDefs } from './index.js';\nimport { _, env } from '../util.js';\n\nexport default class HTMLImportsContext extends DOMContext {\n\n    /**\n     * @kind\n     */\n    static kind = 'html-imports';\n\n    /**\n     * @createRequest\n     */\n    static createRequest( detail = null ) {\n        const request = super.createRequest();\n        if ( detail?.startsWith( '/' ) ) {\n            request.detail = detail;\n            request.targetContext = Infinity;\n        } else if ( detail?.startsWith( '@' ) ) {\n            const [ targetContext, ..._detail ] = detail.slice( 1 ).split( /(?<=\\w)(?=\\/|#)/ ).map( s => s.trim() );\n            request.targetContext = targetContext;\n            request.detail = _detail.join( '' );\n        } else { request.detail = detail; }\n        return request;\n    }\n     \n    /**\n     * @localModules\n     */\n    get localModules() { return getDefs( this.host ); }\n    get inheritedModules() { return this.#inheritedModules; }\n    #inheritedModules = {};\n\n    /**\n     * @handle()\n     */\n    \n    handle( event ) {\n        const { window: { webqit: { Observer } } } = env;\n        // Any existing event.meta.controller? Abort!\n        event.meta.controller?.abort();\n        // Parse and translate detail\n        let path = ( event.detail || '' ).split( /\\/|(?<=\\w)(?=#)/g ).map( x => x.trim() ).filter( x => x );\n        if ( !path.length ) return event.respondWith();\n        path = path.join( `/${ this.configs.HTML_IMPORTS.api.defs }/` )?.split( '/' ).map( x => x === '*' ? Infinity : x ) || [];\n        // We'll now fulfill request\n        const options = { live: event.live, signal: event.signal, descripted: true };\n        event.meta.controller = Observer.reduce( this.#modules, path, Observer.get, ( m ) => {\n            if ( Array.isArray( m ) ) {\n                if ( !m.length ) {\n                    event.respondWith( undefined );\n                    return;\n                }\n                // Paths with wildcard\n                for ( const n of m ) {\n                    event.respondWith( n );\n                }\n            } else {\n                event.respondWith( m.value );\n            }\n        }, options );\n    }\n\n    /**\n     * @unsubscribed()\n     */\n    unsubscribed( event ) { event.meta.controller?.abort(); }\n\n    /**\n     * @initialize()\n     */\n    #modules;\n    #controller1;\n    #controller2;\n    initialize( host ) {\n        this.host = host;\n        const { window: { webqit: { Observer } } } = env;\n        // ----------------\n        // Observe local\n        this.#modules = { ...this.localModules };\n        this.#controller1?.abort();\n        this.#controller1 = Observer.observe( this.localModules, ( mutations ) => {\n            for ( const m of mutations ) {\n                if ( m.type === 'delete' ) {\n                    if ( this.inheritedModules && Observer.has( this.inheritedModules, m.key ) ) {\n                        Observer.set( this.#modules, m.key, Observer.get( this.inheritedModules, m.key ) );\n                    } else Observer.deleteProperty( this.#modules, m.key );\n                } else Observer.set( this.#modules, m.key, m.value );\n            }\n        }, { timing: 'sync' } );\n        // ----------------\n        // If host has importscontext attr, compute that\n        const $config = this.configs.HTML_IMPORTS;\n        if ( this.host.matches && $config.attr.importscontext ) {\n            const realdom = this.host.ownerDocument.defaultView.webqit.realdom;\n            let prevRef;\n            this.#controller2?.disconnect();\n            this.#controller2 = realdom.realtime( this.host ).attr( $config.attr.importscontext, ( record, { signal } ) => { \n                const moduleRef = ( record.value || '' ).trim();\n                if ( moduleRef === prevRef ) return;\n                prevRef = moduleRef;\n                // This superModules contextrequest is automatically aborted by the injected signal below\n                const request = { ...this.constructor.createRequest( moduleRef ? `${moduleRef}/*` : '*' ), live: true, signal, diff: true };\n                this.host.parentNode[ this.configs.CONTEXT_API.api.contexts ].request( request, ( m ) => {\n                    const _delete = ( key ) => {\n                        Reflect.deleteProperty( this.inheritedModules, key );\n                        if ( !Observer.has( this.localModules, key ) ) {\n                            Observer.deleteProperty( this.#modules, key );\n                        }\n                    };\n                    const _set = ( key, value ) => {\n                        Reflect.set( this.inheritedModules, key, value );\n                        if ( !Observer.has( this.localModules, key ) ) {\n                            Observer.set( this.#modules, key, value );\n                        }\n                    };\n                    if ( !m ) {\n                        Object.keys( this.inheritedModules ).forEach( _delete );\n                    } else {\n                        if ( m.type === 'delete' ) {\n                            _delete( m.key );\n                        } else _set( m.key, m.value );\n                    }\n                } );\n            }, { live: true, timing: 'sync', oldValue: true, lifecycleSignals: true } );\n        }\n        // ----------------\n        return super.initialize( host );\n    }\n    \n    /**\n     * @dispose()\n     */\n    dispose( host ) {\n        // Stop listening for sources\n        this.#controller1?.abort();\n        this.#controller2?.disconnect();\n        // Now, stop listening for contextrequest and contextclaim events\n        // And relinquish own subscribers to owner context\n        return super.dispose( host );\n    }\n}\n", "\n/**\n * @imports\n */\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport { _, env } from '../util.js';\n\n/**\n * Creates the HTMLImportElement class.\n * \n * @param Object config \n * \n * @return HTMLImportElement\n */\nexport default function() {\n    const { window } = env, { webqit } = window, { realdom, oohtml: { configs } } = webqit;\n    if ( webqit.HTMLImportElement ) return webqit.HTMLImportElement;\n    const BaseElement = configs.HTML_IMPORTS.elements.import.includes( '-' ) ? window.HTMLElement : class {};\n    class HTMLImportElement extends BaseElement {\n        \n        /**\n         * @instance\n         * \n         * @param HTMLElement node\n         * \n         * @returns \n         */\n        static instance( node ) {\n            if ( configs.HTML_IMPORTS.elements.import.includes( '-' ) && ( node instanceof this ) )  return node;\n            return _( node ).get( 'import::instance' ) || new this( node );\n        }\n\n        /**\n         * @constructor\n         */\n        constructor( ...args ) {\n            super();\n            // --------\n            const el = args[ 0 ] || this;\n            _( el ).set( 'import::instance', this );\n            Object.defineProperty( this, 'el', { get: () => el, configurable: false } );\n\n            const priv = {};\n            Object.defineProperty( this, '#', { get: () => priv, configurable: false } );\n            priv.slottedElements = new Set;\n\n            priv.setAnchorNode = anchorNode => {\n                priv.anchorNode = anchorNode;\n                return anchorNode;\n            };\n\n            priv.live = callback => {\n                if ( priv.liveImportsRealtime ) throw new Error(`Import element already in live mode.`);\n                const parentNode = this.el.isConnected ? this.el.parentNode : priv.anchorNode.parentNode;\n                priv.liveImportsRealtime = realdom.realtime( this.el ).attr( configs.HTML_IMPORTS.attr.ref, ( record, { signal } ) => {\n                    priv.moduleRef = record.value;\n                    const moduleRef = priv.moduleRef.includes( '#' ) ? priv.moduleRef : `${ priv.moduleRef }#`/* for live children */;\n                    const request = { ...HTMLImportsContext.createRequest( moduleRef ), live: signal && true, signal, diff: !moduleRef.endsWith('#') };\n                    parentNode[ configs.CONTEXT_API.api.contexts ].request( request, response => {\n                        callback( ( response instanceof window.HTMLTemplateElement ? [ ...response.content.children ] : (\n                            Array.isArray( response ) ? response : response && [ response ]\n                        ) ) || [] );\n                    } );\n                }, { live: true, timing: 'sync', lifecycleSignals: true } );\n                priv.autoDestroyRealtime = realdom.realtime( window.document ).track( parentNode, () => {\n                    priv.die();\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' } );\n            };\n\n            priv.die = () => {\n                priv.autoDestroyRealtime?.disconnect();\n                priv.liveImportsRealtime?.disconnect();\n                priv.liveImportsRealtime = null;\n            };\n\n            priv.hydrate = ( anchorNode, slottedElements ) => {\n                anchorNode.replaceWith( priv.setAnchorNode( this.createAnchorNode() ) );\n                priv.live( fragments => {\n                    // The default action\n                    if ( priv.originalsRemapped ) return this.fill( fragments );\n                    // Initial remap action\n                    const identifiersMap = fragments.map( ( fragment, i ) => ( { el: fragment, fragmentDef: fragment.getAttribute( configs.HTML_IMPORTS.attr.fragmentdef ) || '', tagName: fragment.tagName, i } ) );\n                    slottedElements.forEach( ( slottedElement, i ) => {\n                        const tagName = slottedElement.tagName, fragmentDef = slottedElement.getAttribute( configs.HTML_IMPORTS.attr.fragmentdef ) || '';\n                        const originalsMatch = ( i ++, identifiersMap.find( fragmentIdentifiers => fragmentIdentifiers.tagName === tagName && fragmentIdentifiers.fragmentDef === fragmentDef && fragmentIdentifiers.i === i ) );\n                        if ( originalsMatch ) _( slottedElement ).set( 'original@imports', originalsMatch.el ); // Or should we throw integrity error here?\n                        _( slottedElement ).set( 'slot@imports', this.el );\n                        priv.slottedElements.add( slottedElement );\n                    } );\n                    priv.originalsRemapped = true;\n                });\n            };\n\n            priv.autoRestore = ( callback = null ) => {\n                priv.autoRestoreRealtime?.disconnect();\n                if ( callback ) callback();\n                const restore = () => {\n                    if (this.el.isConnected) return;\n                    this.el.setAttribute( 'data-nodecount', 0 );\n                    priv.internalMutation = true;\n                    priv.anchorNode.replaceWith( this.el );\n                    priv.internalMutation = false;\n                    priv.setAnchorNode( null );\n                };\n                if ( !priv.slottedElements.size ) return restore();\n                const autoRestoreRealtime = realdom.realtime( priv.anchorNode.parentNode ).observe( [ ...priv.slottedElements ], record => {\n                    record.exits.forEach( outgoingNode => {\n                        _( outgoingNode ).delete( 'slot@imports' );\n                        priv.slottedElements.delete( outgoingNode );\n                    } );\n                    if ( !priv.slottedElements.size ) {\n                        autoRestoreRealtime.disconnect();\n                        // At this point, ignore if this is a removal involving the whole parent node\n                        if ( !record.target.isConnected ) return;\n                        restore();\n                    }\n                }, { subtree: 'cross-roots', timing: 'sync', generation: 'exits' } );\n                priv.autoRestoreRealtime = autoRestoreRealtime;\n            };\n\n            priv.connectedCallback = () => {\n                if ( priv.internalMutation ) return;\n                priv.live( fragments => this.fill( fragments ) );\n            };\n\n            priv.disconnectedCallback = () => {\n                if ( priv.internalMutation ) return;\n                priv.die();\n            };\n        }\n\n        /**\n         * Creates the slot's anchor node.\n         *\n         * @return Element\n         */\n        createAnchorNode() {\n            if ( window.webqit.env !== 'server' ) { return window.document.createTextNode( '' ) }\n            const escapeElement = window.document.createElement( 'div' );\n            escapeElement.textContent = this.el.outerHTML;\n            const anchorNode = window.document.createComment( escapeElement.innerHTML );\n            _( anchorNode ).set( 'isAnchorNode', true );\n            return anchorNode;\n        }\n\n        /**\n         * Fills the slot with slottableElements\n         *\n         * @param Iterable  slottableElements\n         *\n         * @return void\n         */\n        fill( slottableElements, r ) {\n            if (!this.el.isConnected && (!this[ '#' ].anchorNode || !this[ '#' ].anchorNode.isConnected)) {\n                // LiveImports must be responding to an event that just removed the subtree from DOM\n                return;\n            }\n            if ( Array.isArray( slottableElements ) ) { slottableElements = new Set( slottableElements ) }\n            // This state must be set before the diffing below and the serialization done at createAnchorNode()\n            this.el.setAttribute( 'data-nodecount', slottableElements.size );\n            this[ '#' ].autoRestore( () => {              \n                this[ '#' ].slottedElements.forEach( slottedElement => {\n                    const slottedElementOriginal = _( slottedElement ).get( 'original@imports' );\n                    // If still available in source, simply leave unchanged\n                    // otherwise remove it from slot... to reflect this change\n                    if ( slottableElements.has( slottedElementOriginal ) ) {\n                        slottableElements.delete( slottedElementOriginal );\n                    } else {\n                        this[ '#' ].slottedElements.delete( slottedElement );\n                        // This removal will not be caught\n                        slottedElement.remove();\n                    }\n                } );\n                // Make sure anchor node is what's in place...\n                // not the import element itslef - but all only when we have slottableElements.size\n                if ( slottableElements.size && this.el.isConnected ) {\n                    const newAnchorNode = this[ '#' ].setAnchorNode( this.createAnchorNode() );\n                    this[ '#' ].internalMutation = true;\n                    this.el.replaceWith( newAnchorNode );\n                    this[ '#' ].internalMutation = false;\n                }\n                // Insert slottables now\n                slottableElements.forEach( slottableElement => {\n                    // Clone each slottable element and give it a reference to its original\n                    const slottableElementClone = slottableElement.cloneNode( true );\n                    // The folllowing references must be set before adding to DODM\n                    if ( !slottableElementClone.hasAttribute( configs.HTML_IMPORTS.attr.fragmentdef ) ) {\n                        slottableElementClone.toggleAttribute( configs.HTML_IMPORTS.attr.fragmentdef, true );\n                    }\n                    _( slottableElementClone ).set( 'original@imports', slottableElement );\n                    _( slottableElementClone ).set( 'slot@imports', this.el );\n                    this[ '#' ].slottedElements.add( slottableElementClone );\n                    this[ '#' ].anchorNode.before( slottableElementClone );\n                } );\n            } );\n        }\n\n        /**\n         * Empty slot.\n         *\n         * @return void\n         */\n        empty() { this[ '#' ].slottedElements.forEach( slottedElement => slottedElement.remove() ); }\n\n        /**\n         * Returns the slot's anchorNode.\n         *\n         * @return array\n         */\n        get anchorNode() { return this[ '#' ].anchorNode; }\n\n        /**\n         * Returns the slot's module reference, if any.\n         *\n         * @return string\n         */\n        get moduleRef() { return this[ '#' ].moduleRef; }\n\n        /**\n         * Returns the slot's slotted elements.\n         *\n         * @return array\n         */\n        get slottedElements() { return this[ '#' ].slottedElements; }\n    }\n    if ( configs.HTML_IMPORTS.elements.import.includes( '-' ) ) { customElements.define( configs.HTML_IMPORTS.elements.import, HTMLImportElement ); }\n    webqit.HTMLImportElement = HTMLImportElement;\n    return HTMLImportElement;\n}", "\n/**\n * @imports\n */\nimport HTMLModule from './HTMLModule.js';\nimport HTMLImportsContext from './HTMLImportsContext.js';\nimport _HTMLImportElement from './_HTMLImportElement.js';\nimport { _, _init } from '../util.js';\n\n/**\n * Initializes HTML Modules.\n * \n * @param $config  Object\n *\n * @return Void\n */\nexport default function init($config = {}) {\n    const { config, window } = _init.call(this, 'html-imports', $config, {\n        elements: { import: 'import', },\n        attr: { def: 'def', extends: 'extends', inherits: 'inherits', ref: 'ref', importscontext: 'importscontext', },\n        api: { def: 'def', defs: 'defs', import: 'import' },\n    });\n    if (!config.attr.fragmentdef) { config.attr.fragmentdef = config.attr.def; }\n    config.templateSelector = `template[${window.CSS.escape(config.attr.def)}]`;\n    config.importsContextSelector = `[${window.CSS.escape(config.attr.importscontext)}]`;\n    config.slottedElementsSelector = `[${window.CSS.escape(config.attr.fragmentdef)}]:not(template)`;\n    const anchorNodeMatch = (start, end) => {\n        const starting = `starts-with(., \"${start}\")`;\n        const ending = `substring(., string-length(.) - string-length(\"${end}\") + 1) = \"${end}\"`;\n        return `${starting} and ${ending}`;\n    }\n    config.anchorNodeSelector = `comment()[${anchorNodeMatch(`&lt;${config.elements.import}`, `&lt;/${config.elements.import}&gt;`)}]`;\n    window.webqit.HTMLImportsContext = HTMLImportsContext;\n    window.webqit.HTMLImportElement = _HTMLImportElement();\n    exposeAPIs.call(window, config);\n    realtime.call(window, config);\n}\n\n/**\n * Returns the \"defs\" object associated with the given node.\n *\n * @param Element       node\n * @param Bool          autoCreate\n *\n * @return Object\n */\nexport function getDefs(node, autoCreate = true) {\n    if (!_(node).has('defs') && autoCreate) {\n        const defs = Object.create(null);\n        _(node).set('defs', defs);\n    }\n    return _(node).get('defs');\n}\n\n/**\n * Exposes HTML Modules with native APIs.\n *\n * @param Object        config\n *\n * @return Void\n */\nfunction exposeAPIs(config) {\n    const window = this, { webqit: { oohtml: { configs } } } = window;\n    // The \"def\" & \"defs\" properties\n    if (config.api.def in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.def}\" API!`); }\n    if (config.api.defs in window.HTMLTemplateElement.prototype) { throw new Error(`The \"HTMLTemplateElement\" prototype already has a \"${config.api.defs}\" API!`); }\n    // No-conflict assertions\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.def, {\n        get: function () {\n            return this.getAttribute(config.attr.def);\n        }\n    });\n    Object.defineProperty(window.HTMLTemplateElement.prototype, config.api.defs, {\n        get: function () {\n            return getDefs(this);\n        }\n    });\n    // The \"scoped\" property\n    Object.defineProperty(window.HTMLTemplateElement.prototype, 'scoped', {\n        configurable: true,\n        get() { return this.hasAttribute('scoped'); },\n        set(value) { this.toggleAttribute('scoped', value); },\n    });\n    // The Import API\n    [window.Document.prototype, window.Element.prototype, window.ShadowRoot.prototype].forEach(prototype => {\n        // No-conflict assertions\n        const type = prototype === window.Document.prototype ? 'Document' : (prototype === window.ShadowRoot.prototype ? 'ShadowRoot' : 'Element');\n        if (config.api.import in prototype) { throw new Error(`The ${type} prototype already has a \"${config.api.import}\" API!`); }\n        // Definitions\n        Object.defineProperty(prototype, config.api.import, {\n            value: function (ref, live = false, callback = null) {\n                return importRequest(this, ...arguments);\n            }\n        });\n    });\n    function importRequest(context, ref, live = false, callback = null) {\n        let options = {};\n        if (typeof live === 'function') {\n            callback = live;\n            live = false;\n        } else if (typeof live === 'object' && live) {\n            options = { ...live, ...options };\n        } else { options = { live }; }\n        const request = { ...HTMLImportsContext.createRequest(ref), ...options };\n        return context[configs.CONTEXT_API.api.contexts].request(request, callback);\n    }\n}\n\n/**\n * Performs realtime capture of elements and their attributes\n * and their module query results; then resolves the respective import elements.\n *\n * @param Object config\n *\n * @return Void\n */\nfunction realtime(config) {\n    const window = this, { webqit: { Observer, realdom, oohtml: { configs }, HTMLImportElement, HTMLImportsContext } } = window;\n\n    // ------------\n    // MODULES\n    // ------------\n    const attachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        if (!contextsApi.find(HTMLImportsContext.kind)) {\n            contextsApi.attach(new HTMLImportsContext);\n        }\n    };\n    const detachImportsContext = host => {\n        const contextsApi = host[configs.CONTEXT_API.api.contexts];\n        const ctx = contextsApi.find(HTMLImportsContext.kind);\n        if (ctx && ( /* disconnect? */!host.isConnected || /* not inheriting && no localModules? */(\n            !host.matches?.(config.importsContextSelector) && !Object.keys(ctx.localModules).length\n        ))) {\n            contextsApi.detach(ctx);\n        }\n    };\n    // ------------\n    realdom.realtime(window.document).query([config.templateSelector, config.importsContextSelector], record => {\n        record.entrants.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                htmlModule.ownerContext = entry.scoped ? entry.parentNode : entry.getRootNode();\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId) { Observer.set(ownerContextModulesObj, htmlModule.defId, entry); }\n                // The ownerContext's defs - ownerContextModulesObj - has to be populated\n                // Before attaching a context instance to it, to give the just created context something to use for\n                // fullfiling reclaimed requests.\n                attachImportsContext(htmlModule.ownerContext);\n            } else {\n                attachImportsContext(entry);\n            }\n        });\n        record.exits.forEach(entry => {\n            if (entry.matches(config.templateSelector)) {\n                const htmlModule = HTMLModule.instance(entry);\n                //if (!htmlModule.ownerContext) return; // JSDOM sometimes\n                const ownerContextModulesObj = getDefs(htmlModule.ownerContext);\n                if (htmlModule.defId && htmlModule.ownerContext.isConnected) { Observer.deleteProperty(ownerContextModulesObj, htmlModule.defId); }\n                detachImportsContext(htmlModule.ownerContext);\n            } else {\n                detachImportsContext(entry);\n            }\n        });\n    }, { id: 'imports:template/importscontext', live: true, subtree: 'cross-roots', timing: 'sync', staticSensitivity: true, eventDetails: true });\n\n    // ------------\n    // IMPORTS\n    // ------------\n    realdom.realtime(window.document).query(config.elements.import, record => {\n        record.entrants.forEach(node => handleRealtime(node, true, record));\n        record.exits.forEach(node => handleRealtime(node, false, record));\n    }, { id: 'imports:import', live: true, subtree: 'cross-roots', timing: 'sync', deferred: true });\n    function handleRealtime(entry, connectedState) {\n        const elInstance = HTMLImportElement.instance(entry);\n        if (connectedState) { elInstance['#'].connectedCallback(); }\n        else { elInstance['#'].disconnectedCallback(); }\n    }\n    // Hydration\n    if (window.webqit.env === 'server') return;\n    realdom.realtime(window.document).query(`(${config.anchorNodeSelector})`, record => {\n        record.entrants.forEach(anchorNode => {\n            if (_(anchorNode).get('isAnchorNode')) return; // Doubling up on the early return above! Ignoring every just created anchorNode\n            const reviver = window.document.createElement('div');\n            reviver.innerHTML = anchorNode.nodeValue;\n            reviver.innerHTML = reviver.firstChild.textContent;\n            const importEl = reviver.firstChild;\n            let nodecount = parseInt(importEl.getAttribute('data-nodecount'));\n            const slottedElements = new Set;\n            let slottedElement = anchorNode;\n            while ((slottedElement = slottedElement.previousElementSibling) && slottedElement.matches(config.slottedElementsSelector) && nodecount--) {\n                slottedElements.add(slottedElement);\n            }\n            HTMLImportElement.instance(importEl)['#'].hydrate(anchorNode, slottedElements);\n        });\n    }, { id: 'imports:hydration', live: true, subtree: 'cross-roots', timing: 'sync' });\n}", "\n/**\n * @imports\n */\nimport init from './index.js';\n\n/**\n * @init\n */\ninit.call( window );"],
  "mappings": "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",
  "names": []
}
